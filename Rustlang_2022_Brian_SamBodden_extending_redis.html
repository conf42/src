<!doctype html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-77190356-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-77190356-3');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css" />
    <link rel="stylesheet" href="./assets/css/libs.bundle.css" />
    <link rel="stylesheet" href="./assets/css/theme.bundle.css" />
    <link rel="stylesheet" href="./assets/css/various.css" />

    <title>Conf42: Extending Redis with Rust</title>
    <meta name="description" content="It's time to de-dust your Rust!">

    
    <meta name="image" property="og:image" content="https://www.conf42.com/assets/headshots/https://conf42.github.io/static/headshots/rust_brian_sam-bodden.png">
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Extending Redis with Rust | Conf42"/>
    <meta property="og:description" content="In this session, we'll live-code a Redis Module in Rust that implements a Finite State Machine (FSM), we'll roughly follow these steps: * Intro to Redis ~ 3 minutes * Intro to Redis Modules ~ 2 minutes * Bootstrap our project ~ 3-5 minutes * Deploy skeleton module to Redis on Docker ~ 3-5 minutes * TDD loop `till completion - Rest of the time!   * Creating a new data structure/data type in Redis   * Adding commands to manage our FST - one at a time"/>
    <meta property="og:url" content="https://conf42.com/Rustlang_2022_Brian_SamBodden_extending_redis"/>
    

    <link rel="shortcut icon" href="./assets/favicon/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="./assets/favicon/site.webmanifest">

    

  <!-- Reddit Pixel -->
  <script>
  !function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement("script");t.src="https://www.redditstatic.com/ads/pixel.js",t.async=!0;var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(window,document);rdt('init','a2_e019g7ndfhrm', {"optOut":false,"useDecimalCurrencyValues":true,"aaid":"<AAID-HERE>"});rdt('track', 'PageVisit');
  </script>
  <!-- DO NOT MODIFY UNLESS TO REPLACE A USER IDENTIFIER -->
  <!-- End Reddit Pixel -->

  </head>
  <body>

    <!-- NAVBAR -->
    
    <!-- <nav class="navbar navbar-expand-lg navbar-light bg-light"> -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    
      <div class="container">
    
        <!-- Brand -->
        <a class="navbar-brand" href="./">
          <img src="./assets/conf42/conf42_logo_black_small.png" class="navbar-brand-img" alt="...">
        </a>
    
        <!-- Toggler -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
    
        <!-- Collapse -->
        <div class="collapse navbar-collapse" id="navbarCollapse">
    
          <!-- Toggler -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fe fe-x"></i>
          </button>
    
          <!-- Navigation -->
          <ul class="navbar-nav ms-auto">

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" id="navbarLandings" data-bs-toggle="dropdown" href="#" aria-haspopup="true" aria-expanded="false">
                Events
              </a>
              <div class="dropdown-menu dropdown-menu-xl p-0" aria-labelledby="navbarLandings">
                <div class="row gx-0">
                  <div class="col-12 col-lg-6">
                    <!-- <div class="dropdown-img-start" style="background-image: url(./assets/splash/DEVSECOPS2024_Event_Splash.png);"> -->
                    <div class="dropdown-img-start">
                      <!-- Heading -->
                      <h4 class="fw-bold text-white mb-0">
                        Featured event
                      </h4>
                      <!-- Text -->
                      <p class="fs-sm text-white">
                        DevSecOps 2024
                      </p>
                      <p class="fs-sm text-white">
                        Premiere 2024-12-05
                      </p>
                      <!-- Button -->
                      <a href="https://www.conf42.com/devsecops2024" class="btn btn-sm btn-white shadow-dark fonFt-size-sm">
                        Learn more
                      </a>
                    </div>
                  </div>
                  <div class="col-12 col-lg-6">
                    <div class="dropdown-body">
                      <div class="row gx-0">
                        <div class="col-12">
    
                        
                          <!-- Heading -->
                          <h6 class="dropdown-header mt-5">
                            2025
                          </h6>
                          <!-- List -->
                          
                          <a class="dropdown-item" href="https://www.conf42.com/devops2025">
                            DevOps
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/python2025">
                            Python
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/ce2025">
                            Chaos Engineering
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/cloud2025">
                            Cloud Native
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/llms2025">
                            Large Language Models (LLMs)
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/golang2025">
                            Golang
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/sre2025">
                            Site Reliability Engineering (SRE)
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/ml2025">
                            Machine Learning
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/obs2025">
                            Observability
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/quantum2025">
                            Quantum Computing
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/rustlang2025">
                            Rustlang
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/platform2025">
                            Platform Engineering
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/mlops2025">
                            MLOps
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/im2025">
                            Incident Management
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/kubenative2025">
                            Kube Native
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/js2025">
                            JavaScript
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/prompt2025">
                            Prompt Engineering
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/robotics2025">
                            Robotics
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/devsecops2025">
                            DevSecOps
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/iot2025">
                            Internet of Things (IoT)
                          </a>
                          
                        
                          <!-- Heading -->
                          <h6 class="dropdown-header mt-5">
                            2024
                          </h6>
                          <!-- List -->
                          
                          <a class="dropdown-item" href="https://www.conf42.com/devops2024">
                            DevOps
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/ce2024">
                            Chaos Engineering
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/python2024">
                            Python
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/cloud2024">
                            Cloud Native
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/llms2024">
                            Large Language Models (LLMs)
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/golang2024">
                            Golang
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/sre2024">
                            Site Reliability Engineering (SRE)
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/ml2024">
                            Machine Learning
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/obs2024">
                            Observability
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/quantum2024">
                            Quantum Computing
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/rustlang2024">
                            Rustlang
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/platform2024">
                            Platform Engineering
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/kubenative2024">
                            Kube Native
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/im2024">
                            Incident Management
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/js2024">
                            JavaScript
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/prompt2024">
                            Prompt Engineering
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/devsecops2024">
                            DevSecOps
                          </a>
                          
                          <a class="dropdown-item" href="https://www.conf42.com/iot2024">
                            Internet of Things (IoT)
                          </a>
                          
                        

                          <!-- Heading -->
                          <h6 class="dropdown-header mt-5">
                            Info
                          </h6>
                          <a class="dropdown-item" href="./code-of-conduct">
                            Code of Conduct
                          </a>
    
                        </div>
                      </div> <!-- / .row -->
                    </div>
                  </div>
                </div> <!-- / .row -->
              </div>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" id="navbarLandings" data-bs-toggle="dropdown" href="#" aria-haspopup="true" aria-expanded="false">
                Community
              </a>
              <div class="dropdown-menu dropdown-menu-l p-0" aria-labelledby="navbarLandings">
                <div class="row gx-0">
                  <div class="col-12 col-lg-3">
                    <div class="dropdown-body">
                      <div class="row gx-0">
                        <div class="col-12">
                          <a class="dropdown-item" href="https://conf42.circle.so/">
                            <b>Community platform login</b>
                          </a>
                          <a class="dropdown-item" href="https://discord.gg/mvHyZzRGaQ" target="_blank">
                            Discord
                          </a>
                          <a class="dropdown-item" href="./hall-of-fame">
                            Hall of Fame
                          </a>
                          <a class="dropdown-item" href="./speakers">
                            Speakers
                          </a>
                          <a class="dropdown-item" href="https://www.papercall.io/events?cfps-scope=&keywords=conf42" target="_blank">
                            Become a speaker (CFPs)
                          </a>
                          <a class="dropdown-item" href="./testimonials">
                            Testimonials
                          </a>
                          <a class="dropdown-item" href="./about">
                            About the team
                          </a>
                        </div>
                      </div> <!-- / .row -->
                    </div>
                  </div>
                </div> <!-- / .row -->
              </div>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="./podcast">
                Podcast
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="./blog">
                Blog
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="./sponsor">
                Sponsor
              </a>
            </li>
          </ul>
    
          <!-- Button -->
          <a class="navbar-btn btn btn-sm btn-primary lift ms-auto" href="#register">
            Join the community!
          </a>
    
        </div>
    
      </div>
    </nav>



<style>
.text-selected {
  background-color: #42ba96!important;
  color: white;
}
</style>
	

    <!-- WELCOME -->
    <section class="py-5 py-md-10" style="background-color: #C79716;">

      <!-- Shape -->
      <div class="shape shape-blur-3 svg-shim text-white">
        <svg viewBox="0 0 1738 487" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h1420.92s713.43 457.505 0 485.868C707.502 514.231 0 0 0 0z" fill="url(#paint0_linear)"/><defs><linearGradient id="paint0_linear" x1="0" y1="0" x2="1049.98" y2="912.68" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor" stop-opacity=".075"/><stop offset="1" stop-color="currentColor" stop-opacity="0"/></linearGradient></defs></svg>
      </div>

      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 text-center" data-aos="fade-up">

            <!-- Heading -->
            <h1 class="display-2 fw-bold text-white">
              Conf42 Rustlang 2022 - Online
            </h1>

            <h2 class="text-white">
              
              <time datetime="2022-09-01">September 01 2022</time>
              
              
            </h2>

            <!-- Text -->
            <p class="lead mb-0 text-white-75">
              
              <!-- It's time to de-dust your Rust!
 -->
              <script>
                const event_date = new Date("2022-09-01T17:00:00.000+00:00");
                const local_timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                const local_date = new Date("2022-09-01T17:00:00.000+00:00");
                // const local_offset = new Date().getTimezoneOffset() / 60;
                // local_date.setHours(local_date.getHours() + local_offset);
                document.getElementById("localtime").innerHTML = local_date + " in " + local_timezone
              </script>
            </p>

            <!-- Buttons -->
            <div class="text-center mt-5">
              
              <a href="#register" class="btn btn-primary shadow lift me-1 mb-3">
                <i class="fe fe-user-check me-2"></i>
                Subscribe to watch
              </a>
              
              
              <a class="btn btn-danger lift mb-3" data-bigpicture='{"ytSrc": "tAvLKsnNJVg"}' href="#">
                <i class="fe fe-youtube me-2"></i>
                Watch this talk
              </a>
              
              
              <a class="btn btn-info lift mb-3" data-bigpicture='{"ytSrc": "rqd7OPIa_Zg"}' href="#">
                <i class="fe fe-eye me-2"></i>
                Watch Premiere
              </a>
              
              <!-- 
              <a class="btn btn-danger lift mb-3" href="https://youtube.com/playlist?list=PLIuxSyKxlQrAYBF_TzQT7_3rXOI0gggNr" target="_blank">
                <i class="fe fe-youtube me-2"></i>
                Playlist
              </a>
               -->
            </div>

          </div>
        </div> <!-- / .row -->
      </div> <!-- / .container -->
    </section>

    <!-- SHAPE -->
    <div class="position-relative">
      <div class="shape shape-bottom shape-fluid-x svg-shim text-light">
        <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 48h2880V0h-720C1442.5 52 720 0 720 0H0v48z" fill="currentColor"/></svg>
      </div>
    </div>

    
    <!-- VIDEO -->
    <section class="pt-2 sticky">
      <div class="container">
        <div class="row justify-content-center">

          <div id="video-container" class="col-9 col-lg-12 mb-5">

          <!-- Video -->

            <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
            <div id="player" class="sticky"></div>

            <script>
              
              var transcript = [{"text": "Hey everybody, this is Brian Sambodden. Welcome to extending", "timestamp": "00:00:17,450", "timestamp_s": 17.0}, {"text": "Redis with Rust. I am a developer advocate with Redis.", "timestamp": "00:00:20,938", "timestamp_s": 20.0}, {"text": "You can reach me at bsb@redis.com on Twitter at bsbodin.", "timestamp": "00:00:25,018", "timestamp_s": 25.0}, {"text": "And you can also check out my GitHub repos. So Redis", "timestamp": "00:00:28,978", "timestamp_s": 28.0}, {"text": "Redis, it\u0027s a popular data platform that it\u0027s", "timestamp": "00:00:32,578", "timestamp_s": 32.0}, {"text": "mostly known as a very powerful and fast cache.", "timestamp": "00:00:36,530", "timestamp_s": 36.0}, {"text": "But Redis is much more than that. So today I want to give you a", "timestamp": "00:00:39,842", "timestamp_s": 39.0}, {"text": "quick tour of Redis before we look at how to extend Redis", "timestamp": "00:00:42,464", "timestamp_s": 42.0}, {"text": "for your own benefit. So Redis stands for remote dictionary", "timestamp": "00:00:46,102", "timestamp_s": 46.0}, {"text": "server. In Redis it\u0027s", "timestamp": "00:00:50,022", "timestamp_s": 50.0}, {"text": "really an in memory first full blown database with", "timestamp": "00:00:54,058", "timestamp_s": 54.0}, {"text": "optional persistence out of the box.", "timestamp": "00:00:57,812", "timestamp_s": 57.0}, {"text": "Redis provides many data types. In Redis", "timestamp": "00:01:00,820", "timestamp_s": 60.0}, {"text": "is classified as a key value database. But the difference", "timestamp": "00:01:04,398", "timestamp_s": 64.0}, {"text": "between redis and most key value databases or key value", "timestamp": "00:01:08,376", "timestamp_s": 68.0}, {"text": "stores is that the value part in redis can be", "timestamp": "00:01:12,328", "timestamp_s": 72.0}, {"text": "anything you can dream of out of the box. You get strings,", "timestamp": "00:01:15,772", "timestamp_s": 75.0}, {"text": "bitmaps, bit fields, hashes,", "timestamp": "00:01:20,890", "timestamp_s": 80.0}, {"text": "list sets, sorted sets,", "timestamp": "00:01:24,066", "timestamp_s": 84.0}, {"text": "geospatial indexes, hyperlog logs, funny name and", "timestamp": "00:01:26,850", "timestamp_s": 86.0}, {"text": "streams. But there\u0027s more, and those are all", "timestamp": "00:01:30,896", "timestamp_s": 90.0}, {"text": "the values that can be addressed as using a key in", "timestamp": "00:01:34,368", "timestamp_s": 94.0}, {"text": "Redis. But like I said, there is much more than that.", "timestamp": "00:01:38,112", "timestamp_s": 98.0}, {"text": "You can extend Redis by adding new", "timestamp": "00:01:41,076", "timestamp_s": 101.0}, {"text": "data types and new commands to manipulate those data types", "timestamp": "00:01:45,348", "timestamp_s": 105.0}, {"text": "ourselves as a company we promote seven different", "timestamp": "00:01:49,706", "timestamp_s": 109.0}, {"text": "modules that extend redis with new data types and commands.", "timestamp": "00:01:53,284", "timestamp_s": 113.0}, {"text": "Those are Redis JSON Redis search, redis,", "timestamp": "00:01:56,750", "timestamp_s": 116.0}, {"text": "graph, time series, AI gears and bloom. And they", "timestamp": "00:01:59,662", "timestamp_s": 119.0}, {"text": "extend Redis to basically behave like a document database,", "timestamp": "00:02:03,512", "timestamp_s": 123.0}, {"text": "a full blown search engine, a graph database,", "timestamp": "00:02:06,670", "timestamp_s": 126.0}, {"text": "et cetera. And now for a quick", "timestamp": "00:02:10,114", "timestamp_s": 130.0}, {"text": "tour of redis.", "timestamp": "00:02:13,212", "timestamp_s": 133.0}, {"text": "So before we get started with our module building, let\u0027s take a quick", "timestamp": "00:02:16,650", "timestamp_s": 136.0}, {"text": "tour of redis by starting a Redis server.", "timestamp": "00:02:20,416", "timestamp_s": 140.0}, {"text": "And I\u0027m running Redis 7.0.4 which is running", "timestamp": "00:02:24,430", "timestamp_s": 144.0}, {"text": "on port 63 79 which is the default Redis board.", "timestamp": "00:02:28,256", "timestamp_s": 148.0}, {"text": "And on a separate terminal I\u0027m going to start the Redis", "timestamp": "00:02:32,190", "timestamp_s": 152.0}, {"text": "CLI which is the command line interface for Redis, and by", "timestamp": "00:02:35,658", "timestamp_s": 155.0}, {"text": "default it connects to the localhost 62 79. So one", "timestamp": "00:02:39,508", "timestamp_s": 159.0}, {"text": "of the basic data types or the most basic data type that you can keep", "timestamp": "00:02:43,508", "timestamp_s": 163.0}, {"text": "in Redis, it\u0027s a string, and that is the basic", "timestamp": "00:02:46,728", "timestamp_s": 166.0}, {"text": "level key that you have in Redis. So I\u0027m going to", "timestamp": "00:02:50,782", "timestamp_s": 170.0}, {"text": "create a key called actor column one", "timestamp": "00:02:54,856", "timestamp_s": 174.0}, {"text": "and give it the value covey smolders. Now, in Redis,", "timestamp": "00:02:58,888", "timestamp_s": 178.0}, {"text": "it\u0027s very typical to create your own namespace for your keys by", "timestamp": "00:03:03,058", "timestamp_s": 183.0}, {"text": "using a separator like the column in my case.", "timestamp": "00:03:07,132", "timestamp_s": 187.0}, {"text": "So I can retrieve my key back from", "timestamp": "00:03:10,448", "timestamp_s": 190.0}, {"text": "Redis, and it gives me the string that I set", "timestamp": "00:03:13,920", "timestamp_s": 193.0}, {"text": "copy\u0027s molders. And I can also inspect a key", "timestamp": "00:03:17,440", "timestamp_s": 197.0}, {"text": "to see what value it\u0027s holding. In this case,", "timestamp": "00:03:21,124", "timestamp_s": 201.0}, {"text": "it\u0027s a string. Let\u0027s set another key", "timestamp": "00:03:24,516", "timestamp_s": 204.0}, {"text": "here. Actor two. Let\u0027s make this one.", "timestamp": "00:03:28,516", "timestamp_s": 208.0}, {"text": "Karen Gillen. As you can see, I\u0027m using", "timestamp": "00:03:32,084", "timestamp_s": 212.0}, {"text": "Marvel characters in here, and again, I can retrieve the value", "timestamp": "00:03:35,800", "timestamp_s": 215.0}, {"text": "of that key.", "timestamp": "00:03:40,072", "timestamp_s": 220.0}, {"text": "And if, for example, I try to retrieve a value of a key that doesn\u0027t", "timestamp": "00:03:42,950", "timestamp_s": 222.0}, {"text": "exist, I get a nil back.", "timestamp": "00:03:46,802", "timestamp_s": 226.0}, {"text": "And you can also set, for example,", "timestamp": "00:03:50,330", "timestamp_s": 230.0}, {"text": "encoded strings, escape strings. Pretty much", "timestamp": "00:03:55,530", "timestamp_s": 235.0}, {"text": "any binary piece of data can be stored in a redis key.", "timestamp": "00:03:59,776", "timestamp_s": 239.0}, {"text": "So I can say get actor three.", "timestamp": "00:04:04,272", "timestamp_s": 244.0}, {"text": "And you can see my wonderful misspelling", "timestamp": "00:04:08,016", "timestamp_s": 248.0}, {"text": "of Benedict Cumberbatch\u0027s name.", "timestamp": "00:04:11,946", "timestamp_s": 251.0}, {"text": "You can see here that I can also pass.", "timestamp": "00:04:15,330", "timestamp_s": 255.0}, {"text": "For example, I can set a key passing", "timestamp": "00:04:19,300", "timestamp_s": 259.0}, {"text": "the nx flag that basically means set it if it", "timestamp": "00:04:22,714", "timestamp_s": 262.0}, {"text": "doesn\u0027t exist. So in our case, that\u0027s going to", "timestamp": "00:04:26,008", "timestamp_s": 266.0}, {"text": "have no effect on the original set value.", "timestamp": "00:04:30,152", "timestamp_s": 270.0}, {"text": "But if I pass the xx flag,", "timestamp": "00:04:33,990", "timestamp_s": 273.0}, {"text": "then it will override the value that was there before.", "timestamp": "00:04:38,410", "timestamp_s": 278.0}, {"text": "So in Redis, I can list all the keys", "timestamp": "00:04:43,450", "timestamp_s": 283.0}, {"text": "by passing the keys command in star.", "timestamp": "00:04:47,314", "timestamp_s": 287.0}, {"text": "And that\u0027s obviously not recommended in production, since thread is", "timestamp": "00:04:50,750", "timestamp_s": 290.0}, {"text": "meant to hold millions or billions of keys.", "timestamp": "00:04:54,400", "timestamp_s": 294.0}, {"text": "But it\u0027s okay in debugging session like this.", "timestamp": "00:04:58,054", "timestamp_s": 298.0}, {"text": "So I can also delete a key,", "timestamp": "00:05:01,556", "timestamp_s": 301.0}, {"text": "and I can check if a key exists in", "timestamp": "00:05:06,210", "timestamp_s": 306.0}, {"text": "the system.", "timestamp": "00:05:09,428", "timestamp_s": 309.0}, {"text": "All right, so that is the most basic data type in redis.", "timestamp": "00:05:13,910", "timestamp_s": 313.0}, {"text": "We also have hashes.", "timestamp": "00:05:17,710", "timestamp_s": 317.0}, {"text": "In hashes. It\u0027s the very typical data", "timestamp": "00:05:21,614", "timestamp_s": 321.0}, {"text": "type used for mapping programming language constructs", "timestamp": "00:05:26,316", "timestamp_s": 326.0}, {"text": "like structs or classes objects", "timestamp": "00:05:30,498", "timestamp_s": 330.0}, {"text": "to redis. So in these example, I\u0027m going to use the hmset", "timestamp": "00:05:34,114", "timestamp_s": 334.0}, {"text": "command, which sets multiple values on a hash,", "timestamp": "00:05:38,322", "timestamp_s": 338.0}, {"text": "and I\u0027m going to use the actor one key.", "timestamp": "00:05:41,810", "timestamp_s": 341.0}, {"text": "So I\u0027m going to override the key that we had in there, and I\u0027m going", "timestamp": "00:05:45,392", "timestamp_s": 345.0}, {"text": "to pass a name value pairs for an actor.", "timestamp": "00:05:48,384", "timestamp_s": 348.0}, {"text": "And in this case, I\u0027m passing the name Anthony Mackey.", "timestamp": "00:05:52,442", "timestamp_s": 352.0}, {"text": "Year of birth, 1978. Place of birth, New Orleans, New Orleans,", "timestamp": "00:05:56,202", "timestamp_s": 356.0}, {"text": "USA. All right, so I can now check my keys again,", "timestamp": "00:06:00,186", "timestamp_s": 360.0}, {"text": "and I can do an h get all. So give me all the name value", "timestamp": "00:06:05,030", "timestamp_s": 365.0}, {"text": "pairs from a hash actor one,", "timestamp": "00:06:09,240", "timestamp_s": 369.0}, {"text": "and you can see that I gave my name value pairs", "timestamp": "00:06:13,752", "timestamp_s": 373.0}, {"text": "back out.", "timestamp": "00:06:17,250", "timestamp_s": 377.0}, {"text": "Hashes are kind of the workhorse of Redis. So, for example,", "timestamp": "00:06:21,930", "timestamp_s": 381.0}, {"text": "I can say h", "timestamp": "00:06:25,580", "timestamp_s": 385.0}, {"text": "exists,", "timestamp": "00:06:30,000", "timestamp_s": 390.0}, {"text": "actor one, and pass", "timestamp": "00:06:35,150", "timestamp_s": 395.0}, {"text": "the string character, and it will tell me whether", "timestamp": "00:06:38,768", "timestamp_s": 398.0}, {"text": "that hash has been set, that value has", "timestamp": "00:06:42,580", "timestamp_s": 402.0}, {"text": "been set in that hash. So, for example, now let\u0027s go ahead", "timestamp": "00:06:45,748", "timestamp_s": 405.0}, {"text": "and set that individual value. So I\u0027m doing", "timestamp": "00:06:49,028", "timestamp_s": 409.0}, {"text": "a hn set actor one, passing the character", "timestamp": "00:06:52,772", "timestamp_s": 412.0}, {"text": "key and the falcon value or falcon as the value.", "timestamp": "00:06:56,958", "timestamp_s": 416.0}, {"text": "And now if I check again for existence of that flag,", "timestamp": "00:07:00,952", "timestamp_s": 420.0}, {"text": "of that field, you can see that I get a one instead of a zero.", "timestamp": "00:07:04,686", "timestamp_s": 424.0}, {"text": "And once again, I can do an h get", "timestamp": "00:07:08,170", "timestamp_s": 428.0}, {"text": "all for that key, and I get all my values back.", "timestamp": "00:07:12,636", "timestamp_s": 432.0}, {"text": "So knowing those two specific", "timestamp": "00:07:15,820", "timestamp_s": 435.0}, {"text": "data types, it\u0027s all we need for our purposes today.", "timestamp": "00:07:19,488", "timestamp_s": 439.0}, {"text": "Okay, so let\u0027s talk about the redis modules API. And the", "timestamp": "00:07:26,190", "timestamp_s": 446.0}, {"text": "Redis modules API allows you to extend the functionality of redis", "timestamp": "00:07:29,728", "timestamp_s": 449.0}, {"text": "by adding new data type or adding new commands.", "timestamp": "00:07:33,370", "timestamp_s": 453.0}, {"text": "Until recently, the Redis modules API was only available to", "timestamp": "00:07:37,250", "timestamp_s": 457.0}, {"text": "c programmers. But luckily for us, in the", "timestamp": "00:07:40,948", "timestamp_s": 460.0}, {"text": "last couple of years, Redis has been developing a Redis modules API", "timestamp": "00:07:44,248", "timestamp_s": 464.0}, {"text": "bridge in rust. And why rust?", "timestamp": "00:07:48,286", "timestamp_s": 468.0}, {"text": "Because it shares the philosophy of extreme", "timestamp": "00:07:52,670", "timestamp_s": 472.0}, {"text": "carefulness in memory management and performance.", "timestamp": "00:07:56,994", "timestamp_s": 476.0}, {"text": "Redis modules run in the same memory space as Redis. Therefore, any memory", "timestamp": "00:08:00,802", "timestamp_s": 480.0}, {"text": "leak can compromise the health of these redis server and create a", "timestamp": "00:08:04,866", "timestamp_s": 484.0}, {"text": "catastrophic condition for the server. So safe memory", "timestamp": "00:08:08,208", "timestamp_s": 488.0}, {"text": "management, it\u0027s a must. In Redis modules,", "timestamp": "00:08:11,382", "timestamp_s": 491.0}, {"text": "there is a rust crate that wraps our", "timestamp": "00:08:15,470", "timestamp_s": 495.0}, {"text": "Redis modules API bridge, and you can find that", "timestamp": "00:08:19,248", "timestamp_s": 499.0}, {"text": "on crates IO. And we\u0027re going to be using that today to build", "timestamp": "00:08:22,788", "timestamp_s": 502.0}, {"text": "our demo. We\u0027re going to create", "timestamp": "00:08:26,116", "timestamp_s": 506.0}, {"text": "a finite state machine as a Redis module that\u0027s", "timestamp": "00:08:29,620", "timestamp_s": 509.0}, {"text": "going to be in charge of managing state in Redis hashes,", "timestamp": "00:08:32,874", "timestamp_s": 512.0}, {"text": "and we\u0027re going to name it Redis FSM, and we\u0027re going to use the", "timestamp": "00:08:36,390", "timestamp_s": 516.0}, {"text": "Redis modules crate that we shown previously.", "timestamp": "00:08:40,264", "timestamp_s": 520.0}, {"text": "So these finite state machine, it\u0027s an entity that models and", "timestamp": "00:08:45,590", "timestamp_s": 525.0}, {"text": "controls behavior for an entity. So we define a set of possible", "timestamp": "00:08:49,308", "timestamp_s": 529.0}, {"text": "states, the transitions between those states and the events", "timestamp": "00:08:52,764", "timestamp_s": 532.0}, {"text": "that trigger those transitions. And why", "timestamp": "00:08:55,938", "timestamp_s": 535.0}, {"text": "are we targeting redis hashes? Because redis hashes are typically", "timestamp": "00:08:59,552", "timestamp_s": 539.0}, {"text": "used to map objects from a programming language into redis", "timestamp": "00:09:03,126", "timestamp_s": 543.0}, {"text": "if you\u0027re using redis for persistence. So our redis", "timestamp": "00:09:06,998", "timestamp_s": 546.0}, {"text": "FSM module will store a generic FSM definition that we", "timestamp": "00:09:10,378", "timestamp_s": 550.0}, {"text": "would initially create as JSON, and these stored as", "timestamp": "00:09:13,828", "timestamp_s": 553.0}, {"text": "a specific redis data type,", "timestamp": "00:09:17,540", "timestamp_s": 557.0}, {"text": "the definition will contain the set of states which", "timestamp": "00:09:20,930", "timestamp_s": 560.0}, {"text": "type of hashes it applies to by their prefix,", "timestamp": "00:09:25,096", "timestamp_s": 565.0}, {"text": "the name of the field that will be used to persist the", "timestamp": "00:09:29,150", "timestamp_s": 569.0}, {"text": "state into the hashes and the possible transitions and events.", "timestamp": "00:09:32,552", "timestamp_s": 572.0}, {"text": "So imagine this simple state machine. We\u0027re going to be using the same", "timestamp": "00:09:38,330", "timestamp_s": 578.0}, {"text": "one during the demos, we have three states,", "timestamp": "00:09:41,852", "timestamp_s": 581.0}, {"text": "sleeping, running and cleaning. And notice that the events in green", "timestamp": "00:09:45,340", "timestamp_s": 585.0}, {"text": "allow you to transition from a state to another. So for", "timestamp": "00:09:49,292", "timestamp_s": 589.0}, {"text": "example, from sleeping to running, the run event triggers that transition.", "timestamp": "00:09:52,528", "timestamp_s": 592.0}, {"text": "From running back to sleeping, the sleep event triggers a transition", "timestamp": "00:09:56,486", "timestamp_s": 596.0}, {"text": "from cleaning to sleeping. The sleep event also triggers a transition,", "timestamp": "00:10:00,102", "timestamp_s": 600.0}, {"text": "and from running to cleaning, the clean event triggers that transition.", "timestamp": "00:10:03,482", "timestamp_s": 603.0}, {"text": "So here is a bigger picture of the", "timestamp": "00:10:07,434", "timestamp_s": 607.0}, {"text": "scheme that we\u0027re setting up in here. So we have a definition of a", "timestamp": "00:10:11,028", "timestamp_s": 611.0}, {"text": "state machine on the top left corner,", "timestamp": "00:10:14,872", "timestamp_s": 614.0}, {"text": "which we\u0027re going to represent as JSON. That JSON", "timestamp": "00:10:18,462", "timestamp_s": 618.0}, {"text": "is going to be turned into a binary redis", "timestamp": "00:10:22,158", "timestamp_s": 622.0}, {"text": "type that\u0027s going to be stored by the module in Redis. And we\u0027re", "timestamp": "00:10:26,242", "timestamp_s": 626.0}, {"text": "going to have two commands on the left,", "timestamp": "00:10:30,114", "timestamp_s": 630.0}, {"text": "FSM create to create our finite state machine data", "timestamp": "00:10:33,290", "timestamp_s": 633.0}, {"text": "type in redis and a FSM info to read it", "timestamp": "00:10:37,872", "timestamp_s": 637.0}, {"text": "back as JSON again. Then we\u0027re going to have", "timestamp": "00:10:41,888", "timestamp_s": 641.0}, {"text": "two commands to basically do most of the interaction with", "timestamp": "00:10:46,384", "timestamp_s": 646.0}, {"text": "the state machine and the hashes that the state", "timestamp": "00:10:50,560", "timestamp_s": 650.0}, {"text": "machine applies to. One of them is going to be FSM allowed,", "timestamp": "00:10:53,812", "timestamp_s": 653.0}, {"text": "which is going to interrogate a state machine hash completion,", "timestamp": "00:10:57,338", "timestamp_s": 657.0}, {"text": "whether a specific event can", "timestamp": "00:11:00,906", "timestamp_s": 660.0}, {"text": "be applied to the system and one that actually applies", "timestamp": "00:11:04,008", "timestamp_s": 664.0}, {"text": "the event, which would be FSM trigger and these.", "timestamp": "00:11:07,502", "timestamp_s": 667.0}, {"text": "There will also be an implied event", "timestamp": "00:11:11,016", "timestamp_s": 671.0}, {"text": "transition or initial state setting that", "timestamp": "00:11:15,564", "timestamp_s": 675.0}, {"text": "will be done when a new hash,", "timestamp": "00:11:19,196", "timestamp_s": 679.0}, {"text": "it\u0027s saved in the system into Redis and our module", "timestamp": "00:11:22,466", "timestamp_s": 682.0}, {"text": "is going to detect that the state", "timestamp": "00:11:26,514", "timestamp_s": 686.0}, {"text": "field is not in there and set the initial state", "timestamp": "00:11:30,064", "timestamp_s": 690.0}, {"text": "of the hash. So that way we have the beginning of", "timestamp": "00:11:33,664", "timestamp_s": 693.0}, {"text": "our state machine functionality.", "timestamp": "00:11:37,456", "timestamp_s": 697.0}, {"text": "So in our case of the example on screen, it would be the", "timestamp": "00:11:40,886", "timestamp_s": 700.0}, {"text": "sleeping state. So if a hash is saved to the system and the sleeping", "timestamp": "00:11:44,432", "timestamp_s": 704.0}, {"text": "state is not set, or the state field is not set, then we set it", "timestamp": "00:11:48,522", "timestamp_s": 708.0}, {"text": "to sleeping. And here\u0027s the JSON document", "timestamp": "00:11:52,148", "timestamp_s": 712.0}, {"text": "for our sample FSM definition.", "timestamp": "00:11:55,822", "timestamp_s": 715.0}, {"text": "All right, so we\u0027re going to kick off our demo by creating a new library", "timestamp": "00:11:59,990", "timestamp_s": 719.0}, {"text": "using the cargo new command. We\u0027re going to pass the lib", "timestamp": "00:12:04,030", "timestamp_s": 724.0}, {"text": "flag. I\u0027m going to name my library Redis", "timestamp": "00:12:07,842", "timestamp_s": 727.0}, {"text": "FSM for redis finite state machine,", "timestamp": "00:12:12,082", "timestamp_s": 732.0}, {"text": "and I\u0027m going to put it in a folder called redis FSM", "timestamp": "00:12:15,938", "timestamp_s": 735.0}, {"text": "all in camel case. As you can", "timestamp": "00:12:20,134", "timestamp_s": 740.0}, {"text": "see, we have the output of the library being created", "timestamp": "00:12:23,632", "timestamp_s": 743.0}, {"text": "and let\u0027s CD to that folder and", "timestamp": "00:12:28,214", "timestamp_s": 748.0}, {"text": "use these tree command to quickly inspect what we have. So we have a cargo", "timestamp": "00:12:33,296", "timestamp_s": 753.0}, {"text": "tomo file and we have a lib rs file.", "timestamp": "00:12:36,682", "timestamp_s": 756.0}, {"text": "Let\u0027s quickly take a look at those. I\u0027m going to inspect", "timestamp": "00:12:40,778", "timestamp_s": 760.0}, {"text": "the cargo tumble and we just have our package declaration for redis", "timestamp": "00:12:45,742", "timestamp_s": 765.0}, {"text": "FSM. And let\u0027s do the same thing", "timestamp": "00:12:49,246", "timestamp_s": 769.0}, {"text": "with the library file.", "timestamp": "00:12:52,632", "timestamp_s": 772.0}, {"text": "And in that one we have", "timestamp": "00:12:55,874", "timestamp_s": 775.0}, {"text": "a simple function to tdd two unsigned integers.", "timestamp": "00:12:59,372", "timestamp_s": 779.0}, {"text": "And we have a simple test and we\u0027re going to get rid of that.", "timestamp": "00:13:03,570", "timestamp_s": 783.0}, {"text": "But that\u0027s a good skeleton to get started.", "timestamp": "00:13:07,196", "timestamp_s": 787.0}, {"text": "All right, so with our newly created library loaded in the code editor,", "timestamp": "00:13:16,320", "timestamp_s": 796.0}, {"text": "we\u0027re going to open the cargo tumble which I already have open in", "timestamp": "00:13:20,328", "timestamp_s": 800.0}, {"text": "here, and we\u0027re going to add the", "timestamp": "00:13:23,878", "timestamp_s": 803.0}, {"text": "dependencies for these redis module toolkit.", "timestamp": "00:13:27,318", "timestamp_s": 807.0}, {"text": "We are also going to", "timestamp": "00:13:30,660", "timestamp_s": 810.0}, {"text": "set the crate type to cdylib so we can", "timestamp": "00:13:34,086", "timestamp_s": 814.0}, {"text": "create a dynamic system library to be loaded in red", "timestamp": "00:13:37,722", "timestamp_s": 817.0}, {"text": "FSM module.", "timestamp": "00:13:41,402", "timestamp_s": 821.0}, {"text": "First we\u0027ll tackle the FSM create command.", "timestamp": "00:13:45,800", "timestamp_s": 825.0}, {"text": "I\u0027m going to open the rust code in lib rs.", "timestamp": "00:13:49,580", "timestamp_s": 829.0}, {"text": "And in there you can see that I already have the", "timestamp": "00:13:54,060", "timestamp_s": 834.0}, {"text": "external create redis module being", "timestamp": "00:13:58,860", "timestamp_s": 838.0}, {"text": "used. And we\u0027re going to", "timestamp": "00:14:02,626", "timestamp_s": 842.0}, {"text": "import from redis module a few structs,", "timestamp": "00:14:06,722", "timestamp_s": 846.0}, {"text": "enums and types that we\u0027re going to be using down", "timestamp": "00:14:11,760", "timestamp_s": 851.0}, {"text": "in the code. And our first skeleton", "timestamp": "00:14:14,982", "timestamp_s": 854.0}, {"text": "code is going to be a function called FsN create. And this is going", "timestamp": "00:14:19,292", "timestamp_s": 859.0}, {"text": "to be the function that backs up the", "timestamp": "00:14:22,918", "timestamp_s": 862.0}, {"text": "FSM create command that we will be creating.", "timestamp": "00:14:27,446", "timestamp_s": 867.0}, {"text": "And as you can see, it takes a context. The context", "timestamp": "00:14:30,672", "timestamp_s": 870.0}, {"text": "is going to be a redis context. It\u0027s going to be passed to", "timestamp": "00:14:34,432", "timestamp_s": 874.0}, {"text": "us by the modules API.", "timestamp": "00:14:38,110", "timestamp_s": 878.0}, {"text": "And then we get a vector of arguments which are packaged", "timestamp": "00:14:42,164", "timestamp_s": 882.0}, {"text": "as redis strings in the Ards", "timestamp": "00:14:46,468", "timestamp_s": 886.0}, {"text": "argument. And each one of our module methods", "timestamp": "00:14:49,668", "timestamp_s": 889.0}, {"text": "or our module functions returns a redis result.", "timestamp": "00:14:54,088", "timestamp_s": 894.0}, {"text": "So inside of this we\u0027re going to skip", "timestamp": "00:14:59,280", "timestamp_s": 899.0}, {"text": "the first argument. The FST argument is going to always be the command itself.", "timestamp": "00:15:03,928", "timestamp_s": 903.0}, {"text": "So we want to ignore that. And we\u0027re going", "timestamp": "00:15:07,830", "timestamp_s": 907.0}, {"text": "to grab the length of the arguments in here just to do a quick check.", "timestamp": "00:15:11,814", "timestamp_s": 911.0}, {"text": "So it\u0027s, if the arguments arity", "timestamp": "00:15:15,782", "timestamp_s": 915.0}, {"text": "it\u0027s greater than what you\u0027re expecting, you throw", "timestamp": "00:15:19,500", "timestamp_s": 919.0}, {"text": "a redis error these I\u0027m going to", "timestamp": "00:15:22,832", "timestamp_s": 922.0}, {"text": "grab the actual argument", "timestamp": "00:15:26,266", "timestamp_s": 926.0}, {"text": "that\u0027s being passed and I\u0027m going to call that source src.", "timestamp": "00:15:29,968", "timestamp_s": 929.0}, {"text": "And I\u0027m doing that by using the intro iter. And then", "timestamp": "00:15:33,060", "timestamp_s": 933.0}, {"text": "I\u0027m going to use the next string which is going to return a string", "timestamp": "00:15:37,022", "timestamp_s": 937.0}, {"text": "object. Next I\u0027m going", "timestamp": "00:15:40,952", "timestamp_s": 940.0}, {"text": "to take that source and I\u0027m going to format it", "timestamp": "00:15:44,546", "timestamp_s": 944.0}, {"text": "in a string with the format macro", "timestamp": "00:15:48,098", "timestamp_s": 948.0}, {"text": "and I\u0027m going to call that greet. So this is going to be our hello", "timestamp": "00:15:52,080", "timestamp_s": 952.0}, {"text": "world example. So we\u0027re going to do this in the skeleton", "timestamp": "00:15:55,442", "timestamp_s": 955.0}, {"text": "of this function so we can see how things work. And then we\u0027ll get", "timestamp": "00:15:58,908", "timestamp_s": 958.0}, {"text": "into the more meaty stuff. All right,", "timestamp": "00:16:02,358", "timestamp_s": 962.0}, {"text": "so now I\u0027m going to create a response, and my response is going to be", "timestamp": "00:16:05,642", "timestamp_s": 965.0}, {"text": "a vector from that greet string.", "timestamp": "00:16:09,386", "timestamp_s": 969.0}, {"text": "And then we\u0027re going to wrap that whole thing into an okay.", "timestamp": "00:16:15,000", "timestamp_s": 975.0}, {"text": "So we\u0027re going to be using the redis underscore module", "timestamp": "00:16:19,660", "timestamp_s": 979.0}, {"text": "macro, which is going to be the block of code that\u0027s going to basically", "timestamp": "00:16:23,796", "timestamp_s": 983.0}, {"text": "declare the module to redis.", "timestamp": "00:16:27,854", "timestamp_s": 987.0}, {"text": "So inside of that we\u0027re going to have the name of our module, which is", "timestamp": "00:16:33,180", "timestamp_s": 993.0}, {"text": "going to be FSM for finite state machine,", "timestamp": "00:16:36,034", "timestamp_s": 996.0}, {"text": "and these we\u0027re going to give it a version of one.", "timestamp": "00:16:40,080", "timestamp_s": 1000.0}, {"text": "Right now we have no data types, so we have a block for our commands.", "timestamp": "00:16:43,860", "timestamp_s": 1003.0}, {"text": "And inside of that we\u0027re going to add our FSm create", "timestamp": "00:16:49,140", "timestamp_s": 1009.0}, {"text": "command. So notice that the name in", "timestamp": "00:16:52,566", "timestamp_s": 1012.0}, {"text": "the string, the first element in here, FSm create,", "timestamp": "00:16:56,182", "timestamp_s": 1016.0}, {"text": "is going to be the actual command that you type in the redis Cli or", "timestamp": "00:17:00,250", "timestamp_s": 1020.0}, {"text": "that you send with a redis client, and then it\u0027s going to be", "timestamp": "00:17:03,898", "timestamp_s": 1023.0}, {"text": "backed by our FSM underscore create function", "timestamp": "00:17:07,678", "timestamp_s": 1027.0}, {"text": "above. All right, so now that we have a", "timestamp": "00:17:11,294", "timestamp_s": 1031.0}, {"text": "basic hello world implementation inside of our", "timestamp": "00:17:15,166", "timestamp_s": 1035.0}, {"text": "FSM create command,", "timestamp": "00:17:18,526", "timestamp_s": 1038.0}, {"text": "let\u0027s start the redis server and load", "timestamp": "00:17:21,416", "timestamp_s": 1041.0}, {"text": "our newly created module. So before we do that,", "timestamp": "00:17:25,240", "timestamp_s": 1045.0}, {"text": "we need to compile the module. So I\u0027m going to do a cargo", "timestamp": "00:17:28,386", "timestamp_s": 1048.0}, {"text": "build. And now", "timestamp": "00:17:32,408", "timestamp_s": 1052.0}, {"text": "we have the module has been compiled.", "timestamp": "00:17:36,102", "timestamp_s": 1056.0}, {"text": "It will be under the target debug", "timestamp": "00:17:39,860", "timestamp_s": 1059.0}, {"text": "folder, and you can see there that we have", "timestamp": "00:17:45,160", "timestamp_s": 1065.0}, {"text": "the lib redis underscore FSm dylib", "timestamp": "00:17:48,714", "timestamp_s": 1068.0}, {"text": "file. So now to load that intro our", "timestamp": "00:17:54,320", "timestamp_s": 1074.0}, {"text": "redis server, I\u0027m going to invoke the redis server command", "timestamp": "00:17:57,742", "timestamp_s": 1077.0}, {"text": "again. And this time I\u0027m going to pass a load module", "timestamp": "00:18:01,332", "timestamp_s": 1081.0}, {"text": "flag in these", "timestamp": "00:18:04,788", "timestamp_s": 1084.0}, {"text": "lib redis fsm file.", "timestamp": "00:18:08,654", "timestamp_s": 1088.0}, {"text": "So target debug lib", "timestamp": "00:18:11,496", "timestamp_s": 1091.0}, {"text": "redis fsm dylib.", "timestamp": "00:18:15,128", "timestamp_s": 1095.0}, {"text": "All right, so now we have the redis server running,", "timestamp": "00:18:19,200", "timestamp_s": 1099.0}, {"text": "and as you can see on the output, we have", "timestamp": "00:18:23,350", "timestamp_s": 1103.0}, {"text": "loaded the FSm module from the Dylib", "timestamp": "00:18:26,422", "timestamp_s": 1106.0}, {"text": "file. All right, so now with that in place,", "timestamp": "00:18:30,108", "timestamp_s": 1110.0}, {"text": "let\u0027s launch the redis Cli.", "timestamp": "00:18:34,100", "timestamp_s": 1114.0}, {"text": "And in the Redis Cli, one of the things we can do to verify to", "timestamp": "00:18:37,700", "timestamp_s": 1117.0}, {"text": "you that the module has been loaded is to do a module", "timestamp": "00:18:40,938", "timestamp_s": 1120.0}, {"text": "list. And you can see that we have", "timestamp": "00:18:44,848", "timestamp_s": 1124.0}, {"text": "only one module loaded in this instance of redis,", "timestamp": "00:18:48,206", "timestamp_s": 1128.0}, {"text": "mainly the FSM module that we just created.", "timestamp": "00:18:52,540", "timestamp_s": 1132.0}, {"text": "Right, and the redis cli kind of autocompletes commands.", "timestamp": "00:18:56,260", "timestamp_s": 1136.0}, {"text": "So if we do FSM,", "timestamp": "00:19:00,664", "timestamp_s": 1140.0}, {"text": "the only command loaded right now is FSm create and", "timestamp": "00:19:03,840", "timestamp_s": 1143.0}, {"text": "we can pass a string to it.", "timestamp": "00:19:07,682", "timestamp_s": 1147.0}, {"text": "And as you can see, we get the hello back.", "timestamp": "00:19:12,240", "timestamp_s": 1152.0}, {"text": "Notice that the emoji that we", "timestamp": "00:19:16,500", "timestamp_s": 1156.0}, {"text": "had in the code, it\u0027s actually encoded in the string.", "timestamp": "00:19:19,798", "timestamp_s": 1159.0}, {"text": "So I kind of wanted to show you that Redis", "timestamp": "00:19:23,292", "timestamp_s": 1163.0}, {"text": "basically stores everything in raw", "timestamp": "00:19:26,480", "timestamp_s": 1166.0}, {"text": "format. So now we see that we have a working command.", "timestamp": "00:19:30,448", "timestamp_s": 1170.0}, {"text": "Very simple command, doesn\u0027t do anything. Now let\u0027s go back", "timestamp": "00:19:34,528", "timestamp_s": 1174.0}, {"text": "and flesh it out.", "timestamp": "00:19:38,478", "timestamp_s": 1178.0}, {"text": "So the first thing I\u0027m going to do is bring in", "timestamp": "00:19:43,460", "timestamp_s": 1183.0}, {"text": "the inserted JSON dependencies because we\u0027re", "timestamp": "00:19:47,062", "timestamp_s": 1187.0}, {"text": "going to be using JSon. And now back", "timestamp": "00:19:50,940", "timestamp_s": 1190.0}, {"text": "to the code. The first thing we\u0027re going to do is add", "timestamp": "00:19:54,666", "timestamp_s": 1194.0}, {"text": "a state machine struct.", "timestamp": "00:19:58,426", "timestamp_s": 1198.0}, {"text": "And as you can see here, I have a state machine", "timestamp": "00:20:01,720", "timestamp_s": 1201.0}, {"text": "that has a name, a prefix,", "timestamp": "00:20:05,892", "timestamp_s": 1205.0}, {"text": "a field, and a set of states.", "timestamp": "00:20:09,260", "timestamp_s": 1209.0}, {"text": "To transition from state to state, we need to have the definition", "timestamp": "00:20:12,382", "timestamp_s": 1212.0}, {"text": "of an event. So I\u0027m going to create a struct that basically represents", "timestamp": "00:20:16,712", "timestamp_s": 1216.0}, {"text": "an event. And the events will have a name and it", "timestamp": "00:20:21,128", "timestamp_s": 1221.0}, {"text": "would have a state that they", "timestamp": "00:20:24,802", "timestamp_s": 1224.0}, {"text": "can transition to and also a collection of", "timestamp": "00:20:28,674", "timestamp_s": 1228.0}, {"text": "state that they can transition from. So we have an event in the", "timestamp": "00:20:32,598", "timestamp_s": 1232.0}, {"text": "state machine. We\u0027re going to add a vector of", "timestamp": "00:20:36,726", "timestamp_s": 1236.0}, {"text": "events.", "timestamp": "00:20:40,358", "timestamp_s": 1240.0}, {"text": "Now that we have our data structures for the state machine,", "timestamp": "00:20:44,040", "timestamp_s": 1244.0}, {"text": "the next thing we\u0027re going to do is", "timestamp": "00:20:48,600", "timestamp_s": 1248.0}, {"text": "add a few definitions that we\u0027re going to use to", "timestamp": "00:20:53,066", "timestamp_s": 1253.0}, {"text": "basically manage the registration of our", "timestamp": "00:20:56,702", "timestamp_s": 1256.0}, {"text": "state machine data type. Okay, so let", "timestamp": "00:21:00,302", "timestamp_s": 1260.0}, {"text": "me show you what we have in here. The first one, it\u0027s this redis", "timestamp": "00:21:04,078", "timestamp_s": 1264.0}, {"text": "FSM type name. That\u0027s going to be the name of the type in", "timestamp": "00:21:08,020", "timestamp_s": 1268.0}, {"text": "redis. And that has to be 123-45-6789", "timestamp": "00:21:11,298", "timestamp_s": 1271.0}, {"text": "characters. Specifically, it\u0027s one of the requirements of a", "timestamp": "00:21:16,610", "timestamp_s": 1276.0}, {"text": "redis data type that has to be exactly nine characters.", "timestamp": "00:21:20,678", "timestamp_s": 1280.0}, {"text": "So we\u0027re calling ours Redis FSM", "timestamp": "00:21:23,900", "timestamp_s": 1283.0}, {"text": "the version of our data type. It\u0027s version number", "timestamp": "00:21:27,564", "timestamp_s": 1287.0}, {"text": "one. You can basically have multiple versions. And then", "timestamp": "00:21:31,242", "timestamp_s": 1291.0}, {"text": "in your code you would basically have to manage backwards compatibility", "timestamp": "00:21:35,226", "timestamp_s": 1295.0}, {"text": "with older versions of your data types.", "timestamp": "00:21:39,680", "timestamp_s": 1299.0}, {"text": "If you choose to do so, then the", "timestamp": "00:21:43,500", "timestamp_s": 1303.0}, {"text": "actual type will be created under these redis", "timestamp": "00:21:47,342", "timestamp_s": 1307.0}, {"text": "FSM type. And then this is a redis type. You notice here", "timestamp": "00:21:51,316", "timestamp_s": 1311.0}, {"text": "we\u0027re invoking the new function and it", "timestamp": "00:21:55,118", "timestamp_s": 1315.0}, {"text": "takes the type name and the version and then", "timestamp": "00:21:59,202", "timestamp_s": 1319.0}, {"text": "a set of methods that", "timestamp": "00:22:02,898", "timestamp_s": 1322.0}, {"text": "basically initialize or", "timestamp": "00:22:06,306", "timestamp_s": 1326.0}, {"text": "manage how these data type lifecycle it\u0027s", "timestamp": "00:22:10,422", "timestamp_s": 1330.0}, {"text": "handled by Redis. So now we\u0027re", "timestamp": "00:22:14,092", "timestamp_s": 1334.0}, {"text": "going to make some modifications to our FSM", "timestamp": "00:22:17,948", "timestamp_s": 1337.0}, {"text": "create. And the first thing that", "timestamp": "00:22:22,732", "timestamp_s": 1342.0}, {"text": "I\u0027m doing in here is that I\u0027ve added this line right here", "timestamp": "00:22:26,202", "timestamp_s": 1346.0}, {"text": "that creates a variable called Redis key,", "timestamp": "00:22:30,600", "timestamp_s": 1350.0}, {"text": "which it\u0027s actually grabbing the context. Notice that I brought these", "timestamp": "00:22:34,462", "timestamp_s": 1354.0}, {"text": "context variable back into scope,", "timestamp": "00:22:38,542", "timestamp_s": 1358.0}, {"text": "and that context provides an open", "timestamp": "00:22:41,444", "timestamp_s": 1361.0}, {"text": "keywritable method. And that method", "timestamp": "00:22:45,214", "timestamp_s": 1365.0}, {"text": "basically takes a key definition, a redis key,", "timestamp": "00:22:49,464", "timestamp_s": 1369.0}, {"text": "and it\u0027s going to basically give us a slot in", "timestamp": "00:22:53,250", "timestamp_s": 1373.0}, {"text": "Redis to write something to it. So these, once we", "timestamp": "00:22:56,866", "timestamp_s": 1376.0}, {"text": "have that, we\u0027re going to create", "timestamp": "00:23:00,278", "timestamp_s": 1380.0}, {"text": "some JSON representation, a certain representation of", "timestamp": "00:23:03,974", "timestamp_s": 1383.0}, {"text": "our state machine. So notice that we have a JSON document here that", "timestamp": "00:23:08,118", "timestamp_s": 1388.0}, {"text": "has the main prefix field, the state for", "timestamp": "00:23:11,782", "timestamp_s": 1391.0}, {"text": "our state machine and definition of events. In this case,", "timestamp": "00:23:15,418", "timestamp_s": 1395.0}, {"text": "we have that simple state machine that we shown in the slides before,", "timestamp": "00:23:19,386", "timestamp_s": 1399.0}, {"text": "which has three states sleeping, running and cleaning. And it", "timestamp": "00:23:23,500", "timestamp_s": 1403.0}, {"text": "has three events,", "timestamp": "00:23:27,262", "timestamp_s": 1407.0}, {"text": "run, clean and sleep.", "timestamp": "00:23:29,652", "timestamp_s": 1409.0}, {"text": "And remember, run can transition from sleeping", "timestamp": "00:23:32,532", "timestamp_s": 1412.0}, {"text": "to running, clean from running to cleaning,", "timestamp": "00:23:36,264", "timestamp_s": 1416.0}, {"text": "and sleep from either running or cleaning to sleeping.", "timestamp": "00:23:40,960", "timestamp_s": 1420.0}, {"text": "And notice that I\u0027m using the JSON macro from Certe", "timestamp": "00:23:45,600", "timestamp_s": 1425.0}, {"text": "to basically create a JSON object.", "timestamp": "00:23:49,836", "timestamp_s": 1429.0}, {"text": "And then once we have our JSON object,", "timestamp": "00:23:55,220", "timestamp_s": 1435.0}, {"text": "we\u0027re going to serialize, we\u0027re going to create", "timestamp": "00:23:58,580", "timestamp_s": 1438.0}, {"text": "a state machine from that JSON object. So notice in", "timestamp": "00:24:02,106", "timestamp_s": 1442.0}, {"text": "here I\u0027m using the asserted from the string of", "timestamp": "00:24:05,674", "timestamp_s": 1445.0}, {"text": "the JSON that we created, and that is going to give", "timestamp": "00:24:09,978", "timestamp_s": 1449.0}, {"text": "me an instance of our state machine strut.", "timestamp": "00:24:13,658", "timestamp_s": 1453.0}, {"text": "So next, once we have a state machine object, we\u0027re going", "timestamp": "00:24:20,410", "timestamp_s": 1460.0}, {"text": "to use that redis key to write that value to the redis key,", "timestamp": "00:24:23,564", "timestamp_s": 1463.0}, {"text": "passing the specific type that we\u0027re writing, which is our redis", "timestamp": "00:24:28,670", "timestamp_s": 1468.0}, {"text": "FSM type, which we declared up here in", "timestamp": "00:24:32,278", "timestamp_s": 1472.0}, {"text": "that redis type block.", "timestamp": "00:24:37,870", "timestamp_s": 1477.0}, {"text": "Okay, so we wrote the key to Redis,", "timestamp": "00:24:44,760", "timestamp_s": 1484.0}, {"text": "and now we\u0027re going to get rid of that hello world part of the example,", "timestamp": "00:24:48,060", "timestamp_s": 1488.0}, {"text": "and we\u0027re going to return a boolean", "timestamp": "00:24:52,220", "timestamp_s": 1492.0}, {"text": "as an integer. True, if we were successful", "timestamp": "00:24:55,492", "timestamp_s": 1495.0}, {"text": "at writing that redis value to redis,", "timestamp": "00:24:59,320", "timestamp_s": 1499.0}, {"text": "that key value, the actual serialization of our state machine,", "timestamp": "00:25:03,760", "timestamp_s": 1503.0}, {"text": "and false otherwise. So that gives us now", "timestamp": "00:25:07,432", "timestamp_s": 1507.0}, {"text": "the ability to write our custom", "timestamp": "00:25:11,046", "timestamp_s": 1511.0}, {"text": "data type to redis.", "timestamp": "00:25:14,550", "timestamp_s": 1514.0}, {"text": "We also need to add the redis type to", "timestamp": "00:25:21,720", "timestamp_s": 1521.0}, {"text": "the module declaration.", "timestamp": "00:25:25,018", "timestamp_s": 1525.0}, {"text": "So noticing here that under the data types vector,", "timestamp": "00:25:27,880", "timestamp_s": 1527.0}, {"text": "I added the redis FSM type.", "timestamp": "00:25:32,880", "timestamp_s": 1532.0}, {"text": "And now that the FSM create", "timestamp": "00:25:38,040", "timestamp_s": 1538.0}, {"text": "its write into redis, we actually mark it with the", "timestamp": "00:25:42,218", "timestamp_s": 1542.0}, {"text": "modifier write, telling us that", "timestamp": "00:25:46,800", "timestamp_s": 1546.0}, {"text": "this commands writes to the database. And the", "timestamp": "00:25:50,050", "timestamp_s": 1550.0}, {"text": "three ones at the end in here represent the", "timestamp": "00:25:54,898", "timestamp_s": 1554.0}, {"text": "index of the first key, the key step,", "timestamp": "00:25:58,802", "timestamp_s": 1558.0}, {"text": "and the index of the last key. So since we only have one", "timestamp": "00:26:01,894", "timestamp_s": 1561.0}, {"text": "parameter, the main key, one key, actually we", "timestamp": "00:26:05,846", "timestamp_s": 1565.0}, {"text": "have one across the board.", "timestamp": "00:26:09,782", "timestamp_s": 1569.0}, {"text": "Now we will build the FSM info command.", "timestamp": "00:26:14,280", "timestamp_s": 1574.0}, {"text": "Okay, so now that we have a method that can write our custom data", "timestamp": "00:26:20,120", "timestamp_s": 1580.0}, {"text": "type to redis, we should probably add a method to read it back.", "timestamp": "00:26:24,026", "timestamp_s": 1584.0}, {"text": "So for that we\u0027re going to implement the FSM intro", "timestamp": "00:26:27,966", "timestamp_s": 1587.0}, {"text": "method, and the first thing I\u0027m going to do is just", "timestamp": "00:26:31,188", "timestamp_s": 1591.0}, {"text": "add a skeleton for it. Just like the FSM", "timestamp": "00:26:34,622", "timestamp_s": 1594.0}, {"text": "create method, our FSM intro again takes a context", "timestamp": "00:26:38,216", "timestamp_s": 1598.0}, {"text": "instead of redis arguments, these redis strings and", "timestamp": "00:26:42,376", "timestamp_s": 1602.0}, {"text": "returns a result. We\u0027re starting with just a result,", "timestamp": "00:26:46,082", "timestamp_s": 1606.0}, {"text": "okay, with a null value, and now we\u0027re", "timestamp": "00:26:49,910", "timestamp_s": 1609.0}, {"text": "going to grab the arguments like we did before, and we\u0027re grabbing", "timestamp": "00:26:53,548", "timestamp_s": 1613.0}, {"text": "what\u0027s supposed to be the key as the", "timestamp": "00:26:57,940", "timestamp_s": 1617.0}, {"text": "first argument after the method name.", "timestamp": "00:27:01,658", "timestamp_s": 1621.0}, {"text": "And these we\u0027re going to again create", "timestamp": "00:27:05,400", "timestamp_s": 1625.0}, {"text": "a key. But this time we\u0027re going to open our key", "timestamp": "00:27:08,538", "timestamp_s": 1628.0}, {"text": "similar to what we did in the FSM create.", "timestamp": "00:27:12,840", "timestamp_s": 1632.0}, {"text": "So notice in here first I did a context open", "timestamp": "00:27:16,974", "timestamp_s": 1636.0}, {"text": "key writable, and in the FSM intro,", "timestamp": "00:27:20,526", "timestamp_s": 1640.0}, {"text": "since I\u0027m only reading, I just did a context open key passing", "timestamp": "00:27:24,772", "timestamp_s": 1644.0}, {"text": "that key value.", "timestamp": "00:27:28,248", "timestamp_s": 1648.0}, {"text": "Then I\u0027m going to bring in the guard crate so I", "timestamp": "00:27:32,800", "timestamp_s": 1652.0}, {"text": "can avoid having to have nested let", "timestamp": "00:27:36,402", "timestamp_s": 1656.0}, {"text": "in my code. So this is going to allow me to write a little bit", "timestamp": "00:27:42,320", "timestamp_s": 1662.0}, {"text": "cleaner code in my opinion. So with that", "timestamp": "00:27:45,702", "timestamp_s": 1665.0}, {"text": "in place, I\u0027m going to create this guard where I\u0027m basically", "timestamp": "00:27:49,078", "timestamp_s": 1669.0}, {"text": "trying to bring the state machine back from the JSON that\u0027s stored", "timestamp": "00:27:52,602", "timestamp_s": 1672.0}, {"text": "in the database in redis. So noticing here that", "timestamp": "00:27:56,576", "timestamp_s": 1676.0}, {"text": "I\u0027m doing a guard and then a let.", "timestamp": "00:28:00,506", "timestamp_s": 1680.0}, {"text": "Okay, so there\u0027s going to be the redis response. So I want it to be", "timestamp": "00:28:04,026", "timestamp_s": 1684.0}, {"text": "a successful response that contains some", "timestamp": "00:28:07,358", "timestamp_s": 1687.0}, {"text": "object of type call FSM that I\u0027m", "timestamp": "00:28:11,086", "timestamp_s": 1691.0}, {"text": "going to name FSM. And I get that from reading", "timestamp": "00:28:14,814", "timestamp_s": 1694.0}, {"text": "the value, casting it to a state machine using my", "timestamp": "00:28:18,324", "timestamp_s": 1698.0}, {"text": "redis FSM type that we declared previously. And if that fails,", "timestamp": "00:28:22,082", "timestamp_s": 1702.0}, {"text": "then I\u0027m just going to return an error with a redis error that", "timestamp": "00:28:26,232", "timestamp_s": 1706.0}, {"text": "contains an error message. These very likely it\u0027s these", "timestamp": "00:28:29,718", "timestamp_s": 1709.0}, {"text": "errors that I couldn\u0027t find the key. Now with that", "timestamp": "00:28:33,542", "timestamp_s": 1713.0}, {"text": "in place, I\u0027m going to use survey", "timestamp": "00:28:37,222", "timestamp_s": 1717.0}, {"text": "again to basically put the JSON back into", "timestamp": "00:28:40,988", "timestamp_s": 1720.0}, {"text": "string form and return that JSON wrapped in", "timestamp": "00:28:44,890", "timestamp_s": 1724.0}, {"text": "a redis value simple string with an", "timestamp": "00:28:48,682", "timestamp_s": 1728.0}, {"text": "okay around it. So with that in place,", "timestamp": "00:28:52,458", "timestamp_s": 1732.0}, {"text": "we need to add the command to our declaration like we did before", "timestamp": "00:29:00,130", "timestamp_s": 1740.0}, {"text": "with the FSm create. So in here I\u0027m going to now add", "timestamp": "00:29:04,420", "timestamp_s": 1744.0}, {"text": "the FSm info. And again we have the FSm intro", "timestamp": "00:29:08,132", "timestamp_s": 1748.0}, {"text": "command being backed by", "timestamp": "00:29:11,786", "timestamp_s": 1751.0}, {"text": "the FSm info function. This one is a read only the", "timestamp": "00:29:15,364", "timestamp_s": 1755.0}, {"text": "other one was a write. And again, since we only have one key and it\u0027s", "timestamp": "00:29:18,744", "timestamp_s": 1758.0}, {"text": "the first key, we have ones across the board here in the", "timestamp": "00:29:21,934", "timestamp_s": 1761.0}, {"text": "definition. And now we can go and test this.", "timestamp": "00:29:25,468", "timestamp_s": 1765.0}, {"text": "Okay, so now that we have our two commands, the FSM create to write", "timestamp": "00:29:30,650", "timestamp_s": 1770.0}, {"text": "the JSON definition of the state machine to redis", "timestamp": "00:29:34,480", "timestamp_s": 1774.0}, {"text": "and these FSm info to read it back.", "timestamp": "00:29:38,438", "timestamp_s": 1778.0}, {"text": "Let\u0027s compile our library", "timestamp": "00:29:41,456", "timestamp_s": 1781.0}, {"text": "again our module, and let\u0027s launch the", "timestamp": "00:29:44,566", "timestamp_s": 1784.0}, {"text": "redis server again, loading our module. All right,", "timestamp": "00:29:48,868", "timestamp_s": 1788.0}, {"text": "and now again, let\u0027s go back to the redis Cli and", "timestamp": "00:29:52,868", "timestamp_s": 1792.0}, {"text": "let\u0027s see what keys we have in the system. Should be empty again.", "timestamp": "00:29:59,336", "timestamp_s": 1799.0}, {"text": "All right, so now we can do an FSM create.", "timestamp": "00:30:03,400", "timestamp_s": 1803.0}, {"text": "And in here I\u0027m going to", "timestamp": "00:30:08,150", "timestamp_s": 1808.0}, {"text": "pass the key is going", "timestamp": "00:30:11,644", "timestamp_s": 1811.0}, {"text": "to be job FSM, which is kind of what we hard coded", "timestamp": "00:30:15,324", "timestamp_s": 1815.0}, {"text": "in the JSOn for now. So if I", "timestamp": "00:30:18,562", "timestamp_s": 1818.0}, {"text": "do that, notice that we get a one back. So that means that something", "timestamp": "00:30:22,172", "timestamp_s": 1822.0}, {"text": "went right.", "timestamp": "00:30:26,000", "timestamp_s": 1826.0}, {"text": "And now I\u0027m going to list the keys", "timestamp": "00:30:28,720", "timestamp_s": 1828.0}, {"text": "again and notice that we have now one key,", "timestamp": "00:30:32,038", "timestamp_s": 1832.0}, {"text": "job FSM. And if I check the type of that key,", "timestamp": "00:30:35,696", "timestamp_s": 1835.0}, {"text": "we get our custom redis data type redis fsm.", "timestamp": "00:30:42,910", "timestamp_s": 1842.0}, {"text": "So now let\u0027s see if our redis command", "timestamp": "00:30:47,382", "timestamp_s": 1847.0}, {"text": "FSm info works correctly so I", "timestamp": "00:30:51,626", "timestamp_s": 1851.0}, {"text": "can pass the key that we just created and we", "timestamp": "00:30:55,588", "timestamp_s": 1855.0}, {"text": "get our XMl back.", "timestamp": "00:30:59,892", "timestamp_s": 1859.0}, {"text": "And the redis cli doesn\u0027t preprint the XML.", "timestamp": "00:31:02,450", "timestamp_s": 1862.0}, {"text": "So you could use Redis insight,", "timestamp": "00:31:06,494", "timestamp_s": 1866.0}, {"text": "for example, if you wanted to basically see a nicely colorized version", "timestamp": "00:31:09,838", "timestamp_s": 1869.0}, {"text": "of the JSON definition. So now", "timestamp": "00:31:14,650", "timestamp_s": 1874.0}, {"text": "we have a data type that implements our finite state machine", "timestamp": "00:31:21,050", "timestamp_s": 1881.0}, {"text": "and we have a command to create it and one to read it back.", "timestamp": "00:31:24,754", "timestamp_s": 1884.0}, {"text": "Okay, so now we have two commands, one that writes some", "timestamp": "00:31:31,470", "timestamp_s": 1891.0}, {"text": "JSON definition of an object and", "timestamp": "00:31:35,088", "timestamp_s": 1895.0}, {"text": "one that reads the definition in our lingua", "timestamp": "00:31:39,040", "timestamp_s": 1899.0}, {"text": "franca to store them. It\u0027s Json. So now what", "timestamp": "00:31:42,154", "timestamp_s": 1902.0}, {"text": "I\u0027m going to do is now refactor that FSM create", "timestamp": "00:31:46,452", "timestamp_s": 1906.0}, {"text": "so we don\u0027t hard code the JSON because we really want to have the flexibility", "timestamp": "00:31:49,860", "timestamp_s": 1909.0}, {"text": "to have multiple state machine", "timestamp": "00:31:53,514", "timestamp_s": 1913.0}, {"text": "definitions there. So the first thing I\u0027m going to do is", "timestamp": "00:31:56,922", "timestamp_s": 1916.0}, {"text": "rather than just reading a key, we\u0027re going to", "timestamp": "00:32:01,384", "timestamp_s": 1921.0}, {"text": "take the JSON. So I rename the first argument being read to FSM,", "timestamp": "00:32:04,504", "timestamp_s": 1924.0}, {"text": "underscore JSON. And then", "timestamp": "00:32:08,322", "timestamp_s": 1928.0}, {"text": "I added this block in here where I\u0027m taking that", "timestamp": "00:32:13,100", "timestamp_s": 1933.0}, {"text": "JSoN, that raw JSon that is being passed from the command.", "timestamp": "00:32:17,212", "timestamp_s": 1937.0}, {"text": "And we\u0027re going to use these third JSON library to", "timestamp": "00:32:20,886", "timestamp_s": 1940.0}, {"text": "read it from a string, the two string of that FSN JSon which", "timestamp": "00:32:24,752", "timestamp_s": 1944.0}, {"text": "is a Redis string, and that\u0027s going to give us our state machine object", "timestamp": "00:32:28,912", "timestamp_s": 1948.0}, {"text": "back, rehydrated. And once", "timestamp": "00:32:32,724", "timestamp_s": 1952.0}, {"text": "again, now these key to write this to Redis", "timestamp": "00:32:36,676", "timestamp_s": 1956.0}, {"text": "is going to be the name property in the JSON. So what I\u0027m doing in", "timestamp": "00:32:40,570", "timestamp_s": 1960.0}, {"text": "here is I\u0027m taking the FSM instance", "timestamp": "00:32:43,928", "timestamp_s": 1963.0}, {"text": "that we just created from the JSON and grabbing the name to", "timestamp": "00:32:47,342", "timestamp_s": 1967.0}, {"text": "basically create our Redis key.", "timestamp": "00:32:51,352", "timestamp_s": 1971.0}, {"text": "Okay, so now we can test our refactor version of", "timestamp": "00:32:55,290", "timestamp_s": 1975.0}, {"text": "the FSM create method. So once again, I\u0027m going", "timestamp": "00:32:59,612", "timestamp_s": 1979.0}, {"text": "to compile our library and I\u0027m going", "timestamp": "00:33:03,372", "timestamp_s": 1983.0}, {"text": "to launch the Reddit server and", "timestamp": "00:33:07,212", "timestamp_s": 1987.0}, {"text": "also run the CLI.", "timestamp": "00:33:12,990", "timestamp_s": 1992.0}, {"text": "And now our FSM create method.", "timestamp": "00:33:17,790", "timestamp_s": 1997.0}, {"text": "Obviously it\u0027s a much more beefy method", "timestamp": "00:33:21,418", "timestamp_s": 2001.0}, {"text": "because now it takes the JSON payload and obviously", "timestamp": "00:33:26,154", "timestamp_s": 2006.0}, {"text": "I have it ready here to copy and paste. Notice that the JSON", "timestamp": "00:33:30,404", "timestamp_s": 2010.0}, {"text": "has to be scaped properly. So all the internal quotes", "timestamp": "00:33:34,158", "timestamp_s": 2014.0}, {"text": "have to be scaped with the backslash.", "timestamp": "00:33:38,526", "timestamp_s": 2018.0}, {"text": "And when you have large payloads to", "timestamp": "00:33:41,830", "timestamp_s": 2021.0}, {"text": "load in the CLI, rather than pasting them into the Cli, you can", "timestamp": "00:33:45,432", "timestamp_s": 2025.0}, {"text": "actually pull these from an external file. But since this is a quick", "timestamp": "00:33:48,988", "timestamp_s": 2028.0}, {"text": "and dirty example, I\u0027m just pasting it on the Cli. And if", "timestamp": "00:33:52,588", "timestamp_s": 2032.0}, {"text": "you have it in a file, you don\u0027t have to do all this escaping maneuvering", "timestamp": "00:33:56,028", "timestamp_s": 2036.0}, {"text": "over here. So I\u0027m going to run my FSM create now with", "timestamp": "00:34:00,102", "timestamp_s": 2040.0}, {"text": "the JSon being passed from the CLi.", "timestamp": "00:34:03,552", "timestamp_s": 2043.0}, {"text": "And again we can check once again", "timestamp": "00:34:07,206", "timestamp_s": 2047.0}, {"text": "that we have our key being created and that", "timestamp": "00:34:10,852", "timestamp_s": 2050.0}, {"text": "we can read it. So now we have a full run trip", "timestamp": "00:34:14,868", "timestamp_s": 2054.0}, {"text": "with a custom definition of our state machine.", "timestamp": "00:34:18,634", "timestamp_s": 2058.0}, {"text": "Okay, so now we\u0027re going to implement the actual functionality of our state", "timestamp": "00:34:24,550", "timestamp_s": 2064.0}, {"text": "machine. And one of the first things that we want to do is", "timestamp": "00:34:28,552", "timestamp_s": 2068.0}, {"text": "when a new hash matching the", "timestamp": "00:34:32,600", "timestamp_s": 2072.0}, {"text": "given prefix, it\u0027s added to Redis,", "timestamp": "00:34:36,652", "timestamp_s": 2076.0}, {"text": "we want to intercept that and set the initial state field", "timestamp": "00:34:40,114", "timestamp_s": 2080.0}, {"text": "given a state machine that matches the prefix of the hash.", "timestamp": "00:34:45,130", "timestamp_s": 2085.0}, {"text": "So to do that, first I\u0027m going to add", "timestamp": "00:34:48,662", "timestamp_s": 2088.0}, {"text": "a function called on event. And this on event function", "timestamp": "00:34:52,510", "timestamp_s": 2092.0}, {"text": "takes a context again, but this time it takes", "timestamp": "00:34:57,248", "timestamp_s": 2097.0}, {"text": "an event type, which is a notify event and", "timestamp": "00:35:01,312", "timestamp_s": 2101.0}, {"text": "the actual event as a string and the key as", "timestamp": "00:35:05,476", "timestamp_s": 2105.0}, {"text": "a string and inside of it. For now we\u0027re just going to have", "timestamp": "00:35:08,772", "timestamp_s": 2108.0}, {"text": "a message that basically prints what the event was", "timestamp": "00:35:12,456", "timestamp_s": 2112.0}, {"text": "in the key and", "timestamp": "00:35:16,056", "timestamp_s": 2116.0}, {"text": "the event. So the event type, the key and the actual", "timestamp": "00:35:19,912", "timestamp_s": 2119.0}, {"text": "event, and we\u0027re going to log that to the context with the", "timestamp": "00:35:23,496", "timestamp_s": 2123.0}, {"text": "log notice login message. So once", "timestamp": "00:35:26,844", "timestamp_s": 2126.0}, {"text": "we have that in place, we have to register that event. So down in our", "timestamp": "00:35:30,236", "timestamp_s": 2130.0}, {"text": "redis module registration block,", "timestamp": "00:35:33,852", "timestamp_s": 2133.0}, {"text": "we add an event handlers vector", "timestamp": "00:35:38,590", "timestamp_s": 2138.0}, {"text": "that has inside an event", "timestamp": "00:35:42,758", "timestamp_s": 2142.0}, {"text": "handler of type hash. And we\u0027re pointing", "timestamp": "00:35:46,576", "timestamp_s": 2146.0}, {"text": "that to our on event function. So when a hash", "timestamp": "00:35:49,962", "timestamp_s": 2149.0}, {"text": "event is detected, we\u0027re going to get notified and", "timestamp": "00:35:53,962", "timestamp_s": 2153.0}, {"text": "our on event function is going to be invoked.", "timestamp": "00:35:57,716", "timestamp_s": 2157.0}, {"text": "Right. So with that in place, we can now", "timestamp": "00:36:01,930", "timestamp_s": 2161.0}, {"text": "test the event functionality.", "timestamp": "00:36:05,976", "timestamp_s": 2165.0}, {"text": "All right, so now let\u0027s compile our library", "timestamp": "00:36:12,710", "timestamp_s": 2172.0}, {"text": "again and", "timestamp": "00:36:16,466", "timestamp_s": 2176.0}, {"text": "let\u0027s launch it.", "timestamp": "00:36:20,172", "timestamp_s": 2180.0}, {"text": "And let\u0027s launch the CLI.", "timestamp": "00:36:24,090", "timestamp_s": 2184.0}, {"text": "Let\u0027s arrow so we can get to that FSM create. So we\u0027ll create", "timestamp": "00:36:26,930", "timestamp_s": 2186.0}, {"text": "our job", "timestamp": "00:36:30,928", "timestamp_s": 2190.0}, {"text": "FSM finite state machine.", "timestamp": "00:36:34,480", "timestamp_s": 2194.0}, {"text": "Let\u0027s make sure that the key is there again.", "timestamp": "00:36:38,590", "timestamp_s": 2198.0}, {"text": "Let\u0027s make sure that we can read it back.", "timestamp": "00:36:41,892", "timestamp_s": 2201.0}, {"text": "So it\u0027s job FSM. All right,", "timestamp": "00:36:45,170", "timestamp_s": 2205.0}, {"text": "so now what we\u0027re going to do is let\u0027s do an HM set.", "timestamp": "00:36:48,724", "timestamp_s": 2208.0}, {"text": "So we\u0027re going to create a key. Sorry. We\u0027re going to create a", "timestamp": "00:36:53,224", "timestamp_s": 2213.0}, {"text": "hash and we\u0027re going to use the prefix that", "timestamp": "00:36:56,648", "timestamp_s": 2216.0}, {"text": "we\u0027re listening for in our state", "timestamp": "00:37:00,712", "timestamp_s": 2220.0}, {"text": "machine. It doesn\u0027t really matter right now, but it will", "timestamp": "00:37:06,892", "timestamp_s": 2226.0}, {"text": "once we actually look for that prefix. But for now,", "timestamp": "00:37:10,156", "timestamp_s": 2230.0}, {"text": "any hash event should be detected by our event", "timestamp": "00:37:13,740", "timestamp_s": 2233.0}, {"text": "handler. So in here, I\u0027m going to create this hash called job", "timestamp": "00:37:18,240", "timestamp_s": 2238.0}, {"text": "one. And let\u0027s give it a feel here,", "timestamp": "00:37:22,910", "timestamp_s": 2242.0}, {"text": "maybe employee. And this is going to be Brian.", "timestamp": "00:37:26,192", "timestamp_s": 2246.0}, {"text": "Okay, so now pay attention to the", "timestamp": "00:37:30,198", "timestamp_s": 2250.0}, {"text": "redis server tab. So I\u0027m going to press return in", "timestamp": "00:37:33,652", "timestamp_s": 2253.0}, {"text": "here and notice that this is spinning because now we just receive", "timestamp": "00:37:37,188", "timestamp_s": 2257.0}, {"text": "our event. So in here we have received event hash", "timestamp": "00:37:40,826", "timestamp_s": 2260.0}, {"text": "on key job one via the event H", "timestamp": "00:37:45,358", "timestamp_s": 2265.0}, {"text": "set. So our event was an h set event.", "timestamp": "00:37:48,952", "timestamp_s": 2268.0}, {"text": "So that was the command that basically was triggered by the hmset.", "timestamp": "00:37:52,360", "timestamp_s": 2272.0}, {"text": "So each one of the writes to the hash.", "timestamp": "00:37:56,046", "timestamp_s": 2276.0}, {"text": "It\u0027s an H set event. And in here", "timestamp": "00:38:00,050", "timestamp_s": 2280.0}, {"text": "I get these key of the", "timestamp": "00:38:03,580", "timestamp_s": 2283.0}, {"text": "hash that was created and these event type was a hash.", "timestamp": "00:38:07,532", "timestamp_s": 2287.0}, {"text": "All right,", "timestamp": "00:38:11,638", "timestamp_s": 2291.0}, {"text": "so now we got a big refactor in our hands. We need to implement", "timestamp": "00:38:15,230", "timestamp_s": 2295.0}, {"text": "the on event function. So when a", "timestamp": "00:38:19,158", "timestamp_s": 2299.0}, {"text": "hash event arrives for a hash that has", "timestamp": "00:38:23,188", "timestamp_s": 2303.0}, {"text": "a key with a prefix matching any of the prefixes", "timestamp": "00:38:26,692", "timestamp_s": 2306.0}, {"text": "defined on any of the FSMs that we have stored", "timestamp": "00:38:30,762", "timestamp_s": 2310.0}, {"text": "in the system, we want to then check", "timestamp": "00:38:34,174", "timestamp_s": 2314.0}, {"text": "that hash. And if these state field it\u0027s", "timestamp": "00:38:37,672", "timestamp_s": 2317.0}, {"text": "empty on that hash, we\u0027re going to grab the initial state from the state", "timestamp": "00:38:41,342", "timestamp_s": 2321.0}, {"text": "machine that matches that prefix for that hash and we\u0027re going to set it", "timestamp": "00:38:44,936", "timestamp_s": 2324.0}, {"text": "up on the hash. So to do that, first we\u0027re going to start", "timestamp": "00:38:49,068", "timestamp_s": 2329.0}, {"text": "by grabbing the prefix for the", "timestamp": "00:38:53,100", "timestamp_s": 2333.0}, {"text": "hash for which we have received an event.", "timestamp": "00:38:56,924", "timestamp_s": 2336.0}, {"text": "So I\u0027m going to split the keys by", "timestamp": "00:39:01,088", "timestamp_s": 2341.0}, {"text": "the column and then I\u0027m going to grab the prefix as the", "timestamp": "00:39:05,072", "timestamp_s": 2345.0}, {"text": "first segment of that list of key parts,", "timestamp": "00:39:08,816", "timestamp_s": 2348.0}, {"text": "and I\u0027m going to reappend the column in", "timestamp": "00:39:13,570", "timestamp_s": 2353.0}, {"text": "there to build my key prefix. So then", "timestamp": "00:39:17,348", "timestamp_s": 2357.0}, {"text": "if we go back to the FSM create,", "timestamp": "00:39:22,950", "timestamp_s": 2362.0}, {"text": "we need to basically have a way for,", "timestamp": "00:39:31,110", "timestamp_s": 2371.0}, {"text": "given a hash prefix, be able to find", "timestamp": "00:39:36,730", "timestamp_s": 2376.0}, {"text": "the FSM that matches that prefix.", "timestamp": "00:39:40,732", "timestamp_s": 2380.0}, {"text": "So there\u0027s many ways we can actually store that data. So we basically need", "timestamp": "00:39:44,306", "timestamp_s": 2384.0}, {"text": "a dictionary or a hash or a map between prefixes", "timestamp": "00:39:47,648", "timestamp_s": 2387.0}, {"text": "and finite state machines. And the", "timestamp": "00:39:52,246", "timestamp_s": 2392.0}, {"text": "way that I decided to implement it in this demo is to", "timestamp": "00:39:55,888", "timestamp_s": 2395.0}, {"text": "actually use Redis itself. So I\u0027m going to use a Redis hash to store", "timestamp": "00:39:59,568", "timestamp_s": 2399.0}, {"text": "a mapping of prefixes to the keys", "timestamp": "00:40:03,236", "timestamp_s": 2403.0}, {"text": "of our fsms. So we\u0027re", "timestamp": "00:40:06,442", "timestamp_s": 2406.0}, {"text": "going to start here by refactoring this. So we were returning", "timestamp": "00:40:10,714", "timestamp_s": 2410.0}, {"text": "just a result of setting the value of the FSM", "timestamp": "00:40:14,250", "timestamp_s": 2414.0}, {"text": "when we wrote it to the database. Now we\u0027re just going to put that in", "timestamp": "00:40:18,142", "timestamp_s": 2418.0}, {"text": "an individual line with one of these guards. And in here\u0027s where I\u0027m basically", "timestamp": "00:40:21,224", "timestamp_s": 2421.0}, {"text": "writing my state machine, my serialized state machine to the system.", "timestamp": "00:40:25,228", "timestamp_s": 2425.0}, {"text": "And then in between that and the return,", "timestamp": "00:40:29,548", "timestamp_s": 2429.0}, {"text": "first I\u0027m going to create a constant that basically", "timestamp": "00:40:34,890", "timestamp_s": 2434.0}, {"text": "tells me the name of the hash where I\u0027m going to keep my mappings,", "timestamp": "00:40:39,168", "timestamp_s": 2439.0}, {"text": "my mappings between, again, prefixes to", "timestamp": "00:40:42,534", "timestamp_s": 2442.0}, {"text": "FSM keys. So now I have that", "timestamp": "00:40:46,430", "timestamp_s": 2446.0}, {"text": "hash name that we\u0027re going to use. And down below here,", "timestamp": "00:40:51,170", "timestamp_s": 2451.0}, {"text": "notice that I\u0027m using the", "timestamp": "00:40:54,916", "timestamp_s": 2454.0}, {"text": "context to call h set. So this", "timestamp": "00:40:59,028", "timestamp_s": 2459.0}, {"text": "h set, it\u0027s just a command, a redis command. And the", "timestamp": "00:41:02,516", "timestamp_s": 2462.0}, {"text": "redis context gives us access to those commands.", "timestamp": "00:41:06,776", "timestamp_s": 2466.0}, {"text": "So I\u0027m going to call the h set command,", "timestamp": "00:41:10,430", "timestamp_s": 2470.0}, {"text": "and I\u0027m going to write to this redis fsm hash key that we created", "timestamp": "00:41:13,838", "timestamp_s": 2473.0}, {"text": "here. And I\u0027m going to write the prefix that", "timestamp": "00:41:17,522", "timestamp_s": 2477.0}, {"text": "is defined in the findingstate machine JSon. And I\u0027m going to", "timestamp": "00:41:22,108", "timestamp_s": 2482.0}, {"text": "write also the key of my finite state machine", "timestamp": "00:41:25,916", "timestamp_s": 2485.0}, {"text": "as the value in there. So now with that in place,", "timestamp": "00:41:29,702", "timestamp_s": 2489.0}, {"text": "I can now make some modifications. So now we", "timestamp": "00:41:35,870", "timestamp_s": 2495.0}, {"text": "have a set that has those values. So let\u0027s go back to our", "timestamp": "00:41:39,808", "timestamp_s": 2499.0}, {"text": "on event and in here. Notice that now I can", "timestamp": "00:41:43,332", "timestamp_s": 2503.0}, {"text": "find the correct finite state machine for the key prefix.", "timestamp": "00:41:47,588", "timestamp_s": 2507.0}, {"text": "So what I\u0027m doing in here is again, I\u0027m using a guard again,", "timestamp": "00:41:51,738", "timestamp_s": 2511.0}, {"text": "and I\u0027m looking for my fsm", "timestamp": "00:41:55,544", "timestamp_s": 2515.0}, {"text": "key by calling h get. So we did an h set", "timestamp": "00:41:59,006", "timestamp_s": 2519.0}, {"text": "to save the mapping upon creation of the state machine.", "timestamp": "00:42:02,696", "timestamp_s": 2522.0}, {"text": "And now when we get an event for a hash, we\u0027re going to use Hkit", "timestamp": "00:42:06,190", "timestamp_s": 2526.0}, {"text": "to look into that map to see if our event prefix,", "timestamp": "00:42:09,570", "timestamp_s": 2529.0}, {"text": "our hash prefix, matches any of the prefixes of", "timestamp": "00:42:13,554", "timestamp_s": 2533.0}, {"text": "our state machines. I\u0027m also assuming that the prefixes", "timestamp": "00:42:17,408", "timestamp_s": 2537.0}, {"text": "are unique per state machine. So now with that", "timestamp": "00:42:21,462", "timestamp_s": 2541.0}, {"text": "in place,", "timestamp": "00:42:25,152", "timestamp_s": 2545.0}, {"text": "I can now create a key name,", "timestamp": "00:42:29,330", "timestamp_s": 2549.0}, {"text": "which is going to be, I\u0027m using the context and my", "timestamp": "00:42:33,668", "timestamp_s": 2553.0}, {"text": "findingstate machine key and I am", "timestamp": "00:42:37,412", "timestamp_s": 2557.0}, {"text": "basically opening that key. So I\u0027m reading the FSm", "timestamp": "00:42:40,836", "timestamp_s": 2560.0}, {"text": "back and then from the FSM here,", "timestamp": "00:42:44,366", "timestamp_s": 2564.0}, {"text": "which is basically my instance of definite state machine, which is going to be the", "timestamp": "00:42:49,560", "timestamp_s": 2569.0}, {"text": "struct that we defined before. So it\u0027s", "timestamp": "00:42:53,272", "timestamp_s": 2573.0}, {"text": "going to be one of these. So that", "timestamp": "00:42:57,058", "timestamp_s": 2577.0}, {"text": "state machine object, now it\u0027s loaded here at", "timestamp": "00:43:01,612", "timestamp_s": 2581.0}, {"text": "the end of the current implementation of our own event.", "timestamp": "00:43:04,908", "timestamp_s": 2584.0}, {"text": "So once I have the state machine object,", "timestamp": "00:43:08,912", "timestamp_s": 2588.0}, {"text": "I can grab the initial state, but I\u0027m only going to grab the initial", "timestamp": "00:43:14,430", "timestamp_s": 2594.0}, {"text": "state if a call to try to", "timestamp": "00:43:17,782", "timestamp_s": 2597.0}, {"text": "retrieve the FSm field from the", "timestamp": "00:43:21,572", "timestamp_s": 2601.0}, {"text": "hash comes back no. So that means if the hash", "timestamp": "00:43:25,268", "timestamp_s": 2605.0}, {"text": "doesn\u0027t have the state field set, I\u0027m going to", "timestamp": "00:43:28,634", "timestamp_s": 2608.0}, {"text": "initialize it to the initial value that is on", "timestamp": "00:43:31,956", "timestamp_s": 2611.0}, {"text": "the state machine. So notice in", "timestamp": "00:43:36,456", "timestamp_s": 2616.0}, {"text": "here one", "timestamp": "00:43:39,992", "timestamp_s": 2619.0}, {"text": "of the things I need to do is I need to have a way to", "timestamp": "00:43:44,808", "timestamp_s": 2624.0}, {"text": "retrieve that initial state. So how do I retrieve that initial state?", "timestamp": "00:43:47,036", "timestamp_s": 2627.0}, {"text": "That\u0027s going to be, if you remember our JSon object or", "timestamp": "00:43:50,332", "timestamp_s": 2630.0}, {"text": "the definition. So let\u0027s go back here to our", "timestamp": "00:43:54,588", "timestamp_s": 2634.0}, {"text": "state machine. This set of states, the first implements", "timestamp": "00:43:58,652", "timestamp_s": 2638.0}, {"text": "of this vector is going to be our initial state.", "timestamp": "00:44:02,630", "timestamp_s": 2642.0}, {"text": "So now let\u0027s add some logic to our state machine.", "timestamp": "00:44:05,360", "timestamp_s": 2645.0}, {"text": "So I\u0027m going to add an input block for our state machine in these,", "timestamp": "00:44:09,014", "timestamp_s": 2649.0}, {"text": "and we\u0027re going to create an initial state", "timestamp": "00:44:12,692", "timestamp_s": 2652.0}, {"text": "field. So our initial state, this being a method,", "timestamp": "00:44:16,116", "timestamp_s": 2656.0}, {"text": "takes a pointer to self and these we\u0027re going", "timestamp": "00:44:19,482", "timestamp_s": 2659.0}, {"text": "to return an optional string. So that means if there", "timestamp": "00:44:22,984", "timestamp_s": 2662.0}, {"text": "are any states in here, we\u0027re going to return the first one", "timestamp": "00:44:26,472", "timestamp_s": 2666.0}, {"text": "or none. And with that in place,", "timestamp": "00:44:30,584", "timestamp_s": 2670.0}, {"text": "we can now go back to our on event", "timestamp": "00:44:36,570", "timestamp_s": 2676.0}, {"text": "implementation. So back here", "timestamp": "00:44:40,572", "timestamp_s": 2680.0}, {"text": "on the on event implementation. Now we can call that new method that we", "timestamp": "00:44:44,220", "timestamp_s": 2684.0}, {"text": "created on the state machine strut.", "timestamp": "00:44:48,128", "timestamp_s": 2688.0}, {"text": "So we\u0027re going to basically use a guard again,", "timestamp": "00:44:51,958", "timestamp_s": 2691.0}, {"text": "and I\u0027m going to attempt to grab the initial state by calling", "timestamp": "00:44:55,056", "timestamp_s": 2695.0}, {"text": "the initial state on the FSM object that we retrieved up", "timestamp": "00:44:59,040", "timestamp_s": 2699.0}, {"text": "here. So once I have that, now I can call", "timestamp": "00:45:03,572", "timestamp_s": 2703.0}, {"text": "an h set. So I did an h get to find the", "timestamp": "00:45:06,772", "timestamp_s": 2706.0}, {"text": "correct mapping", "timestamp": "00:45:10,548", "timestamp_s": 2710.0}, {"text": "of prefix to state machine. Then I instantiated that", "timestamp": "00:45:14,190", "timestamp_s": 2714.0}, {"text": "state machine. If these field also", "timestamp": "00:45:17,768", "timestamp_s": 2717.0}, {"text": "was empty, I use another h, get to check if the state was set on", "timestamp": "00:45:21,304", "timestamp_s": 2721.0}, {"text": "the hash and if it wasn\u0027t set, now I can grab the initial state", "timestamp": "00:45:25,448", "timestamp_s": 2725.0}, {"text": "from the state machine and do another h set on the", "timestamp": "00:45:29,212", "timestamp_s": 2729.0}, {"text": "hash on the incoming hash on the", "timestamp": "00:45:32,572", "timestamp_s": 2732.0}, {"text": "field that was defined on the state machine as being these initial", "timestamp": "00:45:36,092", "timestamp_s": 2736.0}, {"text": "state and grabbing the initial state value from the state machine.", "timestamp": "00:45:39,702", "timestamp_s": 2739.0}, {"text": "So now with that in place, we should have a fully", "timestamp": "00:45:43,622", "timestamp_s": 2743.0}, {"text": "functioning step of the state machine that", "timestamp": "00:45:48,678", "timestamp_s": 2748.0}, {"text": "sets up the initial state on any matching hash.", "timestamp": "00:45:52,196", "timestamp_s": 2752.0}, {"text": "Okay, so let\u0027s build the application again", "timestamp": "00:45:59,570", "timestamp_s": 2759.0}, {"text": "and let\u0027s launch it so we", "timestamp": "00:46:04,310", "timestamp_s": 2764.0}, {"text": "can test our event handling code.", "timestamp": "00:46:07,688", "timestamp_s": 2767.0}, {"text": "So back on the CLI,", "timestamp": "00:46:14,630", "timestamp_s": 2774.0}, {"text": "let\u0027s reload our final", "timestamp": "00:46:17,450", "timestamp_s": 2777.0}, {"text": "state machine, finite state machine JSON,", "timestamp": "00:46:22,204", "timestamp_s": 2782.0}, {"text": "and let\u0027s do all these usual", "timestamp": "00:46:28,030", "timestamp_s": 2788.0}, {"text": "checking. So let\u0027s actually inspect the", "timestamp": "00:46:31,830", "timestamp_s": 2791.0}, {"text": "hash of mappings. So we\u0027ll do an h getall for", "timestamp": "00:46:37,040", "timestamp_s": 2797.0}, {"text": "redis FSm hash.", "timestamp": "00:46:41,776", "timestamp_s": 2801.0}, {"text": "And you can see that we have the job prefix that we", "timestamp": "00:46:48,930", "timestamp_s": 2808.0}, {"text": "set on our JSON specification,", "timestamp": "00:46:54,230", "timestamp_s": 2814.0}, {"text": "and it maps to the key for", "timestamp": "00:46:57,598", "timestamp_s": 2817.0}, {"text": "the FSM that we have in the system.", "timestamp": "00:47:01,208", "timestamp_s": 2821.0}, {"text": "So now let\u0027s do", "timestamp": "00:47:05,192", "timestamp_s": 2825.0}, {"text": "an hm set for", "timestamp": "00:47:09,768", "timestamp_s": 2829.0}, {"text": "a key matching our prefix. So again", "timestamp": "00:47:14,300", "timestamp_s": 2834.0}, {"text": "let\u0027s do job one and", "timestamp": "00:47:17,392", "timestamp_s": 2837.0}, {"text": "we\u0027re going to say again, employee Brian.", "timestamp": "00:47:21,056", "timestamp_s": 2841.0}, {"text": "And as you can see, the redis", "timestamp": "00:47:26,750", "timestamp_s": 2846.0}, {"text": "server detected the event. Notice that we have two events,", "timestamp": "00:47:30,032", "timestamp_s": 2850.0}, {"text": "one on the redis hash, but that one doesn\u0027t match our prefix,", "timestamp": "00:47:34,138", "timestamp_s": 2854.0}, {"text": "these redis hash that keeps the mapping of prefixes to", "timestamp": "00:47:38,530", "timestamp_s": 2858.0}, {"text": "fsms. And then for the actual data one, the job", "timestamp": "00:47:42,036", "timestamp_s": 2862.0}, {"text": "one. So now let\u0027s inspect the", "timestamp": "00:47:46,184", "timestamp_s": 2866.0}, {"text": "values. So we\u0027ll do an h get all for", "timestamp": "00:47:49,832", "timestamp_s": 2869.0}, {"text": "our job one.", "timestamp": "00:47:54,680", "timestamp_s": 2874.0}, {"text": "And as you can see now we have the initial", "timestamp": "00:47:58,330", "timestamp_s": 2878.0}, {"text": "fields that we set. Employee Brian, employee Brian.", "timestamp": "00:48:01,458", "timestamp_s": 2881.0}, {"text": "But we also have the state set to sleeping.", "timestamp": "00:48:04,946", "timestamp_s": 2884.0}, {"text": "And if you remember in our FSM", "timestamp": "00:48:08,566", "timestamp_s": 2888.0}, {"text": "definition, our first state is sleeping, which is", "timestamp": "00:48:12,502", "timestamp_s": 2892.0}, {"text": "our initial state. So our state machine", "timestamp": "00:48:16,448", "timestamp_s": 2896.0}, {"text": "initial state setting on events works.", "timestamp": "00:48:20,290", "timestamp_s": 2900.0}, {"text": "Now we can move on to implements the FSM allowed command.", "timestamp": "00:48:25,410", "timestamp_s": 2905.0}, {"text": "Okay, so now we\u0027re going to implements the method that allows", "timestamp": "00:48:30,530", "timestamp_s": 2910.0}, {"text": "us to check whether an event can be", "timestamp": "00:48:34,158", "timestamp_s": 2914.0}, {"text": "applied to an object to transition to", "timestamp": "00:48:37,432", "timestamp_s": 2917.0}, {"text": "a different state. And to do that,", "timestamp": "00:48:40,792", "timestamp_s": 2920.0}, {"text": "first we\u0027re going to create a skeleton for the FSM allowed", "timestamp": "00:48:44,648", "timestamp_s": 2924.0}, {"text": "method function, sorry. And has the same signature as", "timestamp": "00:48:48,242", "timestamp_s": 2928.0}, {"text": "the methods before.", "timestamp": "00:48:52,428", "timestamp_s": 2932.0}, {"text": "And we are also going to", "timestamp": "00:48:58,590", "timestamp_s": 2938.0}, {"text": "register that command in our Redis module", "timestamp": "00:49:02,080", "timestamp_s": 2942.0}, {"text": "command declaration. Module declaration. So I have", "timestamp": "00:49:05,942", "timestamp_s": 2945.0}, {"text": "my FSM allowed. It\u0027s going to be backed by that FSM allowed", "timestamp": "00:49:09,408", "timestamp_s": 2949.0}, {"text": "function that we created above. And again it\u0027s going to be a read only", "timestamp": "00:49:13,386", "timestamp_s": 2953.0}, {"text": "these first key parameter.", "timestamp": "00:49:17,650", "timestamp_s": 2957.0}, {"text": "It\u0027s a parameter in position one. But this one takes two keys.", "timestamp": "00:49:20,586", "timestamp_s": 2960.0}, {"text": "So the first key would be the key of the FSM", "timestamp": "00:49:24,442", "timestamp_s": 2964.0}, {"text": "of the final state machine, and then the second key would be", "timestamp": "00:49:28,686", "timestamp_s": 2968.0}, {"text": "a target hash for which we are checking whether an event can be", "timestamp": "00:49:32,216", "timestamp_s": 2972.0}, {"text": "applied to.", "timestamp": "00:49:35,784", "timestamp_s": 2975.0}, {"text": "All right, so now we\u0027re", "timestamp": "00:49:39,380", "timestamp_s": 2979.0}, {"text": "going to add a method to our final state machine struct.", "timestamp": "00:49:43,628", "timestamp_s": 2983.0}, {"text": "So let\u0027s go find the final state machine, the finite state machine.", "timestamp": "00:49:48,140", "timestamp_s": 2988.0}, {"text": "Here in our impulse block, we\u0027re going", "timestamp": "00:49:54,920", "timestamp_s": 2994.0}, {"text": "to add a method called allowed.", "timestamp": "00:49:58,362", "timestamp_s": 2998.0}, {"text": "And this one is going to return an event.", "timestamp": "00:50:02,548", "timestamp_s": 3002.0}, {"text": "And this event is going to be one of our event substructs.", "timestamp": "00:50:05,934", "timestamp_s": 3005.0}, {"text": "This one right here. The event that basically", "timestamp": "00:50:11,556", "timestamp_s": 3011.0}, {"text": "denotes an event that can be applied", "timestamp": "00:50:15,330", "timestamp_s": 3015.0}, {"text": "to the state machine, which will basically transition", "timestamp": "00:50:18,840", "timestamp_s": 3018.0}, {"text": "from a state in the from vector", "timestamp": "00:50:24,400", "timestamp_s": 3024.0}, {"text": "to the final state denoted by the two field.", "timestamp": "00:50:28,508", "timestamp_s": 3028.0}, {"text": "All right, so in our function right", "timestamp": "00:50:32,740", "timestamp_s": 3032.0}, {"text": "now, we\u0027re returning none. So the first thing we\u0027re going to do is", "timestamp": "00:50:37,078", "timestamp_s": 3037.0}, {"text": "load the hash,", "timestamp": "00:50:40,986", "timestamp_s": 3040.0}, {"text": "the hash that basically we\u0027re checking against in", "timestamp": "00:50:44,280", "timestamp_s": 3044.0}, {"text": "that hash. We\u0027re only interested in the state field.", "timestamp": "00:50:48,010", "timestamp_s": 3048.0}, {"text": "So we\u0027re using the", "timestamp": "00:50:51,966", "timestamp_s": 3051.0}, {"text": "finite state machine field, which you remember it\u0027s in", "timestamp": "00:50:57,598", "timestamp_s": 3057.0}, {"text": "our declaration right here to basically look for", "timestamp": "00:51:01,054", "timestamp_s": 3061.0}, {"text": "that specific state in that target hash.", "timestamp": "00:51:04,866", "timestamp_s": 3064.0}, {"text": "And if we find that", "timestamp": "00:51:09,040", "timestamp_s": 3069.0}, {"text": "state, that\u0027s going to be in response. So we\u0027re", "timestamp": "00:51:12,882", "timestamp_s": 3072.0}, {"text": "going to grab the value of that, which is going to be a redis value", "timestamp": "00:51:16,648", "timestamp_s": 3076.0}, {"text": "simple string, and we\u0027re going to put that value in the current state.", "timestamp": "00:51:20,950", "timestamp_s": 3080.0}, {"text": "And assuming that we can get that value", "timestamp": "00:51:25,380", "timestamp_s": 3085.0}, {"text": "out, then we\u0027re going to", "timestamp": "00:51:29,018", "timestamp_s": 3089.0}, {"text": "find the event object, the event struct", "timestamp": "00:51:32,840", "timestamp_s": 3092.0}, {"text": "that it\u0027s inside of our final state machine by iterating", "timestamp": "00:51:37,056", "timestamp_s": 3097.0}, {"text": "over the events and going to find the event with the name", "timestamp": "00:51:41,440", "timestamp_s": 3101.0}, {"text": "that matches the FSM event value that\u0027s being", "timestamp": "00:51:45,262", "timestamp_s": 3105.0}, {"text": "passed to us. So this is the event that we\u0027re checking whether", "timestamp": "00:51:49,486", "timestamp_s": 3109.0}, {"text": "that hash can transition to, right. So if", "timestamp": "00:51:53,118", "timestamp_s": 3113.0}, {"text": "we find that event, it\u0027s going to be in our event object.", "timestamp": "00:51:56,418", "timestamp_s": 3116.0}, {"text": "And then if the current state of the", "timestamp": "00:52:02,320", "timestamp_s": 3122.0}, {"text": "from field. So if the current state", "timestamp": "00:52:05,714", "timestamp_s": 3125.0}, {"text": "of the hash, it\u0027s one of the values in", "timestamp": "00:52:09,478", "timestamp_s": 3129.0}, {"text": "the event from vector,", "timestamp": "00:52:15,318", "timestamp_s": 3135.0}, {"text": "then we know that we can transition to the", "timestamp": "00:52:18,896", "timestamp_s": 3138.0}, {"text": "final state denoted by that event.", "timestamp": "00:52:22,666", "timestamp_s": 3142.0}, {"text": "So if that\u0027s the case,", "timestamp": "00:52:26,920", "timestamp_s": 3146.0}, {"text": "we can basically return that", "timestamp": "00:52:34,300", "timestamp_s": 3154.0}, {"text": "event. Otherwise we return none. And now if we", "timestamp": "00:52:37,902", "timestamp_s": 3157.0}, {"text": "go back to the FSM allowed method.", "timestamp": "00:52:41,342", "timestamp_s": 3161.0}, {"text": "Here we go.", "timestamp": "00:52:50,080", "timestamp_s": 3170.0}, {"text": "Now we can refactor this to", "timestamp": "00:52:52,480", "timestamp_s": 3172.0}, {"text": "extract the keys.", "timestamp": "00:52:56,374", "timestamp_s": 3176.0}, {"text": "So I\u0027m going to extract the final state machine key as the first key.", "timestamp": "00:53:00,012", "timestamp_s": 3180.0}, {"text": "Then the next key would be the hash key.", "timestamp": "00:53:03,910", "timestamp_s": 3183.0}, {"text": "We\u0027re also loading our redis key.", "timestamp": "00:53:07,366", "timestamp_s": 3187.0}, {"text": "So we can read the final state machine value", "timestamp": "00:53:10,778", "timestamp_s": 3190.0}, {"text": "and these event would", "timestamp": "00:53:17,320", "timestamp_s": 3197.0}, {"text": "be the next argument. So remember there\u0027s only two keys.", "timestamp": "00:53:20,442", "timestamp_s": 3200.0}, {"text": "So there\u0027s the final state machine key, the hash key,", "timestamp": "00:53:23,936", "timestamp_s": 3203.0}, {"text": "and then the target event. So that\u0027s why we only have two", "timestamp": "00:53:27,726", "timestamp_s": 3207.0}, {"text": "keys denoted in our declaration", "timestamp": "00:53:31,502", "timestamp_s": 3211.0}, {"text": "down here. So that two means that there\u0027s two keys, even though we have three", "timestamp": "00:53:35,444", "timestamp_s": 3215.0}, {"text": "parameters. The third parameter, it\u0027s the event that we\u0027re checking against.", "timestamp": "00:53:38,802", "timestamp_s": 3218.0}, {"text": "All right, so back to the FSM allowed.", "timestamp": "00:53:43,840", "timestamp_s": 3223.0}, {"text": "Let\u0027s finish that implements. So in here I\u0027m going to have that guard again", "timestamp": "00:53:46,980", "timestamp_s": 3226.0}, {"text": "where I extract the final state machine object by", "timestamp": "00:53:51,078", "timestamp_s": 3231.0}, {"text": "reimbing it from redis,", "timestamp": "00:53:54,822", "timestamp_s": 3234.0}, {"text": "giving its key. And then now", "timestamp": "00:53:59,380", "timestamp_s": 3239.0}, {"text": "that I have the final state machine, I can call the final state machine allowed", "timestamp": "00:54:02,906", "timestamp_s": 3242.0}, {"text": "method that we just implemented above, passing the context,", "timestamp": "00:54:06,768", "timestamp_s": 3246.0}, {"text": "since we\u0027re going to use that to basically read things", "timestamp": "00:54:09,824", "timestamp_s": 3249.0}, {"text": "from redis, the hash key and the event. And then", "timestamp": "00:54:14,590", "timestamp_s": 3254.0}, {"text": "if I get an event back, that means that we\u0027re good.", "timestamp": "00:54:19,260", "timestamp_s": 3259.0}, {"text": "So I don\u0027t need the event object in this specific method,", "timestamp": "00:54:23,006", "timestamp_s": 3263.0}, {"text": "but then I\u0027m going to use it to determine whether to return true or false", "timestamp": "00:54:26,120", "timestamp_s": 3266.0}, {"text": "right here.", "timestamp": "00:54:29,512", "timestamp_s": 3269.0}, {"text": "So now let\u0027s recompile", "timestamp": "00:54:33,280", "timestamp_s": 3273.0}, {"text": "the code and", "timestamp": "00:54:36,668", "timestamp_s": 3276.0}, {"text": "let\u0027s restart our server, loading our module and", "timestamp": "00:54:41,936", "timestamp_s": 3281.0}, {"text": "then back on the CLI.", "timestamp": "00:54:47,168", "timestamp_s": 3287.0}, {"text": "Let\u0027s up arrow here to recreate what we\u0027ve done", "timestamp": "00:54:50,690", "timestamp_s": 3290.0}, {"text": "before. We\u0027re going to load the FSM", "timestamp": "00:54:53,892", "timestamp_s": 3293.0}, {"text": "and let\u0027s set a hash", "timestamp": "00:55:01,670", "timestamp_s": 3301.0}, {"text": "again. Let\u0027s use these job one with employee Brian.", "timestamp": "00:55:05,806", "timestamp_s": 3305.0}, {"text": "Again, let\u0027s double check that our", "timestamp": "00:55:12,790", "timestamp_s": 3312.0}, {"text": "initial state has been set on the hash.", "timestamp": "00:55:16,636", "timestamp_s": 3316.0}, {"text": "You can see that the state is sleeping. So now I\u0027m", "timestamp": "00:55:19,874", "timestamp_s": 3319.0}, {"text": "going to do an FSM and this is going", "timestamp": "00:55:23,234", "timestamp_s": 3323.0}, {"text": "to be allowed. Notice that the CLI autocompletes that.", "timestamp": "00:55:26,604", "timestamp_s": 3326.0}, {"text": "And these first key", "timestamp": "00:55:30,608", "timestamp_s": 3330.0}, {"text": "we\u0027re going to pass here. It\u0027s our job,", "timestamp": "00:55:34,336", "timestamp_s": 3334.0}, {"text": "FSM. And then the second", "timestamp": "00:55:37,584", "timestamp_s": 3337.0}, {"text": "one is going to be the hash,", "timestamp": "00:55:41,460", "timestamp_s": 3341.0}, {"text": "which is job one.", "timestamp": "00:55:44,586", "timestamp_s": 3344.0}, {"text": "And then let\u0027s test", "timestamp": "00:55:47,570", "timestamp_s": 3347.0}, {"text": "one of the events. So one of the events that we have", "timestamp": "00:55:52,020", "timestamp_s": 3352.0}, {"text": "in our final state machine,", "timestamp": "00:55:56,232", "timestamp_s": 3356.0}, {"text": "it\u0027s sleep. So sleep can transition from", "timestamp": "00:55:59,454", "timestamp_s": 3359.0}, {"text": "running or cleaning. So let\u0027s try that one.", "timestamp": "00:56:03,880", "timestamp_s": 3363.0}, {"text": "Since we are not on running or cleaning, we\u0027re in sleeping,", "timestamp": "00:56:08,490", "timestamp_s": 3368.0}, {"text": "we return false, because we cannot transition", "timestamp": "00:56:11,890", "timestamp_s": 3371.0}, {"text": "using sleep. So the sleep event is not allowed", "timestamp": "00:56:16,670", "timestamp_s": 3376.0}, {"text": "in this specific case.", "timestamp": "00:56:20,150", "timestamp_s": 3380.0}, {"text": "But running can.", "timestamp": "00:56:23,550", "timestamp_s": 3383.0}, {"text": "The event run can transition from", "timestamp": "00:56:29,330", "timestamp_s": 3389.0}, {"text": "sleeping to running. So let\u0027s see if run", "timestamp": "00:56:32,436", "timestamp_s": 3392.0}, {"text": "it\u0027s allowed. And as you can see, run it is allowed.", "timestamp": "00:56:36,516", "timestamp_s": 3396.0}, {"text": "All right, so now we have a way to check whether an event can be", "timestamp": "00:56:40,954", "timestamp_s": 3400.0}, {"text": "applied to a given hash.", "timestamp": "00:56:44,504", "timestamp_s": 3404.0}, {"text": "Finally, we can implements the FSM trigger command.", "timestamp": "00:56:50,870", "timestamp_s": 3410.0}, {"text": "All right, so now we actually are only missing", "timestamp": "00:56:56,170", "timestamp_s": 3416.0}, {"text": "the command that would allow us to actually transition", "timestamp": "00:57:00,050", "timestamp_s": 3420.0}, {"text": "a hash from one event", "timestamp": "00:57:04,410", "timestamp_s": 3424.0}, {"text": "to the other. So we have one to ask whether a transition or", "timestamp": "00:57:07,596", "timestamp_s": 3427.0}, {"text": "an event can be applied to a hash.", "timestamp": "00:57:11,152", "timestamp_s": 3431.0}, {"text": "And now we\u0027re going to have one that actually triggers that event.", "timestamp": "00:57:14,774", "timestamp_s": 3434.0}, {"text": "So to do that we\u0027re going to create a skeleton method", "timestamp": "00:57:18,336", "timestamp_s": 3438.0}, {"text": "for our new command. And this is going to be FSM trigger.", "timestamp": "00:57:22,930", "timestamp_s": 3442.0}, {"text": "We\u0027re grabbing basically the same arguments that we were grabbing", "timestamp": "00:57:27,570", "timestamp_s": 3447.0}, {"text": "with FSM allowed. So this whole block here,", "timestamp": "00:57:31,546", "timestamp_s": 3451.0}, {"text": "it\u0027s identical. We again are grabbing the state machine", "timestamp": "00:57:34,792", "timestamp_s": 3454.0}, {"text": "and this one is again going to return a boolean.", "timestamp": "00:57:38,510", "timestamp_s": 3458.0}, {"text": "So to actually do this, we now", "timestamp": "00:57:41,886", "timestamp_s": 3461.0}, {"text": "need to, as we did before, implements a", "timestamp": "00:57:45,980", "timestamp_s": 3465.0}, {"text": "method in our final state machine,", "timestamp": "00:57:50,124", "timestamp_s": 3470.0}, {"text": "finite state machine struct.", "timestamp": "00:57:53,730", "timestamp_s": 3473.0}, {"text": "So let\u0027s find our implementation up", "timestamp": "00:57:58,630", "timestamp_s": 3478.0}, {"text": "here. Okay, so we have there the allowed method", "timestamp": "00:58:03,264", "timestamp_s": 3483.0}, {"text": "that we implemented earlier, and now we\u0027re", "timestamp": "00:58:07,398", "timestamp_s": 3487.0}, {"text": "going to create a trigger method. And the trigger method, the implementation,", "timestamp": "00:58:11,498", "timestamp_s": 3491.0}, {"text": "it\u0027s very similar and it actually reuses the", "timestamp": "00:58:15,530", "timestamp_s": 3495.0}, {"text": "allowed method. So notice in here that again", "timestamp": "00:58:19,012", "timestamp_s": 3499.0}, {"text": "I am grabbing the key of the hash", "timestamp": "00:58:22,376", "timestamp_s": 3502.0}, {"text": "that I\u0027m interested in applying an event against,", "timestamp": "00:58:26,030", "timestamp_s": 3506.0}, {"text": "and then I am going to grab the event.", "timestamp": "00:58:29,688", "timestamp_s": 3509.0}, {"text": "Only remember that we said allow to return the", "timestamp": "00:58:32,552", "timestamp_s": 3512.0}, {"text": "event that you need to use for that specific current", "timestamp": "00:58:37,404", "timestamp_s": 3517.0}, {"text": "event. And I use", "timestamp": "00:58:42,410", "timestamp_s": 3522.0}, {"text": "the allowed method above to grab that event,", "timestamp": "00:58:45,708", "timestamp_s": 3525.0}, {"text": "passing the context, the key of the", "timestamp": "00:58:48,928", "timestamp_s": 3528.0}, {"text": "final state machine, of the hash and", "timestamp": "00:58:53,200", "timestamp_s": 3533.0}, {"text": "the event. And then I\u0027m going", "timestamp": "00:58:56,912", "timestamp_s": 3536.0}, {"text": "to now call h set on the target hash,", "timestamp": "00:59:00,132", "timestamp_s": 3540.0}, {"text": "and I\u0027m going to set the event field", "timestamp": "00:59:04,458", "timestamp_s": 3544.0}, {"text": "or the state field to the event that they\u0027re interested", "timestamp": "00:59:08,180", "timestamp_s": 3548.0}, {"text": "in. And again, I have this guard right here that", "timestamp": "00:59:11,460", "timestamp_s": 3551.0}, {"text": "basically it\u0027s asking whether the event is allowed by using", "timestamp": "00:59:15,000", "timestamp_s": 3555.0}, {"text": "the allowed method. And if it\u0027s so I then change", "timestamp": "00:59:18,456", "timestamp_s": 3558.0}, {"text": "the value of that field on the hash.", "timestamp": "00:59:21,864", "timestamp_s": 3561.0}, {"text": "Then I basically just return to", "timestamp": "00:59:24,962", "timestamp_s": 3564.0}, {"text": "the caller if I get an okay response.", "timestamp": "00:59:29,452", "timestamp_s": 3569.0}, {"text": "So now once we have that", "timestamp": "00:59:33,474", "timestamp_s": 3573.0}, {"text": "trigger implemented in there in the final", "timestamp": "00:59:37,312", "timestamp_s": 3577.0}, {"text": "state machine, we can go back to our", "timestamp": "00:59:41,216", "timestamp_s": 3581.0}, {"text": "FSM trigger skeleton and finish the implementation", "timestamp": "00:59:44,496", "timestamp_s": 3584.0}, {"text": "in here by simply having an allowed variable", "timestamp": "00:59:48,806", "timestamp_s": 3588.0}, {"text": "that calls the trigger method", "timestamp": "00:59:52,490", "timestamp_s": 3592.0}, {"text": "in the finite state machine struct.", "timestamp": "00:59:57,130", "timestamp_s": 3597.0}, {"text": "And I use that to return that boolean", "timestamp": "01:00:01,418", "timestamp_s": 3601.0}, {"text": "as an integer in my redis value response", "timestamp": "01:00:06,030", "timestamp_s": 3606.0}, {"text": "redis result. So with that in place,", "timestamp": "01:00:10,790", "timestamp_s": 3610.0}, {"text": "then all we have left to do is", "timestamp": "01:00:14,264", "timestamp_s": 3614.0}, {"text": "register our method. So now I\u0027m registering", "timestamp": "01:00:18,524", "timestamp_s": 3618.0}, {"text": "the trigger method with the redis module", "timestamp": "01:00:22,178", "timestamp_s": 3622.0}, {"text": "macro commands list. And again, this one,", "timestamp": "01:00:26,290", "timestamp_s": 3626.0}, {"text": "it\u0027s just like FSM created. It\u0027s a write method", "timestamp": "01:00:29,968", "timestamp_s": 3629.0}, {"text": "and it takes the first key, it\u0027s the", "timestamp": "01:00:34,230", "timestamp_s": 3634.0}, {"text": "key in position one, position zero, remember, is just the", "timestamp": "01:00:37,648", "timestamp_s": 3637.0}, {"text": "command itself. And it has two keys,", "timestamp": "01:00:41,508", "timestamp_s": 3641.0}, {"text": "the final state machine and the hash.", "timestamp": "01:00:44,842", "timestamp_s": 3644.0}, {"text": "So now with that in place, we can", "timestamp": "01:00:48,130", "timestamp_s": 3648.0}, {"text": "test again.", "timestamp": "01:00:53,590", "timestamp_s": 3653.0}, {"text": "So, okay, now we have completed the basic implementation", "timestamp": "01:00:57,270", "timestamp_s": 3657.0}, {"text": "of our toit state machine. So let\u0027s go ahead and compile the", "timestamp": "01:01:01,038", "timestamp_s": 3661.0}, {"text": "code again. And I\u0027m going to", "timestamp": "01:01:04,972", "timestamp_s": 3664.0}, {"text": "launch the redis server.", "timestamp": "01:01:08,684", "timestamp_s": 3668.0}, {"text": "And then once again, let\u0027s get to the CLI", "timestamp": "01:01:11,770", "timestamp_s": 3671.0}, {"text": "and arrow to find our FSM create.", "timestamp": "01:01:17,150", "timestamp_s": 3677.0}, {"text": "Let\u0027s just test all of our methods. So when we run FSM create,", "timestamp": "01:01:20,880", "timestamp_s": 3680.0}, {"text": "remember that that creates the job", "timestamp": "01:01:26,430", "timestamp_s": 3686.0}, {"text": "FSM custom", "timestamp": "01:01:30,084", "timestamp_s": 3690.0}, {"text": "data type, which is a finite state machine data type. So when", "timestamp": "01:01:33,620", "timestamp_s": 3693.0}, {"text": "we check the type of it, we get redis fsm,", "timestamp": "01:01:37,092", "timestamp_s": 3697.0}, {"text": "these redis fsm hash.", "timestamp": "01:01:41,590", "timestamp_s": 3701.0}, {"text": "Once again, it\u0027s a native redis hash", "timestamp": "01:01:45,190", "timestamp_s": 3705.0}, {"text": "where we are keeping our mappings of mappings", "timestamp": "01:01:49,486", "timestamp_s": 3709.0}, {"text": "of prefixes or hash prefixes to", "timestamp": "01:01:57,210", "timestamp_s": 3717.0}, {"text": "finite state machine keys.", "timestamp": "01:02:01,564", "timestamp_s": 3721.0}, {"text": "So again, we have for the sample that we\u0027ve been using,", "timestamp": "01:02:04,890", "timestamp_s": 3724.0}, {"text": "it\u0027s job for the prefix, and that maps to", "timestamp": "01:02:08,928", "timestamp_s": 3728.0}, {"text": "the job fsm key. All right,", "timestamp": "01:02:12,912", "timestamp_s": 3732.0}, {"text": "remember that we also implements the", "timestamp": "01:02:15,728", "timestamp_s": 3735.0}, {"text": "info so we can pass the", "timestamp": "01:02:19,264", "timestamp_s": 3739.0}, {"text": "name of a state machine and that will basically grab", "timestamp": "01:02:22,820", "timestamp_s": 3742.0}, {"text": "that native data type that\u0027s stored in redis and use cert", "timestamp": "01:02:26,474", "timestamp_s": 3746.0}, {"text": "JSON to convert that to a readable chunk", "timestamp": "01:02:31,780", "timestamp_s": 3751.0}, {"text": "of JSON. And if", "timestamp": "01:02:35,582", "timestamp_s": 3755.0}, {"text": "we create, let\u0027s create", "timestamp": "01:02:39,944", "timestamp_s": 3759.0}, {"text": "a hash.", "timestamp": "01:02:44,090", "timestamp_s": 3764.0}, {"text": "Here we go. We create a hash. And now we do", "timestamp": "01:02:47,450", "timestamp_s": 3767.0}, {"text": "an h get all on that hash.", "timestamp": "01:02:51,452", "timestamp_s": 3771.0}, {"text": "We should have our state", "timestamp": "01:02:55,370", "timestamp_s": 3775.0}, {"text": "set to the correct value, which is the initial state of", "timestamp": "01:03:00,688", "timestamp_s": 3780.0}, {"text": "the state machine sleeping. And then remember", "timestamp": "01:03:04,224", "timestamp_s": 3784.0}, {"text": "that we can ask the state machine", "timestamp": "01:03:07,920", "timestamp_s": 3787.0}, {"text": "whether we can transition to the different using", "timestamp": "01:03:13,010", "timestamp_s": 3793.0}, {"text": "different events. So we can ask whether we can run", "timestamp": "01:03:17,380", "timestamp_s": 3797.0}, {"text": "from sleeping. And it says yes.", "timestamp": "01:03:21,188", "timestamp_s": 3801.0}, {"text": "And what was the other one?", "timestamp": "01:03:24,470", "timestamp_s": 3804.0}, {"text": "The other one was sleep, and that\u0027s a no.", "timestamp": "01:03:28,390", "timestamp_s": 3808.0}, {"text": "So since we know that we are allowed to", "timestamp": "01:03:32,630", "timestamp_s": 3812.0}, {"text": "run, I\u0027m going to trigger the", "timestamp": "01:03:36,780", "timestamp_s": 3816.0}, {"text": "run event on our target", "timestamp": "01:03:44,170", "timestamp_s": 3824.0}, {"text": "hash. And that responded with a true.", "timestamp": "01:03:48,342", "timestamp_s": 3828.0}, {"text": "So now if we do an h, get all,", "timestamp": "01:03:52,544", "timestamp_s": 3832.0}, {"text": "remember we were in these state sleeping, and now we are in the", "timestamp": "01:03:55,376", "timestamp_s": 3835.0}, {"text": "state running. So there we go. A simple toy", "timestamp": "01:03:59,248", "timestamp_s": 3839.0}, {"text": "state machine implemented as a Redis module.", "timestamp": "01:04:03,622", "timestamp_s": 3843.0}, {"text": "And of course, all the source code for today\u0027s demo can be found under my", "timestamp": "01:04:08,930", "timestamp_s": 3848.0}, {"text": "GitHub repositories.", "timestamp": "01:04:12,628", "timestamp_s": 3852.0}, {"text": "To learn more, visit us at Redis developer, which is", "timestamp": "01:04:16,130", "timestamp_s": 3856.0}, {"text": "located at developer redis.com. These we have tons", "timestamp": "01:04:20,052", "timestamp_s": 3860.0}, {"text": "of examples for pretty much every programming language for", "timestamp": "01:04:23,194", "timestamp_s": 3863.0}, {"text": "interesting things you can do with Redis. And also, if you want", "timestamp": "01:04:26,716", "timestamp_s": 3866.0}, {"text": "to learn more about Redis, come to Redis University, where there\u0027s a variety", "timestamp": "01:04:30,364", "timestamp_s": 3870.0}, {"text": "of courses that can help you become a Redis expert in no time.", "timestamp": "01:04:34,082", "timestamp_s": 3874.0}];
              

              var tag = document.createElement('script');

              tag.src = "https://www.youtube.com/iframe_api";
              var firstScriptTag = document.getElementsByTagName('script')[0];
              firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

              // 3. This function creates an <iframe> (and YouTube player)
              //    after the API code downloads.
              var player;
              function onYouTubeIframeAPIReady() {
                player = new YT.Player('player', {
                  height: '100%',
                  width: '100%',
                  videoId: 'tAvLKsnNJVg',
                  playerVars: {
                    'playsinline': 1
                  },
                  events: {
                    'onReady': onPlayerReady,
                    // 'onStateChange': onPlayerStateChange
                  }
                });
              }
              function onPlayerReady(event) {
                console.log("Player ready");
                var sec = Number(location.href.split("#")[1]);
                if (sec){
                  player.seekTo(sec, true);
                }
                player.playVideo();
                highlightParagraph();
              }
              // find the number of the paragraph
              function findParagraph(sec){
                for (var i = 1; i < transcript.length; i++) {
                  if (transcript[i].timestamp_s > sec){
                    return i - 1;
                  }
                }
                return transcript.length - 1;
              }
              // move the video to the desired second
              function seek(sec){
                if(player){
                  player.playVideo();
                  player.seekTo(sec, true);
                }
                location.href = location.href.split("#")[0] + "#" + sec;
                highlightParagraph(sec);
              }
              // highlight the right paragraph
              var prevParagraph;
              function highlightParagraph(sec) {
                var currentTime = sec;
                if (!currentTime && player) {
                  currentTime = player.getCurrentTime();
                }
                if (!currentTime){
                  console.log("No current time")
                  return;
                }
                var currentParagraph = findParagraph(currentTime);
                if (currentParagraph !== prevParagraph){
                  prevParagraph = currentParagraph;
                  Array.from(document.getElementsByClassName("transcript-chunks")).forEach((e) => {
                    e.classList.remove('text-selected');
                  });
                  var body = document.getElementById("chunk-"+currentParagraph);
                  body.classList.add('text-selected');
                }
              }
              time_update_interval = setInterval(highlightParagraph, 1000);
            </script>
          </div>
        </div> <!-- / .row -->
      </div> <!-- / .container -->
    </section>
    

    <!-- CONTENT -->
    <section class="pt-2">
      <div class="container">
        <div class="row justify-content-center">

          <div class="col-12 mb-5">
            <h1>
              Extending Redis with Rust
            </h1>
            
            <h3 class="bg-white">
              Video size:
              <a href="javascript:void(0);" onclick="resizeVideo(25)"><i class="fe fe-zoom-out me-2"></i></a>
              <a href="javascript:void(0);" onclick="resizeVideo(50)"><i class="fe fe-zoom-in me-2"></i></a>
            </h3>
            
          </div>

          <div class="col-12 mb-5">
            <h3>
              Abstract
            </h3>
<!-- Text -->
<p>In this session, we&rsquo;ll live-code a Redis Module in Rust that implements a Finite State Machine (FSM), we&rsquo;ll roughly follow these steps:
* Intro to Redis ~ 3 minutes
* Intro to Redis Modules ~ 2 minutes
* Bootstrap our project ~ 3-5 minutes
* Deploy skeleton module to Redis on Docker ~ 3-5 minutes
* TDD loop `till completion - Rest of the time!
  * Creating a new data structure/data type in Redis
  * Adding commands to manage our FST - one at a time</p>
<!-- End Text -->
          </div>

          
          

          <div class="col-12 mb-5">
            <h3>
              Summary
            </h3>
            <ul>
              
              <li>
                Welcome to extending Redis with Rust. I am a developer advocate with Redis. You can reach me at bsb@redis. com. And you can also check out my GitHub repos.

              </li>
              
              <li>
                Redis stands for remote dictionary server. In Redis it's really an in memory first full blown database with optional persistence. Redis provides many data types. You can extend Redis by adding new data types and new commands. We promote seven different modules that extend redis.

              </li>
              
              <li>
                Let's take a quick tour of redis by starting a Redis server. The most basic data type in Redis is a string. We also have hashes. Pretty much any binary piece of data can be stored in a redis key.

              </li>
              
              <li>
                Redis has been developing a Redis modules API bridge in rust. Why rust? Because it shares the philosophy of extreme carefulness in memory management and performance. Any memory leak can compromise the health of these redis server. So safe memory management is a must.

              </li>
              
              <li>
                All right, so we're going to kick off our demo by creating a new library using the cargo new command. I'm going to name my library Redis FSM for redis finite state machine. Let's CD to that folder and use these tree command to quickly inspect what we have.

              </li>
              
              <li>
                We're going to create a dynamic system library to be loaded in red FSM module. First we'll tackle the FSM create command. Now let's start the redis server and load our newly created module.

              </li>
              
              <li>
                FSM intro takes a context instead of redis arguments, these redis strings and returns a result. Now let's see if our redis command FSm info works correctly so I can pass the key that we just created and we get our XMl back.

              </li>
              
              <li>
                Brian: When a new hash matching the given prefix, it's added to Redis. We want to intercept that and set the initial state field given a state machine that matches the prefix of the hash. With that in place, we can now test the event functionality.

              </li>
              
              <li>
                So back on the CLI, let's reload our final state machine, finite state machine JSON. Let's actually inspect the hash of mappings. Notice that we have two events, one on the redis hash, but that one doesn't match our prefix. And then for the actual data one, the job one.

              </li>
              
              <li>
                Now we can move on to implements the FSM allowed command. This method allows us to check whether an event can be applied to an object to transition to a different state. We are also going to register that command in our Redis module command declaration.

              </li>
              
              <li>
                A simple toy state machine implemented as a Redis module. All the source code for today's demo can be found under my GitHub repositories. To learn more about Redis, visit us at Redis developer.
              </li>
              
            </ul>
          </div>

          <div class="col-12 mb-5">
            <h3>
              Transcript
            </h3>
            <span class="text-muted">
              This transcript was autogenerated. To make changes, <a href="https://github.com/conf42/src/edit/main/./assemblyai/tAvLKsnNJVg.srt" target="_blank">submit a PR</a>.
            </span>
            <div>
            
            <span id="chunk-0" class="transcript-chunks" onclick="console.log('00:00:17,450'); seek(17.0)">
              Hey everybody, this is Brian Sambodden. Welcome to extending
            </span>
            
            <span id="chunk-1" class="transcript-chunks" onclick="console.log('00:00:20,938'); seek(20.0)">
              Redis with Rust. I am a developer advocate with Redis.
            </span>
            
            <span id="chunk-2" class="transcript-chunks" onclick="console.log('00:00:25,018'); seek(25.0)">
              You can reach me at bsb@redis.com on Twitter at bsbodin.
            </span>
            
            <span id="chunk-3" class="transcript-chunks" onclick="console.log('00:00:28,978'); seek(28.0)">
              And you can also check out my GitHub repos. So Redis
            </span>
            
            <span id="chunk-4" class="transcript-chunks" onclick="console.log('00:00:32,578'); seek(32.0)">
              Redis, it's a popular data platform that it's
            </span>
            
            <span id="chunk-5" class="transcript-chunks" onclick="console.log('00:00:36,530'); seek(36.0)">
              mostly known as a very powerful and fast cache.
            </span>
            
            <span id="chunk-6" class="transcript-chunks" onclick="console.log('00:00:39,842'); seek(39.0)">
              But Redis is much more than that. So today I want to give you a
            </span>
            
            <span id="chunk-7" class="transcript-chunks" onclick="console.log('00:00:42,464'); seek(42.0)">
              quick tour of Redis before we look at how to extend Redis
            </span>
            
            <span id="chunk-8" class="transcript-chunks" onclick="console.log('00:00:46,102'); seek(46.0)">
              for your own benefit. So Redis stands for remote dictionary
            </span>
            
            <span id="chunk-9" class="transcript-chunks" onclick="console.log('00:00:50,022'); seek(50.0)">
              server. In Redis it's
            </span>
            
            <span id="chunk-10" class="transcript-chunks" onclick="console.log('00:00:54,058'); seek(54.0)">
              really an in memory first full blown database with
            </span>
            
            <span id="chunk-11" class="transcript-chunks" onclick="console.log('00:00:57,812'); seek(57.0)">
              optional persistence out of the box.
            </span>
            
            <span id="chunk-12" class="transcript-chunks" onclick="console.log('00:01:00,820'); seek(60.0)">
              Redis provides many data types. In Redis
            </span>
            
            <span id="chunk-13" class="transcript-chunks" onclick="console.log('00:01:04,398'); seek(64.0)">
              is classified as a key value database. But the difference
            </span>
            
            <span id="chunk-14" class="transcript-chunks" onclick="console.log('00:01:08,376'); seek(68.0)">
              between redis and most key value databases or key value
            </span>
            
            <span id="chunk-15" class="transcript-chunks" onclick="console.log('00:01:12,328'); seek(72.0)">
              stores is that the value part in redis can be
            </span>
            
            <span id="chunk-16" class="transcript-chunks" onclick="console.log('00:01:15,772'); seek(75.0)">
              anything you can dream of out of the box. You get strings,
            </span>
            
            <span id="chunk-17" class="transcript-chunks" onclick="console.log('00:01:20,890'); seek(80.0)">
              bitmaps, bit fields, hashes,
            </span>
            
            <span id="chunk-18" class="transcript-chunks" onclick="console.log('00:01:24,066'); seek(84.0)">
              list sets, sorted sets,
            </span>
            
            <span id="chunk-19" class="transcript-chunks" onclick="console.log('00:01:26,850'); seek(86.0)">
              geospatial indexes, hyperlog logs, funny name and
            </span>
            
            <span id="chunk-20" class="transcript-chunks" onclick="console.log('00:01:30,896'); seek(90.0)">
              streams. But there's more, and those are all
            </span>
            
            <span id="chunk-21" class="transcript-chunks" onclick="console.log('00:01:34,368'); seek(94.0)">
              the values that can be addressed as using a key in
            </span>
            
            <span id="chunk-22" class="transcript-chunks" onclick="console.log('00:01:38,112'); seek(98.0)">
              Redis. But like I said, there is much more than that.
            </span>
            
            <span id="chunk-23" class="transcript-chunks" onclick="console.log('00:01:41,076'); seek(101.0)">
              You can extend Redis by adding new
            </span>
            
            <span id="chunk-24" class="transcript-chunks" onclick="console.log('00:01:45,348'); seek(105.0)">
              data types and new commands to manipulate those data types
            </span>
            
            <span id="chunk-25" class="transcript-chunks" onclick="console.log('00:01:49,706'); seek(109.0)">
              ourselves as a company we promote seven different
            </span>
            
            <span id="chunk-26" class="transcript-chunks" onclick="console.log('00:01:53,284'); seek(113.0)">
              modules that extend redis with new data types and commands.
            </span>
            
            <span id="chunk-27" class="transcript-chunks" onclick="console.log('00:01:56,750'); seek(116.0)">
              Those are Redis JSON Redis search, redis,
            </span>
            
            <span id="chunk-28" class="transcript-chunks" onclick="console.log('00:01:59,662'); seek(119.0)">
              graph, time series, AI gears and bloom. And they
            </span>
            
            <span id="chunk-29" class="transcript-chunks" onclick="console.log('00:02:03,512'); seek(123.0)">
              extend Redis to basically behave like a document database,
            </span>
            
            <span id="chunk-30" class="transcript-chunks" onclick="console.log('00:02:06,670'); seek(126.0)">
              a full blown search engine, a graph database,
            </span>
            
            <span id="chunk-31" class="transcript-chunks" onclick="console.log('00:02:10,114'); seek(130.0)">
              et cetera. And now for a quick
            </span>
            
            <span id="chunk-32" class="transcript-chunks" onclick="console.log('00:02:13,212'); seek(133.0)">
              tour of redis.
            </span>
            
            <span id="chunk-33" class="transcript-chunks" onclick="console.log('00:02:16,650'); seek(136.0)">
              So before we get started with our module building, let's take a quick
            </span>
            
            <span id="chunk-34" class="transcript-chunks" onclick="console.log('00:02:20,416'); seek(140.0)">
              tour of redis by starting a Redis server.
            </span>
            
            <span id="chunk-35" class="transcript-chunks" onclick="console.log('00:02:24,430'); seek(144.0)">
              And I'm running Redis 7.0.4 which is running
            </span>
            
            <span id="chunk-36" class="transcript-chunks" onclick="console.log('00:02:28,256'); seek(148.0)">
              on port 63 79 which is the default Redis board.
            </span>
            
            <span id="chunk-37" class="transcript-chunks" onclick="console.log('00:02:32,190'); seek(152.0)">
              And on a separate terminal I'm going to start the Redis
            </span>
            
            <span id="chunk-38" class="transcript-chunks" onclick="console.log('00:02:35,658'); seek(155.0)">
              CLI which is the command line interface for Redis, and by
            </span>
            
            <span id="chunk-39" class="transcript-chunks" onclick="console.log('00:02:39,508'); seek(159.0)">
              default it connects to the localhost 62 79. So one
            </span>
            
            <span id="chunk-40" class="transcript-chunks" onclick="console.log('00:02:43,508'); seek(163.0)">
              of the basic data types or the most basic data type that you can keep
            </span>
            
            <span id="chunk-41" class="transcript-chunks" onclick="console.log('00:02:46,728'); seek(166.0)">
              in Redis, it's a string, and that is the basic
            </span>
            
            <span id="chunk-42" class="transcript-chunks" onclick="console.log('00:02:50,782'); seek(170.0)">
              level key that you have in Redis. So I'm going to
            </span>
            
            <span id="chunk-43" class="transcript-chunks" onclick="console.log('00:02:54,856'); seek(174.0)">
              create a key called actor column one
            </span>
            
            <span id="chunk-44" class="transcript-chunks" onclick="console.log('00:02:58,888'); seek(178.0)">
              and give it the value covey smolders. Now, in Redis,
            </span>
            
            <span id="chunk-45" class="transcript-chunks" onclick="console.log('00:03:03,058'); seek(183.0)">
              it's very typical to create your own namespace for your keys by
            </span>
            
            <span id="chunk-46" class="transcript-chunks" onclick="console.log('00:03:07,132'); seek(187.0)">
              using a separator like the column in my case.
            </span>
            
            <span id="chunk-47" class="transcript-chunks" onclick="console.log('00:03:10,448'); seek(190.0)">
              So I can retrieve my key back from
            </span>
            
            <span id="chunk-48" class="transcript-chunks" onclick="console.log('00:03:13,920'); seek(193.0)">
              Redis, and it gives me the string that I set
            </span>
            
            <span id="chunk-49" class="transcript-chunks" onclick="console.log('00:03:17,440'); seek(197.0)">
              copy's molders. And I can also inspect a key
            </span>
            
            <span id="chunk-50" class="transcript-chunks" onclick="console.log('00:03:21,124'); seek(201.0)">
              to see what value it's holding. In this case,
            </span>
            
            <span id="chunk-51" class="transcript-chunks" onclick="console.log('00:03:24,516'); seek(204.0)">
              it's a string. Let's set another key
            </span>
            
            <span id="chunk-52" class="transcript-chunks" onclick="console.log('00:03:28,516'); seek(208.0)">
              here. Actor two. Let's make this one.
            </span>
            
            <span id="chunk-53" class="transcript-chunks" onclick="console.log('00:03:32,084'); seek(212.0)">
              Karen Gillen. As you can see, I'm using
            </span>
            
            <span id="chunk-54" class="transcript-chunks" onclick="console.log('00:03:35,800'); seek(215.0)">
              Marvel characters in here, and again, I can retrieve the value
            </span>
            
            <span id="chunk-55" class="transcript-chunks" onclick="console.log('00:03:40,072'); seek(220.0)">
              of that key.
            </span>
            
            <span id="chunk-56" class="transcript-chunks" onclick="console.log('00:03:42,950'); seek(222.0)">
              And if, for example, I try to retrieve a value of a key that doesn't
            </span>
            
            <span id="chunk-57" class="transcript-chunks" onclick="console.log('00:03:46,802'); seek(226.0)">
              exist, I get a nil back.
            </span>
            
            <span id="chunk-58" class="transcript-chunks" onclick="console.log('00:03:50,330'); seek(230.0)">
              And you can also set, for example,
            </span>
            
            <span id="chunk-59" class="transcript-chunks" onclick="console.log('00:03:55,530'); seek(235.0)">
              encoded strings, escape strings. Pretty much
            </span>
            
            <span id="chunk-60" class="transcript-chunks" onclick="console.log('00:03:59,776'); seek(239.0)">
              any binary piece of data can be stored in a redis key.
            </span>
            
            <span id="chunk-61" class="transcript-chunks" onclick="console.log('00:04:04,272'); seek(244.0)">
              So I can say get actor three.
            </span>
            
            <span id="chunk-62" class="transcript-chunks" onclick="console.log('00:04:08,016'); seek(248.0)">
              And you can see my wonderful misspelling
            </span>
            
            <span id="chunk-63" class="transcript-chunks" onclick="console.log('00:04:11,946'); seek(251.0)">
              of Benedict Cumberbatch's name.
            </span>
            
            <span id="chunk-64" class="transcript-chunks" onclick="console.log('00:04:15,330'); seek(255.0)">
              You can see here that I can also pass.
            </span>
            
            <span id="chunk-65" class="transcript-chunks" onclick="console.log('00:04:19,300'); seek(259.0)">
              For example, I can set a key passing
            </span>
            
            <span id="chunk-66" class="transcript-chunks" onclick="console.log('00:04:22,714'); seek(262.0)">
              the nx flag that basically means set it if it
            </span>
            
            <span id="chunk-67" class="transcript-chunks" onclick="console.log('00:04:26,008'); seek(266.0)">
              doesn't exist. So in our case, that's going to
            </span>
            
            <span id="chunk-68" class="transcript-chunks" onclick="console.log('00:04:30,152'); seek(270.0)">
              have no effect on the original set value.
            </span>
            
            <span id="chunk-69" class="transcript-chunks" onclick="console.log('00:04:33,990'); seek(273.0)">
              But if I pass the xx flag,
            </span>
            
            <span id="chunk-70" class="transcript-chunks" onclick="console.log('00:04:38,410'); seek(278.0)">
              then it will override the value that was there before.
            </span>
            
            <span id="chunk-71" class="transcript-chunks" onclick="console.log('00:04:43,450'); seek(283.0)">
              So in Redis, I can list all the keys
            </span>
            
            <span id="chunk-72" class="transcript-chunks" onclick="console.log('00:04:47,314'); seek(287.0)">
              by passing the keys command in star.
            </span>
            
            <span id="chunk-73" class="transcript-chunks" onclick="console.log('00:04:50,750'); seek(290.0)">
              And that's obviously not recommended in production, since thread is
            </span>
            
            <span id="chunk-74" class="transcript-chunks" onclick="console.log('00:04:54,400'); seek(294.0)">
              meant to hold millions or billions of keys.
            </span>
            
            <span id="chunk-75" class="transcript-chunks" onclick="console.log('00:04:58,054'); seek(298.0)">
              But it's okay in debugging session like this.
            </span>
            
            <span id="chunk-76" class="transcript-chunks" onclick="console.log('00:05:01,556'); seek(301.0)">
              So I can also delete a key,
            </span>
            
            <span id="chunk-77" class="transcript-chunks" onclick="console.log('00:05:06,210'); seek(306.0)">
              and I can check if a key exists in
            </span>
            
            <span id="chunk-78" class="transcript-chunks" onclick="console.log('00:05:09,428'); seek(309.0)">
              the system.
            </span>
            
            <span id="chunk-79" class="transcript-chunks" onclick="console.log('00:05:13,910'); seek(313.0)">
              All right, so that is the most basic data type in redis.
            </span>
            
            <span id="chunk-80" class="transcript-chunks" onclick="console.log('00:05:17,710'); seek(317.0)">
              We also have hashes.
            </span>
            
            <span id="chunk-81" class="transcript-chunks" onclick="console.log('00:05:21,614'); seek(321.0)">
              In hashes. It's the very typical data
            </span>
            
            <span id="chunk-82" class="transcript-chunks" onclick="console.log('00:05:26,316'); seek(326.0)">
              type used for mapping programming language constructs
            </span>
            
            <span id="chunk-83" class="transcript-chunks" onclick="console.log('00:05:30,498'); seek(330.0)">
              like structs or classes objects
            </span>
            
            <span id="chunk-84" class="transcript-chunks" onclick="console.log('00:05:34,114'); seek(334.0)">
              to redis. So in these example, I'm going to use the hmset
            </span>
            
            <span id="chunk-85" class="transcript-chunks" onclick="console.log('00:05:38,322'); seek(338.0)">
              command, which sets multiple values on a hash,
            </span>
            
            <span id="chunk-86" class="transcript-chunks" onclick="console.log('00:05:41,810'); seek(341.0)">
              and I'm going to use the actor one key.
            </span>
            
            <span id="chunk-87" class="transcript-chunks" onclick="console.log('00:05:45,392'); seek(345.0)">
              So I'm going to override the key that we had in there, and I'm going
            </span>
            
            <span id="chunk-88" class="transcript-chunks" onclick="console.log('00:05:48,384'); seek(348.0)">
              to pass a name value pairs for an actor.
            </span>
            
            <span id="chunk-89" class="transcript-chunks" onclick="console.log('00:05:52,442'); seek(352.0)">
              And in this case, I'm passing the name Anthony Mackey.
            </span>
            
            <span id="chunk-90" class="transcript-chunks" onclick="console.log('00:05:56,202'); seek(356.0)">
              Year of birth, 1978. Place of birth, New Orleans, New Orleans,
            </span>
            
            <span id="chunk-91" class="transcript-chunks" onclick="console.log('00:06:00,186'); seek(360.0)">
              USA. All right, so I can now check my keys again,
            </span>
            
            <span id="chunk-92" class="transcript-chunks" onclick="console.log('00:06:05,030'); seek(365.0)">
              and I can do an h get all. So give me all the name value
            </span>
            
            <span id="chunk-93" class="transcript-chunks" onclick="console.log('00:06:09,240'); seek(369.0)">
              pairs from a hash actor one,
            </span>
            
            <span id="chunk-94" class="transcript-chunks" onclick="console.log('00:06:13,752'); seek(373.0)">
              and you can see that I gave my name value pairs
            </span>
            
            <span id="chunk-95" class="transcript-chunks" onclick="console.log('00:06:17,250'); seek(377.0)">
              back out.
            </span>
            
            <span id="chunk-96" class="transcript-chunks" onclick="console.log('00:06:21,930'); seek(381.0)">
              Hashes are kind of the workhorse of Redis. So, for example,
            </span>
            
            <span id="chunk-97" class="transcript-chunks" onclick="console.log('00:06:25,580'); seek(385.0)">
              I can say h
            </span>
            
            <span id="chunk-98" class="transcript-chunks" onclick="console.log('00:06:30,000'); seek(390.0)">
              exists,
            </span>
            
            <span id="chunk-99" class="transcript-chunks" onclick="console.log('00:06:35,150'); seek(395.0)">
              actor one, and pass
            </span>
            
            <span id="chunk-100" class="transcript-chunks" onclick="console.log('00:06:38,768'); seek(398.0)">
              the string character, and it will tell me whether
            </span>
            
            <span id="chunk-101" class="transcript-chunks" onclick="console.log('00:06:42,580'); seek(402.0)">
              that hash has been set, that value has
            </span>
            
            <span id="chunk-102" class="transcript-chunks" onclick="console.log('00:06:45,748'); seek(405.0)">
              been set in that hash. So, for example, now let's go ahead
            </span>
            
            <span id="chunk-103" class="transcript-chunks" onclick="console.log('00:06:49,028'); seek(409.0)">
              and set that individual value. So I'm doing
            </span>
            
            <span id="chunk-104" class="transcript-chunks" onclick="console.log('00:06:52,772'); seek(412.0)">
              a hn set actor one, passing the character
            </span>
            
            <span id="chunk-105" class="transcript-chunks" onclick="console.log('00:06:56,958'); seek(416.0)">
              key and the falcon value or falcon as the value.
            </span>
            
            <span id="chunk-106" class="transcript-chunks" onclick="console.log('00:07:00,952'); seek(420.0)">
              And now if I check again for existence of that flag,
            </span>
            
            <span id="chunk-107" class="transcript-chunks" onclick="console.log('00:07:04,686'); seek(424.0)">
              of that field, you can see that I get a one instead of a zero.
            </span>
            
            <span id="chunk-108" class="transcript-chunks" onclick="console.log('00:07:08,170'); seek(428.0)">
              And once again, I can do an h get
            </span>
            
            <span id="chunk-109" class="transcript-chunks" onclick="console.log('00:07:12,636'); seek(432.0)">
              all for that key, and I get all my values back.
            </span>
            
            <span id="chunk-110" class="transcript-chunks" onclick="console.log('00:07:15,820'); seek(435.0)">
              So knowing those two specific
            </span>
            
            <span id="chunk-111" class="transcript-chunks" onclick="console.log('00:07:19,488'); seek(439.0)">
              data types, it's all we need for our purposes today.
            </span>
            
            <span id="chunk-112" class="transcript-chunks" onclick="console.log('00:07:26,190'); seek(446.0)">
              Okay, so let's talk about the redis modules API. And the
            </span>
            
            <span id="chunk-113" class="transcript-chunks" onclick="console.log('00:07:29,728'); seek(449.0)">
              Redis modules API allows you to extend the functionality of redis
            </span>
            
            <span id="chunk-114" class="transcript-chunks" onclick="console.log('00:07:33,370'); seek(453.0)">
              by adding new data type or adding new commands.
            </span>
            
            <span id="chunk-115" class="transcript-chunks" onclick="console.log('00:07:37,250'); seek(457.0)">
              Until recently, the Redis modules API was only available to
            </span>
            
            <span id="chunk-116" class="transcript-chunks" onclick="console.log('00:07:40,948'); seek(460.0)">
              c programmers. But luckily for us, in the
            </span>
            
            <span id="chunk-117" class="transcript-chunks" onclick="console.log('00:07:44,248'); seek(464.0)">
              last couple of years, Redis has been developing a Redis modules API
            </span>
            
            <span id="chunk-118" class="transcript-chunks" onclick="console.log('00:07:48,286'); seek(468.0)">
              bridge in rust. And why rust?
            </span>
            
            <span id="chunk-119" class="transcript-chunks" onclick="console.log('00:07:52,670'); seek(472.0)">
              Because it shares the philosophy of extreme
            </span>
            
            <span id="chunk-120" class="transcript-chunks" onclick="console.log('00:07:56,994'); seek(476.0)">
              carefulness in memory management and performance.
            </span>
            
            <span id="chunk-121" class="transcript-chunks" onclick="console.log('00:08:00,802'); seek(480.0)">
              Redis modules run in the same memory space as Redis. Therefore, any memory
            </span>
            
            <span id="chunk-122" class="transcript-chunks" onclick="console.log('00:08:04,866'); seek(484.0)">
              leak can compromise the health of these redis server and create a
            </span>
            
            <span id="chunk-123" class="transcript-chunks" onclick="console.log('00:08:08,208'); seek(488.0)">
              catastrophic condition for the server. So safe memory
            </span>
            
            <span id="chunk-124" class="transcript-chunks" onclick="console.log('00:08:11,382'); seek(491.0)">
              management, it's a must. In Redis modules,
            </span>
            
            <span id="chunk-125" class="transcript-chunks" onclick="console.log('00:08:15,470'); seek(495.0)">
              there is a rust crate that wraps our
            </span>
            
            <span id="chunk-126" class="transcript-chunks" onclick="console.log('00:08:19,248'); seek(499.0)">
              Redis modules API bridge, and you can find that
            </span>
            
            <span id="chunk-127" class="transcript-chunks" onclick="console.log('00:08:22,788'); seek(502.0)">
              on crates IO. And we're going to be using that today to build
            </span>
            
            <span id="chunk-128" class="transcript-chunks" onclick="console.log('00:08:26,116'); seek(506.0)">
              our demo. We're going to create
            </span>
            
            <span id="chunk-129" class="transcript-chunks" onclick="console.log('00:08:29,620'); seek(509.0)">
              a finite state machine as a Redis module that's
            </span>
            
            <span id="chunk-130" class="transcript-chunks" onclick="console.log('00:08:32,874'); seek(512.0)">
              going to be in charge of managing state in Redis hashes,
            </span>
            
            <span id="chunk-131" class="transcript-chunks" onclick="console.log('00:08:36,390'); seek(516.0)">
              and we're going to name it Redis FSM, and we're going to use the
            </span>
            
            <span id="chunk-132" class="transcript-chunks" onclick="console.log('00:08:40,264'); seek(520.0)">
              Redis modules crate that we shown previously.
            </span>
            
            <span id="chunk-133" class="transcript-chunks" onclick="console.log('00:08:45,590'); seek(525.0)">
              So these finite state machine, it's an entity that models and
            </span>
            
            <span id="chunk-134" class="transcript-chunks" onclick="console.log('00:08:49,308'); seek(529.0)">
              controls behavior for an entity. So we define a set of possible
            </span>
            
            <span id="chunk-135" class="transcript-chunks" onclick="console.log('00:08:52,764'); seek(532.0)">
              states, the transitions between those states and the events
            </span>
            
            <span id="chunk-136" class="transcript-chunks" onclick="console.log('00:08:55,938'); seek(535.0)">
              that trigger those transitions. And why
            </span>
            
            <span id="chunk-137" class="transcript-chunks" onclick="console.log('00:08:59,552'); seek(539.0)">
              are we targeting redis hashes? Because redis hashes are typically
            </span>
            
            <span id="chunk-138" class="transcript-chunks" onclick="console.log('00:09:03,126'); seek(543.0)">
              used to map objects from a programming language into redis
            </span>
            
            <span id="chunk-139" class="transcript-chunks" onclick="console.log('00:09:06,998'); seek(546.0)">
              if you're using redis for persistence. So our redis
            </span>
            
            <span id="chunk-140" class="transcript-chunks" onclick="console.log('00:09:10,378'); seek(550.0)">
              FSM module will store a generic FSM definition that we
            </span>
            
            <span id="chunk-141" class="transcript-chunks" onclick="console.log('00:09:13,828'); seek(553.0)">
              would initially create as JSON, and these stored as
            </span>
            
            <span id="chunk-142" class="transcript-chunks" onclick="console.log('00:09:17,540'); seek(557.0)">
              a specific redis data type,
            </span>
            
            <span id="chunk-143" class="transcript-chunks" onclick="console.log('00:09:20,930'); seek(560.0)">
              the definition will contain the set of states which
            </span>
            
            <span id="chunk-144" class="transcript-chunks" onclick="console.log('00:09:25,096'); seek(565.0)">
              type of hashes it applies to by their prefix,
            </span>
            
            <span id="chunk-145" class="transcript-chunks" onclick="console.log('00:09:29,150'); seek(569.0)">
              the name of the field that will be used to persist the
            </span>
            
            <span id="chunk-146" class="transcript-chunks" onclick="console.log('00:09:32,552'); seek(572.0)">
              state into the hashes and the possible transitions and events.
            </span>
            
            <span id="chunk-147" class="transcript-chunks" onclick="console.log('00:09:38,330'); seek(578.0)">
              So imagine this simple state machine. We're going to be using the same
            </span>
            
            <span id="chunk-148" class="transcript-chunks" onclick="console.log('00:09:41,852'); seek(581.0)">
              one during the demos, we have three states,
            </span>
            
            <span id="chunk-149" class="transcript-chunks" onclick="console.log('00:09:45,340'); seek(585.0)">
              sleeping, running and cleaning. And notice that the events in green
            </span>
            
            <span id="chunk-150" class="transcript-chunks" onclick="console.log('00:09:49,292'); seek(589.0)">
              allow you to transition from a state to another. So for
            </span>
            
            <span id="chunk-151" class="transcript-chunks" onclick="console.log('00:09:52,528'); seek(592.0)">
              example, from sleeping to running, the run event triggers that transition.
            </span>
            
            <span id="chunk-152" class="transcript-chunks" onclick="console.log('00:09:56,486'); seek(596.0)">
              From running back to sleeping, the sleep event triggers a transition
            </span>
            
            <span id="chunk-153" class="transcript-chunks" onclick="console.log('00:10:00,102'); seek(600.0)">
              from cleaning to sleeping. The sleep event also triggers a transition,
            </span>
            
            <span id="chunk-154" class="transcript-chunks" onclick="console.log('00:10:03,482'); seek(603.0)">
              and from running to cleaning, the clean event triggers that transition.
            </span>
            
            <span id="chunk-155" class="transcript-chunks" onclick="console.log('00:10:07,434'); seek(607.0)">
              So here is a bigger picture of the
            </span>
            
            <span id="chunk-156" class="transcript-chunks" onclick="console.log('00:10:11,028'); seek(611.0)">
              scheme that we're setting up in here. So we have a definition of a
            </span>
            
            <span id="chunk-157" class="transcript-chunks" onclick="console.log('00:10:14,872'); seek(614.0)">
              state machine on the top left corner,
            </span>
            
            <span id="chunk-158" class="transcript-chunks" onclick="console.log('00:10:18,462'); seek(618.0)">
              which we're going to represent as JSON. That JSON
            </span>
            
            <span id="chunk-159" class="transcript-chunks" onclick="console.log('00:10:22,158'); seek(622.0)">
              is going to be turned into a binary redis
            </span>
            
            <span id="chunk-160" class="transcript-chunks" onclick="console.log('00:10:26,242'); seek(626.0)">
              type that's going to be stored by the module in Redis. And we're
            </span>
            
            <span id="chunk-161" class="transcript-chunks" onclick="console.log('00:10:30,114'); seek(630.0)">
              going to have two commands on the left,
            </span>
            
            <span id="chunk-162" class="transcript-chunks" onclick="console.log('00:10:33,290'); seek(633.0)">
              FSM create to create our finite state machine data
            </span>
            
            <span id="chunk-163" class="transcript-chunks" onclick="console.log('00:10:37,872'); seek(637.0)">
              type in redis and a FSM info to read it
            </span>
            
            <span id="chunk-164" class="transcript-chunks" onclick="console.log('00:10:41,888'); seek(641.0)">
              back as JSON again. Then we're going to have
            </span>
            
            <span id="chunk-165" class="transcript-chunks" onclick="console.log('00:10:46,384'); seek(646.0)">
              two commands to basically do most of the interaction with
            </span>
            
            <span id="chunk-166" class="transcript-chunks" onclick="console.log('00:10:50,560'); seek(650.0)">
              the state machine and the hashes that the state
            </span>
            
            <span id="chunk-167" class="transcript-chunks" onclick="console.log('00:10:53,812'); seek(653.0)">
              machine applies to. One of them is going to be FSM allowed,
            </span>
            
            <span id="chunk-168" class="transcript-chunks" onclick="console.log('00:10:57,338'); seek(657.0)">
              which is going to interrogate a state machine hash completion,
            </span>
            
            <span id="chunk-169" class="transcript-chunks" onclick="console.log('00:11:00,906'); seek(660.0)">
              whether a specific event can
            </span>
            
            <span id="chunk-170" class="transcript-chunks" onclick="console.log('00:11:04,008'); seek(664.0)">
              be applied to the system and one that actually applies
            </span>
            
            <span id="chunk-171" class="transcript-chunks" onclick="console.log('00:11:07,502'); seek(667.0)">
              the event, which would be FSM trigger and these.
            </span>
            
            <span id="chunk-172" class="transcript-chunks" onclick="console.log('00:11:11,016'); seek(671.0)">
              There will also be an implied event
            </span>
            
            <span id="chunk-173" class="transcript-chunks" onclick="console.log('00:11:15,564'); seek(675.0)">
              transition or initial state setting that
            </span>
            
            <span id="chunk-174" class="transcript-chunks" onclick="console.log('00:11:19,196'); seek(679.0)">
              will be done when a new hash,
            </span>
            
            <span id="chunk-175" class="transcript-chunks" onclick="console.log('00:11:22,466'); seek(682.0)">
              it's saved in the system into Redis and our module
            </span>
            
            <span id="chunk-176" class="transcript-chunks" onclick="console.log('00:11:26,514'); seek(686.0)">
              is going to detect that the state
            </span>
            
            <span id="chunk-177" class="transcript-chunks" onclick="console.log('00:11:30,064'); seek(690.0)">
              field is not in there and set the initial state
            </span>
            
            <span id="chunk-178" class="transcript-chunks" onclick="console.log('00:11:33,664'); seek(693.0)">
              of the hash. So that way we have the beginning of
            </span>
            
            <span id="chunk-179" class="transcript-chunks" onclick="console.log('00:11:37,456'); seek(697.0)">
              our state machine functionality.
            </span>
            
            <span id="chunk-180" class="transcript-chunks" onclick="console.log('00:11:40,886'); seek(700.0)">
              So in our case of the example on screen, it would be the
            </span>
            
            <span id="chunk-181" class="transcript-chunks" onclick="console.log('00:11:44,432'); seek(704.0)">
              sleeping state. So if a hash is saved to the system and the sleeping
            </span>
            
            <span id="chunk-182" class="transcript-chunks" onclick="console.log('00:11:48,522'); seek(708.0)">
              state is not set, or the state field is not set, then we set it
            </span>
            
            <span id="chunk-183" class="transcript-chunks" onclick="console.log('00:11:52,148'); seek(712.0)">
              to sleeping. And here's the JSON document
            </span>
            
            <span id="chunk-184" class="transcript-chunks" onclick="console.log('00:11:55,822'); seek(715.0)">
              for our sample FSM definition.
            </span>
            
            <span id="chunk-185" class="transcript-chunks" onclick="console.log('00:11:59,990'); seek(719.0)">
              All right, so we're going to kick off our demo by creating a new library
            </span>
            
            <span id="chunk-186" class="transcript-chunks" onclick="console.log('00:12:04,030'); seek(724.0)">
              using the cargo new command. We're going to pass the lib
            </span>
            
            <span id="chunk-187" class="transcript-chunks" onclick="console.log('00:12:07,842'); seek(727.0)">
              flag. I'm going to name my library Redis
            </span>
            
            <span id="chunk-188" class="transcript-chunks" onclick="console.log('00:12:12,082'); seek(732.0)">
              FSM for redis finite state machine,
            </span>
            
            <span id="chunk-189" class="transcript-chunks" onclick="console.log('00:12:15,938'); seek(735.0)">
              and I'm going to put it in a folder called redis FSM
            </span>
            
            <span id="chunk-190" class="transcript-chunks" onclick="console.log('00:12:20,134'); seek(740.0)">
              all in camel case. As you can
            </span>
            
            <span id="chunk-191" class="transcript-chunks" onclick="console.log('00:12:23,632'); seek(743.0)">
              see, we have the output of the library being created
            </span>
            
            <span id="chunk-192" class="transcript-chunks" onclick="console.log('00:12:28,214'); seek(748.0)">
              and let's CD to that folder and
            </span>
            
            <span id="chunk-193" class="transcript-chunks" onclick="console.log('00:12:33,296'); seek(753.0)">
              use these tree command to quickly inspect what we have. So we have a cargo
            </span>
            
            <span id="chunk-194" class="transcript-chunks" onclick="console.log('00:12:36,682'); seek(756.0)">
              tomo file and we have a lib rs file.
            </span>
            
            <span id="chunk-195" class="transcript-chunks" onclick="console.log('00:12:40,778'); seek(760.0)">
              Let's quickly take a look at those. I'm going to inspect
            </span>
            
            <span id="chunk-196" class="transcript-chunks" onclick="console.log('00:12:45,742'); seek(765.0)">
              the cargo tumble and we just have our package declaration for redis
            </span>
            
            <span id="chunk-197" class="transcript-chunks" onclick="console.log('00:12:49,246'); seek(769.0)">
              FSM. And let's do the same thing
            </span>
            
            <span id="chunk-198" class="transcript-chunks" onclick="console.log('00:12:52,632'); seek(772.0)">
              with the library file.
            </span>
            
            <span id="chunk-199" class="transcript-chunks" onclick="console.log('00:12:55,874'); seek(775.0)">
              And in that one we have
            </span>
            
            <span id="chunk-200" class="transcript-chunks" onclick="console.log('00:12:59,372'); seek(779.0)">
              a simple function to tdd two unsigned integers.
            </span>
            
            <span id="chunk-201" class="transcript-chunks" onclick="console.log('00:13:03,570'); seek(783.0)">
              And we have a simple test and we're going to get rid of that.
            </span>
            
            <span id="chunk-202" class="transcript-chunks" onclick="console.log('00:13:07,196'); seek(787.0)">
              But that's a good skeleton to get started.
            </span>
            
            <span id="chunk-203" class="transcript-chunks" onclick="console.log('00:13:16,320'); seek(796.0)">
              All right, so with our newly created library loaded in the code editor,
            </span>
            
            <span id="chunk-204" class="transcript-chunks" onclick="console.log('00:13:20,328'); seek(800.0)">
              we're going to open the cargo tumble which I already have open in
            </span>
            
            <span id="chunk-205" class="transcript-chunks" onclick="console.log('00:13:23,878'); seek(803.0)">
              here, and we're going to add the
            </span>
            
            <span id="chunk-206" class="transcript-chunks" onclick="console.log('00:13:27,318'); seek(807.0)">
              dependencies for these redis module toolkit.
            </span>
            
            <span id="chunk-207" class="transcript-chunks" onclick="console.log('00:13:30,660'); seek(810.0)">
              We are also going to
            </span>
            
            <span id="chunk-208" class="transcript-chunks" onclick="console.log('00:13:34,086'); seek(814.0)">
              set the crate type to cdylib so we can
            </span>
            
            <span id="chunk-209" class="transcript-chunks" onclick="console.log('00:13:37,722'); seek(817.0)">
              create a dynamic system library to be loaded in red
            </span>
            
            <span id="chunk-210" class="transcript-chunks" onclick="console.log('00:13:41,402'); seek(821.0)">
              FSM module.
            </span>
            
            <span id="chunk-211" class="transcript-chunks" onclick="console.log('00:13:45,800'); seek(825.0)">
              First we'll tackle the FSM create command.
            </span>
            
            <span id="chunk-212" class="transcript-chunks" onclick="console.log('00:13:49,580'); seek(829.0)">
              I'm going to open the rust code in lib rs.
            </span>
            
            <span id="chunk-213" class="transcript-chunks" onclick="console.log('00:13:54,060'); seek(834.0)">
              And in there you can see that I already have the
            </span>
            
            <span id="chunk-214" class="transcript-chunks" onclick="console.log('00:13:58,860'); seek(838.0)">
              external create redis module being
            </span>
            
            <span id="chunk-215" class="transcript-chunks" onclick="console.log('00:14:02,626'); seek(842.0)">
              used. And we're going to
            </span>
            
            <span id="chunk-216" class="transcript-chunks" onclick="console.log('00:14:06,722'); seek(846.0)">
              import from redis module a few structs,
            </span>
            
            <span id="chunk-217" class="transcript-chunks" onclick="console.log('00:14:11,760'); seek(851.0)">
              enums and types that we're going to be using down
            </span>
            
            <span id="chunk-218" class="transcript-chunks" onclick="console.log('00:14:14,982'); seek(854.0)">
              in the code. And our first skeleton
            </span>
            
            <span id="chunk-219" class="transcript-chunks" onclick="console.log('00:14:19,292'); seek(859.0)">
              code is going to be a function called FsN create. And this is going
            </span>
            
            <span id="chunk-220" class="transcript-chunks" onclick="console.log('00:14:22,918'); seek(862.0)">
              to be the function that backs up the
            </span>
            
            <span id="chunk-221" class="transcript-chunks" onclick="console.log('00:14:27,446'); seek(867.0)">
              FSM create command that we will be creating.
            </span>
            
            <span id="chunk-222" class="transcript-chunks" onclick="console.log('00:14:30,672'); seek(870.0)">
              And as you can see, it takes a context. The context
            </span>
            
            <span id="chunk-223" class="transcript-chunks" onclick="console.log('00:14:34,432'); seek(874.0)">
              is going to be a redis context. It's going to be passed to
            </span>
            
            <span id="chunk-224" class="transcript-chunks" onclick="console.log('00:14:38,110'); seek(878.0)">
              us by the modules API.
            </span>
            
            <span id="chunk-225" class="transcript-chunks" onclick="console.log('00:14:42,164'); seek(882.0)">
              And then we get a vector of arguments which are packaged
            </span>
            
            <span id="chunk-226" class="transcript-chunks" onclick="console.log('00:14:46,468'); seek(886.0)">
              as redis strings in the Ards
            </span>
            
            <span id="chunk-227" class="transcript-chunks" onclick="console.log('00:14:49,668'); seek(889.0)">
              argument. And each one of our module methods
            </span>
            
            <span id="chunk-228" class="transcript-chunks" onclick="console.log('00:14:54,088'); seek(894.0)">
              or our module functions returns a redis result.
            </span>
            
            <span id="chunk-229" class="transcript-chunks" onclick="console.log('00:14:59,280'); seek(899.0)">
              So inside of this we're going to skip
            </span>
            
            <span id="chunk-230" class="transcript-chunks" onclick="console.log('00:15:03,928'); seek(903.0)">
              the first argument. The FST argument is going to always be the command itself.
            </span>
            
            <span id="chunk-231" class="transcript-chunks" onclick="console.log('00:15:07,830'); seek(907.0)">
              So we want to ignore that. And we're going
            </span>
            
            <span id="chunk-232" class="transcript-chunks" onclick="console.log('00:15:11,814'); seek(911.0)">
              to grab the length of the arguments in here just to do a quick check.
            </span>
            
            <span id="chunk-233" class="transcript-chunks" onclick="console.log('00:15:15,782'); seek(915.0)">
              So it's, if the arguments arity
            </span>
            
            <span id="chunk-234" class="transcript-chunks" onclick="console.log('00:15:19,500'); seek(919.0)">
              it's greater than what you're expecting, you throw
            </span>
            
            <span id="chunk-235" class="transcript-chunks" onclick="console.log('00:15:22,832'); seek(922.0)">
              a redis error these I'm going to
            </span>
            
            <span id="chunk-236" class="transcript-chunks" onclick="console.log('00:15:26,266'); seek(926.0)">
              grab the actual argument
            </span>
            
            <span id="chunk-237" class="transcript-chunks" onclick="console.log('00:15:29,968'); seek(929.0)">
              that's being passed and I'm going to call that source src.
            </span>
            
            <span id="chunk-238" class="transcript-chunks" onclick="console.log('00:15:33,060'); seek(933.0)">
              And I'm doing that by using the intro iter. And then
            </span>
            
            <span id="chunk-239" class="transcript-chunks" onclick="console.log('00:15:37,022'); seek(937.0)">
              I'm going to use the next string which is going to return a string
            </span>
            
            <span id="chunk-240" class="transcript-chunks" onclick="console.log('00:15:40,952'); seek(940.0)">
              object. Next I'm going
            </span>
            
            <span id="chunk-241" class="transcript-chunks" onclick="console.log('00:15:44,546'); seek(944.0)">
              to take that source and I'm going to format it
            </span>
            
            <span id="chunk-242" class="transcript-chunks" onclick="console.log('00:15:48,098'); seek(948.0)">
              in a string with the format macro
            </span>
            
            <span id="chunk-243" class="transcript-chunks" onclick="console.log('00:15:52,080'); seek(952.0)">
              and I'm going to call that greet. So this is going to be our hello
            </span>
            
            <span id="chunk-244" class="transcript-chunks" onclick="console.log('00:15:55,442'); seek(955.0)">
              world example. So we're going to do this in the skeleton
            </span>
            
            <span id="chunk-245" class="transcript-chunks" onclick="console.log('00:15:58,908'); seek(958.0)">
              of this function so we can see how things work. And then we'll get
            </span>
            
            <span id="chunk-246" class="transcript-chunks" onclick="console.log('00:16:02,358'); seek(962.0)">
              into the more meaty stuff. All right,
            </span>
            
            <span id="chunk-247" class="transcript-chunks" onclick="console.log('00:16:05,642'); seek(965.0)">
              so now I'm going to create a response, and my response is going to be
            </span>
            
            <span id="chunk-248" class="transcript-chunks" onclick="console.log('00:16:09,386'); seek(969.0)">
              a vector from that greet string.
            </span>
            
            <span id="chunk-249" class="transcript-chunks" onclick="console.log('00:16:15,000'); seek(975.0)">
              And then we're going to wrap that whole thing into an okay.
            </span>
            
            <span id="chunk-250" class="transcript-chunks" onclick="console.log('00:16:19,660'); seek(979.0)">
              So we're going to be using the redis underscore module
            </span>
            
            <span id="chunk-251" class="transcript-chunks" onclick="console.log('00:16:23,796'); seek(983.0)">
              macro, which is going to be the block of code that's going to basically
            </span>
            
            <span id="chunk-252" class="transcript-chunks" onclick="console.log('00:16:27,854'); seek(987.0)">
              declare the module to redis.
            </span>
            
            <span id="chunk-253" class="transcript-chunks" onclick="console.log('00:16:33,180'); seek(993.0)">
              So inside of that we're going to have the name of our module, which is
            </span>
            
            <span id="chunk-254" class="transcript-chunks" onclick="console.log('00:16:36,034'); seek(996.0)">
              going to be FSM for finite state machine,
            </span>
            
            <span id="chunk-255" class="transcript-chunks" onclick="console.log('00:16:40,080'); seek(1000.0)">
              and these we're going to give it a version of one.
            </span>
            
            <span id="chunk-256" class="transcript-chunks" onclick="console.log('00:16:43,860'); seek(1003.0)">
              Right now we have no data types, so we have a block for our commands.
            </span>
            
            <span id="chunk-257" class="transcript-chunks" onclick="console.log('00:16:49,140'); seek(1009.0)">
              And inside of that we're going to add our FSm create
            </span>
            
            <span id="chunk-258" class="transcript-chunks" onclick="console.log('00:16:52,566'); seek(1012.0)">
              command. So notice that the name in
            </span>
            
            <span id="chunk-259" class="transcript-chunks" onclick="console.log('00:16:56,182'); seek(1016.0)">
              the string, the first element in here, FSm create,
            </span>
            
            <span id="chunk-260" class="transcript-chunks" onclick="console.log('00:17:00,250'); seek(1020.0)">
              is going to be the actual command that you type in the redis Cli or
            </span>
            
            <span id="chunk-261" class="transcript-chunks" onclick="console.log('00:17:03,898'); seek(1023.0)">
              that you send with a redis client, and then it's going to be
            </span>
            
            <span id="chunk-262" class="transcript-chunks" onclick="console.log('00:17:07,678'); seek(1027.0)">
              backed by our FSM underscore create function
            </span>
            
            <span id="chunk-263" class="transcript-chunks" onclick="console.log('00:17:11,294'); seek(1031.0)">
              above. All right, so now that we have a
            </span>
            
            <span id="chunk-264" class="transcript-chunks" onclick="console.log('00:17:15,166'); seek(1035.0)">
              basic hello world implementation inside of our
            </span>
            
            <span id="chunk-265" class="transcript-chunks" onclick="console.log('00:17:18,526'); seek(1038.0)">
              FSM create command,
            </span>
            
            <span id="chunk-266" class="transcript-chunks" onclick="console.log('00:17:21,416'); seek(1041.0)">
              let's start the redis server and load
            </span>
            
            <span id="chunk-267" class="transcript-chunks" onclick="console.log('00:17:25,240'); seek(1045.0)">
              our newly created module. So before we do that,
            </span>
            
            <span id="chunk-268" class="transcript-chunks" onclick="console.log('00:17:28,386'); seek(1048.0)">
              we need to compile the module. So I'm going to do a cargo
            </span>
            
            <span id="chunk-269" class="transcript-chunks" onclick="console.log('00:17:32,408'); seek(1052.0)">
              build. And now
            </span>
            
            <span id="chunk-270" class="transcript-chunks" onclick="console.log('00:17:36,102'); seek(1056.0)">
              we have the module has been compiled.
            </span>
            
            <span id="chunk-271" class="transcript-chunks" onclick="console.log('00:17:39,860'); seek(1059.0)">
              It will be under the target debug
            </span>
            
            <span id="chunk-272" class="transcript-chunks" onclick="console.log('00:17:45,160'); seek(1065.0)">
              folder, and you can see there that we have
            </span>
            
            <span id="chunk-273" class="transcript-chunks" onclick="console.log('00:17:48,714'); seek(1068.0)">
              the lib redis underscore FSm dylib
            </span>
            
            <span id="chunk-274" class="transcript-chunks" onclick="console.log('00:17:54,320'); seek(1074.0)">
              file. So now to load that intro our
            </span>
            
            <span id="chunk-275" class="transcript-chunks" onclick="console.log('00:17:57,742'); seek(1077.0)">
              redis server, I'm going to invoke the redis server command
            </span>
            
            <span id="chunk-276" class="transcript-chunks" onclick="console.log('00:18:01,332'); seek(1081.0)">
              again. And this time I'm going to pass a load module
            </span>
            
            <span id="chunk-277" class="transcript-chunks" onclick="console.log('00:18:04,788'); seek(1084.0)">
              flag in these
            </span>
            
            <span id="chunk-278" class="transcript-chunks" onclick="console.log('00:18:08,654'); seek(1088.0)">
              lib redis fsm file.
            </span>
            
            <span id="chunk-279" class="transcript-chunks" onclick="console.log('00:18:11,496'); seek(1091.0)">
              So target debug lib
            </span>
            
            <span id="chunk-280" class="transcript-chunks" onclick="console.log('00:18:15,128'); seek(1095.0)">
              redis fsm dylib.
            </span>
            
            <span id="chunk-281" class="transcript-chunks" onclick="console.log('00:18:19,200'); seek(1099.0)">
              All right, so now we have the redis server running,
            </span>
            
            <span id="chunk-282" class="transcript-chunks" onclick="console.log('00:18:23,350'); seek(1103.0)">
              and as you can see on the output, we have
            </span>
            
            <span id="chunk-283" class="transcript-chunks" onclick="console.log('00:18:26,422'); seek(1106.0)">
              loaded the FSm module from the Dylib
            </span>
            
            <span id="chunk-284" class="transcript-chunks" onclick="console.log('00:18:30,108'); seek(1110.0)">
              file. All right, so now with that in place,
            </span>
            
            <span id="chunk-285" class="transcript-chunks" onclick="console.log('00:18:34,100'); seek(1114.0)">
              let's launch the redis Cli.
            </span>
            
            <span id="chunk-286" class="transcript-chunks" onclick="console.log('00:18:37,700'); seek(1117.0)">
              And in the Redis Cli, one of the things we can do to verify to
            </span>
            
            <span id="chunk-287" class="transcript-chunks" onclick="console.log('00:18:40,938'); seek(1120.0)">
              you that the module has been loaded is to do a module
            </span>
            
            <span id="chunk-288" class="transcript-chunks" onclick="console.log('00:18:44,848'); seek(1124.0)">
              list. And you can see that we have
            </span>
            
            <span id="chunk-289" class="transcript-chunks" onclick="console.log('00:18:48,206'); seek(1128.0)">
              only one module loaded in this instance of redis,
            </span>
            
            <span id="chunk-290" class="transcript-chunks" onclick="console.log('00:18:52,540'); seek(1132.0)">
              mainly the FSM module that we just created.
            </span>
            
            <span id="chunk-291" class="transcript-chunks" onclick="console.log('00:18:56,260'); seek(1136.0)">
              Right, and the redis cli kind of autocompletes commands.
            </span>
            
            <span id="chunk-292" class="transcript-chunks" onclick="console.log('00:19:00,664'); seek(1140.0)">
              So if we do FSM,
            </span>
            
            <span id="chunk-293" class="transcript-chunks" onclick="console.log('00:19:03,840'); seek(1143.0)">
              the only command loaded right now is FSm create and
            </span>
            
            <span id="chunk-294" class="transcript-chunks" onclick="console.log('00:19:07,682'); seek(1147.0)">
              we can pass a string to it.
            </span>
            
            <span id="chunk-295" class="transcript-chunks" onclick="console.log('00:19:12,240'); seek(1152.0)">
              And as you can see, we get the hello back.
            </span>
            
            <span id="chunk-296" class="transcript-chunks" onclick="console.log('00:19:16,500'); seek(1156.0)">
              Notice that the emoji that we
            </span>
            
            <span id="chunk-297" class="transcript-chunks" onclick="console.log('00:19:19,798'); seek(1159.0)">
              had in the code, it's actually encoded in the string.
            </span>
            
            <span id="chunk-298" class="transcript-chunks" onclick="console.log('00:19:23,292'); seek(1163.0)">
              So I kind of wanted to show you that Redis
            </span>
            
            <span id="chunk-299" class="transcript-chunks" onclick="console.log('00:19:26,480'); seek(1166.0)">
              basically stores everything in raw
            </span>
            
            <span id="chunk-300" class="transcript-chunks" onclick="console.log('00:19:30,448'); seek(1170.0)">
              format. So now we see that we have a working command.
            </span>
            
            <span id="chunk-301" class="transcript-chunks" onclick="console.log('00:19:34,528'); seek(1174.0)">
              Very simple command, doesn't do anything. Now let's go back
            </span>
            
            <span id="chunk-302" class="transcript-chunks" onclick="console.log('00:19:38,478'); seek(1178.0)">
              and flesh it out.
            </span>
            
            <span id="chunk-303" class="transcript-chunks" onclick="console.log('00:19:43,460'); seek(1183.0)">
              So the first thing I'm going to do is bring in
            </span>
            
            <span id="chunk-304" class="transcript-chunks" onclick="console.log('00:19:47,062'); seek(1187.0)">
              the inserted JSON dependencies because we're
            </span>
            
            <span id="chunk-305" class="transcript-chunks" onclick="console.log('00:19:50,940'); seek(1190.0)">
              going to be using JSon. And now back
            </span>
            
            <span id="chunk-306" class="transcript-chunks" onclick="console.log('00:19:54,666'); seek(1194.0)">
              to the code. The first thing we're going to do is add
            </span>
            
            <span id="chunk-307" class="transcript-chunks" onclick="console.log('00:19:58,426'); seek(1198.0)">
              a state machine struct.
            </span>
            
            <span id="chunk-308" class="transcript-chunks" onclick="console.log('00:20:01,720'); seek(1201.0)">
              And as you can see here, I have a state machine
            </span>
            
            <span id="chunk-309" class="transcript-chunks" onclick="console.log('00:20:05,892'); seek(1205.0)">
              that has a name, a prefix,
            </span>
            
            <span id="chunk-310" class="transcript-chunks" onclick="console.log('00:20:09,260'); seek(1209.0)">
              a field, and a set of states.
            </span>
            
            <span id="chunk-311" class="transcript-chunks" onclick="console.log('00:20:12,382'); seek(1212.0)">
              To transition from state to state, we need to have the definition
            </span>
            
            <span id="chunk-312" class="transcript-chunks" onclick="console.log('00:20:16,712'); seek(1216.0)">
              of an event. So I'm going to create a struct that basically represents
            </span>
            
            <span id="chunk-313" class="transcript-chunks" onclick="console.log('00:20:21,128'); seek(1221.0)">
              an event. And the events will have a name and it
            </span>
            
            <span id="chunk-314" class="transcript-chunks" onclick="console.log('00:20:24,802'); seek(1224.0)">
              would have a state that they
            </span>
            
            <span id="chunk-315" class="transcript-chunks" onclick="console.log('00:20:28,674'); seek(1228.0)">
              can transition to and also a collection of
            </span>
            
            <span id="chunk-316" class="transcript-chunks" onclick="console.log('00:20:32,598'); seek(1232.0)">
              state that they can transition from. So we have an event in the
            </span>
            
            <span id="chunk-317" class="transcript-chunks" onclick="console.log('00:20:36,726'); seek(1236.0)">
              state machine. We're going to add a vector of
            </span>
            
            <span id="chunk-318" class="transcript-chunks" onclick="console.log('00:20:40,358'); seek(1240.0)">
              events.
            </span>
            
            <span id="chunk-319" class="transcript-chunks" onclick="console.log('00:20:44,040'); seek(1244.0)">
              Now that we have our data structures for the state machine,
            </span>
            
            <span id="chunk-320" class="transcript-chunks" onclick="console.log('00:20:48,600'); seek(1248.0)">
              the next thing we're going to do is
            </span>
            
            <span id="chunk-321" class="transcript-chunks" onclick="console.log('00:20:53,066'); seek(1253.0)">
              add a few definitions that we're going to use to
            </span>
            
            <span id="chunk-322" class="transcript-chunks" onclick="console.log('00:20:56,702'); seek(1256.0)">
              basically manage the registration of our
            </span>
            
            <span id="chunk-323" class="transcript-chunks" onclick="console.log('00:21:00,302'); seek(1260.0)">
              state machine data type. Okay, so let
            </span>
            
            <span id="chunk-324" class="transcript-chunks" onclick="console.log('00:21:04,078'); seek(1264.0)">
              me show you what we have in here. The first one, it's this redis
            </span>
            
            <span id="chunk-325" class="transcript-chunks" onclick="console.log('00:21:08,020'); seek(1268.0)">
              FSM type name. That's going to be the name of the type in
            </span>
            
            <span id="chunk-326" class="transcript-chunks" onclick="console.log('00:21:11,298'); seek(1271.0)">
              redis. And that has to be 123-45-6789
            </span>
            
            <span id="chunk-327" class="transcript-chunks" onclick="console.log('00:21:16,610'); seek(1276.0)">
              characters. Specifically, it's one of the requirements of a
            </span>
            
            <span id="chunk-328" class="transcript-chunks" onclick="console.log('00:21:20,678'); seek(1280.0)">
              redis data type that has to be exactly nine characters.
            </span>
            
            <span id="chunk-329" class="transcript-chunks" onclick="console.log('00:21:23,900'); seek(1283.0)">
              So we're calling ours Redis FSM
            </span>
            
            <span id="chunk-330" class="transcript-chunks" onclick="console.log('00:21:27,564'); seek(1287.0)">
              the version of our data type. It's version number
            </span>
            
            <span id="chunk-331" class="transcript-chunks" onclick="console.log('00:21:31,242'); seek(1291.0)">
              one. You can basically have multiple versions. And then
            </span>
            
            <span id="chunk-332" class="transcript-chunks" onclick="console.log('00:21:35,226'); seek(1295.0)">
              in your code you would basically have to manage backwards compatibility
            </span>
            
            <span id="chunk-333" class="transcript-chunks" onclick="console.log('00:21:39,680'); seek(1299.0)">
              with older versions of your data types.
            </span>
            
            <span id="chunk-334" class="transcript-chunks" onclick="console.log('00:21:43,500'); seek(1303.0)">
              If you choose to do so, then the
            </span>
            
            <span id="chunk-335" class="transcript-chunks" onclick="console.log('00:21:47,342'); seek(1307.0)">
              actual type will be created under these redis
            </span>
            
            <span id="chunk-336" class="transcript-chunks" onclick="console.log('00:21:51,316'); seek(1311.0)">
              FSM type. And then this is a redis type. You notice here
            </span>
            
            <span id="chunk-337" class="transcript-chunks" onclick="console.log('00:21:55,118'); seek(1315.0)">
              we're invoking the new function and it
            </span>
            
            <span id="chunk-338" class="transcript-chunks" onclick="console.log('00:21:59,202'); seek(1319.0)">
              takes the type name and the version and then
            </span>
            
            <span id="chunk-339" class="transcript-chunks" onclick="console.log('00:22:02,898'); seek(1322.0)">
              a set of methods that
            </span>
            
            <span id="chunk-340" class="transcript-chunks" onclick="console.log('00:22:06,306'); seek(1326.0)">
              basically initialize or
            </span>
            
            <span id="chunk-341" class="transcript-chunks" onclick="console.log('00:22:10,422'); seek(1330.0)">
              manage how these data type lifecycle it's
            </span>
            
            <span id="chunk-342" class="transcript-chunks" onclick="console.log('00:22:14,092'); seek(1334.0)">
              handled by Redis. So now we're
            </span>
            
            <span id="chunk-343" class="transcript-chunks" onclick="console.log('00:22:17,948'); seek(1337.0)">
              going to make some modifications to our FSM
            </span>
            
            <span id="chunk-344" class="transcript-chunks" onclick="console.log('00:22:22,732'); seek(1342.0)">
              create. And the first thing that
            </span>
            
            <span id="chunk-345" class="transcript-chunks" onclick="console.log('00:22:26,202'); seek(1346.0)">
              I'm doing in here is that I've added this line right here
            </span>
            
            <span id="chunk-346" class="transcript-chunks" onclick="console.log('00:22:30,600'); seek(1350.0)">
              that creates a variable called Redis key,
            </span>
            
            <span id="chunk-347" class="transcript-chunks" onclick="console.log('00:22:34,462'); seek(1354.0)">
              which it's actually grabbing the context. Notice that I brought these
            </span>
            
            <span id="chunk-348" class="transcript-chunks" onclick="console.log('00:22:38,542'); seek(1358.0)">
              context variable back into scope,
            </span>
            
            <span id="chunk-349" class="transcript-chunks" onclick="console.log('00:22:41,444'); seek(1361.0)">
              and that context provides an open
            </span>
            
            <span id="chunk-350" class="transcript-chunks" onclick="console.log('00:22:45,214'); seek(1365.0)">
              keywritable method. And that method
            </span>
            
            <span id="chunk-351" class="transcript-chunks" onclick="console.log('00:22:49,464'); seek(1369.0)">
              basically takes a key definition, a redis key,
            </span>
            
            <span id="chunk-352" class="transcript-chunks" onclick="console.log('00:22:53,250'); seek(1373.0)">
              and it's going to basically give us a slot in
            </span>
            
            <span id="chunk-353" class="transcript-chunks" onclick="console.log('00:22:56,866'); seek(1376.0)">
              Redis to write something to it. So these, once we
            </span>
            
            <span id="chunk-354" class="transcript-chunks" onclick="console.log('00:23:00,278'); seek(1380.0)">
              have that, we're going to create
            </span>
            
            <span id="chunk-355" class="transcript-chunks" onclick="console.log('00:23:03,974'); seek(1383.0)">
              some JSON representation, a certain representation of
            </span>
            
            <span id="chunk-356" class="transcript-chunks" onclick="console.log('00:23:08,118'); seek(1388.0)">
              our state machine. So notice that we have a JSON document here that
            </span>
            
            <span id="chunk-357" class="transcript-chunks" onclick="console.log('00:23:11,782'); seek(1391.0)">
              has the main prefix field, the state for
            </span>
            
            <span id="chunk-358" class="transcript-chunks" onclick="console.log('00:23:15,418'); seek(1395.0)">
              our state machine and definition of events. In this case,
            </span>
            
            <span id="chunk-359" class="transcript-chunks" onclick="console.log('00:23:19,386'); seek(1399.0)">
              we have that simple state machine that we shown in the slides before,
            </span>
            
            <span id="chunk-360" class="transcript-chunks" onclick="console.log('00:23:23,500'); seek(1403.0)">
              which has three states sleeping, running and cleaning. And it
            </span>
            
            <span id="chunk-361" class="transcript-chunks" onclick="console.log('00:23:27,262'); seek(1407.0)">
              has three events,
            </span>
            
            <span id="chunk-362" class="transcript-chunks" onclick="console.log('00:23:29,652'); seek(1409.0)">
              run, clean and sleep.
            </span>
            
            <span id="chunk-363" class="transcript-chunks" onclick="console.log('00:23:32,532'); seek(1412.0)">
              And remember, run can transition from sleeping
            </span>
            
            <span id="chunk-364" class="transcript-chunks" onclick="console.log('00:23:36,264'); seek(1416.0)">
              to running, clean from running to cleaning,
            </span>
            
            <span id="chunk-365" class="transcript-chunks" onclick="console.log('00:23:40,960'); seek(1420.0)">
              and sleep from either running or cleaning to sleeping.
            </span>
            
            <span id="chunk-366" class="transcript-chunks" onclick="console.log('00:23:45,600'); seek(1425.0)">
              And notice that I'm using the JSON macro from Certe
            </span>
            
            <span id="chunk-367" class="transcript-chunks" onclick="console.log('00:23:49,836'); seek(1429.0)">
              to basically create a JSON object.
            </span>
            
            <span id="chunk-368" class="transcript-chunks" onclick="console.log('00:23:55,220'); seek(1435.0)">
              And then once we have our JSON object,
            </span>
            
            <span id="chunk-369" class="transcript-chunks" onclick="console.log('00:23:58,580'); seek(1438.0)">
              we're going to serialize, we're going to create
            </span>
            
            <span id="chunk-370" class="transcript-chunks" onclick="console.log('00:24:02,106'); seek(1442.0)">
              a state machine from that JSON object. So notice in
            </span>
            
            <span id="chunk-371" class="transcript-chunks" onclick="console.log('00:24:05,674'); seek(1445.0)">
              here I'm using the asserted from the string of
            </span>
            
            <span id="chunk-372" class="transcript-chunks" onclick="console.log('00:24:09,978'); seek(1449.0)">
              the JSON that we created, and that is going to give
            </span>
            
            <span id="chunk-373" class="transcript-chunks" onclick="console.log('00:24:13,658'); seek(1453.0)">
              me an instance of our state machine strut.
            </span>
            
            <span id="chunk-374" class="transcript-chunks" onclick="console.log('00:24:20,410'); seek(1460.0)">
              So next, once we have a state machine object, we're going
            </span>
            
            <span id="chunk-375" class="transcript-chunks" onclick="console.log('00:24:23,564'); seek(1463.0)">
              to use that redis key to write that value to the redis key,
            </span>
            
            <span id="chunk-376" class="transcript-chunks" onclick="console.log('00:24:28,670'); seek(1468.0)">
              passing the specific type that we're writing, which is our redis
            </span>
            
            <span id="chunk-377" class="transcript-chunks" onclick="console.log('00:24:32,278'); seek(1472.0)">
              FSM type, which we declared up here in
            </span>
            
            <span id="chunk-378" class="transcript-chunks" onclick="console.log('00:24:37,870'); seek(1477.0)">
              that redis type block.
            </span>
            
            <span id="chunk-379" class="transcript-chunks" onclick="console.log('00:24:44,760'); seek(1484.0)">
              Okay, so we wrote the key to Redis,
            </span>
            
            <span id="chunk-380" class="transcript-chunks" onclick="console.log('00:24:48,060'); seek(1488.0)">
              and now we're going to get rid of that hello world part of the example,
            </span>
            
            <span id="chunk-381" class="transcript-chunks" onclick="console.log('00:24:52,220'); seek(1492.0)">
              and we're going to return a boolean
            </span>
            
            <span id="chunk-382" class="transcript-chunks" onclick="console.log('00:24:55,492'); seek(1495.0)">
              as an integer. True, if we were successful
            </span>
            
            <span id="chunk-383" class="transcript-chunks" onclick="console.log('00:24:59,320'); seek(1499.0)">
              at writing that redis value to redis,
            </span>
            
            <span id="chunk-384" class="transcript-chunks" onclick="console.log('00:25:03,760'); seek(1503.0)">
              that key value, the actual serialization of our state machine,
            </span>
            
            <span id="chunk-385" class="transcript-chunks" onclick="console.log('00:25:07,432'); seek(1507.0)">
              and false otherwise. So that gives us now
            </span>
            
            <span id="chunk-386" class="transcript-chunks" onclick="console.log('00:25:11,046'); seek(1511.0)">
              the ability to write our custom
            </span>
            
            <span id="chunk-387" class="transcript-chunks" onclick="console.log('00:25:14,550'); seek(1514.0)">
              data type to redis.
            </span>
            
            <span id="chunk-388" class="transcript-chunks" onclick="console.log('00:25:21,720'); seek(1521.0)">
              We also need to add the redis type to
            </span>
            
            <span id="chunk-389" class="transcript-chunks" onclick="console.log('00:25:25,018'); seek(1525.0)">
              the module declaration.
            </span>
            
            <span id="chunk-390" class="transcript-chunks" onclick="console.log('00:25:27,880'); seek(1527.0)">
              So noticing here that under the data types vector,
            </span>
            
            <span id="chunk-391" class="transcript-chunks" onclick="console.log('00:25:32,880'); seek(1532.0)">
              I added the redis FSM type.
            </span>
            
            <span id="chunk-392" class="transcript-chunks" onclick="console.log('00:25:38,040'); seek(1538.0)">
              And now that the FSM create
            </span>
            
            <span id="chunk-393" class="transcript-chunks" onclick="console.log('00:25:42,218'); seek(1542.0)">
              its write into redis, we actually mark it with the
            </span>
            
            <span id="chunk-394" class="transcript-chunks" onclick="console.log('00:25:46,800'); seek(1546.0)">
              modifier write, telling us that
            </span>
            
            <span id="chunk-395" class="transcript-chunks" onclick="console.log('00:25:50,050'); seek(1550.0)">
              this commands writes to the database. And the
            </span>
            
            <span id="chunk-396" class="transcript-chunks" onclick="console.log('00:25:54,898'); seek(1554.0)">
              three ones at the end in here represent the
            </span>
            
            <span id="chunk-397" class="transcript-chunks" onclick="console.log('00:25:58,802'); seek(1558.0)">
              index of the first key, the key step,
            </span>
            
            <span id="chunk-398" class="transcript-chunks" onclick="console.log('00:26:01,894'); seek(1561.0)">
              and the index of the last key. So since we only have one
            </span>
            
            <span id="chunk-399" class="transcript-chunks" onclick="console.log('00:26:05,846'); seek(1565.0)">
              parameter, the main key, one key, actually we
            </span>
            
            <span id="chunk-400" class="transcript-chunks" onclick="console.log('00:26:09,782'); seek(1569.0)">
              have one across the board.
            </span>
            
            <span id="chunk-401" class="transcript-chunks" onclick="console.log('00:26:14,280'); seek(1574.0)">
              Now we will build the FSM info command.
            </span>
            
            <span id="chunk-402" class="transcript-chunks" onclick="console.log('00:26:20,120'); seek(1580.0)">
              Okay, so now that we have a method that can write our custom data
            </span>
            
            <span id="chunk-403" class="transcript-chunks" onclick="console.log('00:26:24,026'); seek(1584.0)">
              type to redis, we should probably add a method to read it back.
            </span>
            
            <span id="chunk-404" class="transcript-chunks" onclick="console.log('00:26:27,966'); seek(1587.0)">
              So for that we're going to implement the FSM intro
            </span>
            
            <span id="chunk-405" class="transcript-chunks" onclick="console.log('00:26:31,188'); seek(1591.0)">
              method, and the first thing I'm going to do is just
            </span>
            
            <span id="chunk-406" class="transcript-chunks" onclick="console.log('00:26:34,622'); seek(1594.0)">
              add a skeleton for it. Just like the FSM
            </span>
            
            <span id="chunk-407" class="transcript-chunks" onclick="console.log('00:26:38,216'); seek(1598.0)">
              create method, our FSM intro again takes a context
            </span>
            
            <span id="chunk-408" class="transcript-chunks" onclick="console.log('00:26:42,376'); seek(1602.0)">
              instead of redis arguments, these redis strings and
            </span>
            
            <span id="chunk-409" class="transcript-chunks" onclick="console.log('00:26:46,082'); seek(1606.0)">
              returns a result. We're starting with just a result,
            </span>
            
            <span id="chunk-410" class="transcript-chunks" onclick="console.log('00:26:49,910'); seek(1609.0)">
              okay, with a null value, and now we're
            </span>
            
            <span id="chunk-411" class="transcript-chunks" onclick="console.log('00:26:53,548'); seek(1613.0)">
              going to grab the arguments like we did before, and we're grabbing
            </span>
            
            <span id="chunk-412" class="transcript-chunks" onclick="console.log('00:26:57,940'); seek(1617.0)">
              what's supposed to be the key as the
            </span>
            
            <span id="chunk-413" class="transcript-chunks" onclick="console.log('00:27:01,658'); seek(1621.0)">
              first argument after the method name.
            </span>
            
            <span id="chunk-414" class="transcript-chunks" onclick="console.log('00:27:05,400'); seek(1625.0)">
              And these we're going to again create
            </span>
            
            <span id="chunk-415" class="transcript-chunks" onclick="console.log('00:27:08,538'); seek(1628.0)">
              a key. But this time we're going to open our key
            </span>
            
            <span id="chunk-416" class="transcript-chunks" onclick="console.log('00:27:12,840'); seek(1632.0)">
              similar to what we did in the FSM create.
            </span>
            
            <span id="chunk-417" class="transcript-chunks" onclick="console.log('00:27:16,974'); seek(1636.0)">
              So notice in here first I did a context open
            </span>
            
            <span id="chunk-418" class="transcript-chunks" onclick="console.log('00:27:20,526'); seek(1640.0)">
              key writable, and in the FSM intro,
            </span>
            
            <span id="chunk-419" class="transcript-chunks" onclick="console.log('00:27:24,772'); seek(1644.0)">
              since I'm only reading, I just did a context open key passing
            </span>
            
            <span id="chunk-420" class="transcript-chunks" onclick="console.log('00:27:28,248'); seek(1648.0)">
              that key value.
            </span>
            
            <span id="chunk-421" class="transcript-chunks" onclick="console.log('00:27:32,800'); seek(1652.0)">
              Then I'm going to bring in the guard crate so I
            </span>
            
            <span id="chunk-422" class="transcript-chunks" onclick="console.log('00:27:36,402'); seek(1656.0)">
              can avoid having to have nested let
            </span>
            
            <span id="chunk-423" class="transcript-chunks" onclick="console.log('00:27:42,320'); seek(1662.0)">
              in my code. So this is going to allow me to write a little bit
            </span>
            
            <span id="chunk-424" class="transcript-chunks" onclick="console.log('00:27:45,702'); seek(1665.0)">
              cleaner code in my opinion. So with that
            </span>
            
            <span id="chunk-425" class="transcript-chunks" onclick="console.log('00:27:49,078'); seek(1669.0)">
              in place, I'm going to create this guard where I'm basically
            </span>
            
            <span id="chunk-426" class="transcript-chunks" onclick="console.log('00:27:52,602'); seek(1672.0)">
              trying to bring the state machine back from the JSON that's stored
            </span>
            
            <span id="chunk-427" class="transcript-chunks" onclick="console.log('00:27:56,576'); seek(1676.0)">
              in the database in redis. So noticing here that
            </span>
            
            <span id="chunk-428" class="transcript-chunks" onclick="console.log('00:28:00,506'); seek(1680.0)">
              I'm doing a guard and then a let.
            </span>
            
            <span id="chunk-429" class="transcript-chunks" onclick="console.log('00:28:04,026'); seek(1684.0)">
              Okay, so there's going to be the redis response. So I want it to be
            </span>
            
            <span id="chunk-430" class="transcript-chunks" onclick="console.log('00:28:07,358'); seek(1687.0)">
              a successful response that contains some
            </span>
            
            <span id="chunk-431" class="transcript-chunks" onclick="console.log('00:28:11,086'); seek(1691.0)">
              object of type call FSM that I'm
            </span>
            
            <span id="chunk-432" class="transcript-chunks" onclick="console.log('00:28:14,814'); seek(1694.0)">
              going to name FSM. And I get that from reading
            </span>
            
            <span id="chunk-433" class="transcript-chunks" onclick="console.log('00:28:18,324'); seek(1698.0)">
              the value, casting it to a state machine using my
            </span>
            
            <span id="chunk-434" class="transcript-chunks" onclick="console.log('00:28:22,082'); seek(1702.0)">
              redis FSM type that we declared previously. And if that fails,
            </span>
            
            <span id="chunk-435" class="transcript-chunks" onclick="console.log('00:28:26,232'); seek(1706.0)">
              then I'm just going to return an error with a redis error that
            </span>
            
            <span id="chunk-436" class="transcript-chunks" onclick="console.log('00:28:29,718'); seek(1709.0)">
              contains an error message. These very likely it's these
            </span>
            
            <span id="chunk-437" class="transcript-chunks" onclick="console.log('00:28:33,542'); seek(1713.0)">
              errors that I couldn't find the key. Now with that
            </span>
            
            <span id="chunk-438" class="transcript-chunks" onclick="console.log('00:28:37,222'); seek(1717.0)">
              in place, I'm going to use survey
            </span>
            
            <span id="chunk-439" class="transcript-chunks" onclick="console.log('00:28:40,988'); seek(1720.0)">
              again to basically put the JSON back into
            </span>
            
            <span id="chunk-440" class="transcript-chunks" onclick="console.log('00:28:44,890'); seek(1724.0)">
              string form and return that JSON wrapped in
            </span>
            
            <span id="chunk-441" class="transcript-chunks" onclick="console.log('00:28:48,682'); seek(1728.0)">
              a redis value simple string with an
            </span>
            
            <span id="chunk-442" class="transcript-chunks" onclick="console.log('00:28:52,458'); seek(1732.0)">
              okay around it. So with that in place,
            </span>
            
            <span id="chunk-443" class="transcript-chunks" onclick="console.log('00:29:00,130'); seek(1740.0)">
              we need to add the command to our declaration like we did before
            </span>
            
            <span id="chunk-444" class="transcript-chunks" onclick="console.log('00:29:04,420'); seek(1744.0)">
              with the FSm create. So in here I'm going to now add
            </span>
            
            <span id="chunk-445" class="transcript-chunks" onclick="console.log('00:29:08,132'); seek(1748.0)">
              the FSm info. And again we have the FSm intro
            </span>
            
            <span id="chunk-446" class="transcript-chunks" onclick="console.log('00:29:11,786'); seek(1751.0)">
              command being backed by
            </span>
            
            <span id="chunk-447" class="transcript-chunks" onclick="console.log('00:29:15,364'); seek(1755.0)">
              the FSm info function. This one is a read only the
            </span>
            
            <span id="chunk-448" class="transcript-chunks" onclick="console.log('00:29:18,744'); seek(1758.0)">
              other one was a write. And again, since we only have one key and it's
            </span>
            
            <span id="chunk-449" class="transcript-chunks" onclick="console.log('00:29:21,934'); seek(1761.0)">
              the first key, we have ones across the board here in the
            </span>
            
            <span id="chunk-450" class="transcript-chunks" onclick="console.log('00:29:25,468'); seek(1765.0)">
              definition. And now we can go and test this.
            </span>
            
            <span id="chunk-451" class="transcript-chunks" onclick="console.log('00:29:30,650'); seek(1770.0)">
              Okay, so now that we have our two commands, the FSM create to write
            </span>
            
            <span id="chunk-452" class="transcript-chunks" onclick="console.log('00:29:34,480'); seek(1774.0)">
              the JSON definition of the state machine to redis
            </span>
            
            <span id="chunk-453" class="transcript-chunks" onclick="console.log('00:29:38,438'); seek(1778.0)">
              and these FSm info to read it back.
            </span>
            
            <span id="chunk-454" class="transcript-chunks" onclick="console.log('00:29:41,456'); seek(1781.0)">
              Let's compile our library
            </span>
            
            <span id="chunk-455" class="transcript-chunks" onclick="console.log('00:29:44,566'); seek(1784.0)">
              again our module, and let's launch the
            </span>
            
            <span id="chunk-456" class="transcript-chunks" onclick="console.log('00:29:48,868'); seek(1788.0)">
              redis server again, loading our module. All right,
            </span>
            
            <span id="chunk-457" class="transcript-chunks" onclick="console.log('00:29:52,868'); seek(1792.0)">
              and now again, let's go back to the redis Cli and
            </span>
            
            <span id="chunk-458" class="transcript-chunks" onclick="console.log('00:29:59,336'); seek(1799.0)">
              let's see what keys we have in the system. Should be empty again.
            </span>
            
            <span id="chunk-459" class="transcript-chunks" onclick="console.log('00:30:03,400'); seek(1803.0)">
              All right, so now we can do an FSM create.
            </span>
            
            <span id="chunk-460" class="transcript-chunks" onclick="console.log('00:30:08,150'); seek(1808.0)">
              And in here I'm going to
            </span>
            
            <span id="chunk-461" class="transcript-chunks" onclick="console.log('00:30:11,644'); seek(1811.0)">
              pass the key is going
            </span>
            
            <span id="chunk-462" class="transcript-chunks" onclick="console.log('00:30:15,324'); seek(1815.0)">
              to be job FSM, which is kind of what we hard coded
            </span>
            
            <span id="chunk-463" class="transcript-chunks" onclick="console.log('00:30:18,562'); seek(1818.0)">
              in the JSOn for now. So if I
            </span>
            
            <span id="chunk-464" class="transcript-chunks" onclick="console.log('00:30:22,172'); seek(1822.0)">
              do that, notice that we get a one back. So that means that something
            </span>
            
            <span id="chunk-465" class="transcript-chunks" onclick="console.log('00:30:26,000'); seek(1826.0)">
              went right.
            </span>
            
            <span id="chunk-466" class="transcript-chunks" onclick="console.log('00:30:28,720'); seek(1828.0)">
              And now I'm going to list the keys
            </span>
            
            <span id="chunk-467" class="transcript-chunks" onclick="console.log('00:30:32,038'); seek(1832.0)">
              again and notice that we have now one key,
            </span>
            
            <span id="chunk-468" class="transcript-chunks" onclick="console.log('00:30:35,696'); seek(1835.0)">
              job FSM. And if I check the type of that key,
            </span>
            
            <span id="chunk-469" class="transcript-chunks" onclick="console.log('00:30:42,910'); seek(1842.0)">
              we get our custom redis data type redis fsm.
            </span>
            
            <span id="chunk-470" class="transcript-chunks" onclick="console.log('00:30:47,382'); seek(1847.0)">
              So now let's see if our redis command
            </span>
            
            <span id="chunk-471" class="transcript-chunks" onclick="console.log('00:30:51,626'); seek(1851.0)">
              FSm info works correctly so I
            </span>
            
            <span id="chunk-472" class="transcript-chunks" onclick="console.log('00:30:55,588'); seek(1855.0)">
              can pass the key that we just created and we
            </span>
            
            <span id="chunk-473" class="transcript-chunks" onclick="console.log('00:30:59,892'); seek(1859.0)">
              get our XMl back.
            </span>
            
            <span id="chunk-474" class="transcript-chunks" onclick="console.log('00:31:02,450'); seek(1862.0)">
              And the redis cli doesn't preprint the XML.
            </span>
            
            <span id="chunk-475" class="transcript-chunks" onclick="console.log('00:31:06,494'); seek(1866.0)">
              So you could use Redis insight,
            </span>
            
            <span id="chunk-476" class="transcript-chunks" onclick="console.log('00:31:09,838'); seek(1869.0)">
              for example, if you wanted to basically see a nicely colorized version
            </span>
            
            <span id="chunk-477" class="transcript-chunks" onclick="console.log('00:31:14,650'); seek(1874.0)">
              of the JSON definition. So now
            </span>
            
            <span id="chunk-478" class="transcript-chunks" onclick="console.log('00:31:21,050'); seek(1881.0)">
              we have a data type that implements our finite state machine
            </span>
            
            <span id="chunk-479" class="transcript-chunks" onclick="console.log('00:31:24,754'); seek(1884.0)">
              and we have a command to create it and one to read it back.
            </span>
            
            <span id="chunk-480" class="transcript-chunks" onclick="console.log('00:31:31,470'); seek(1891.0)">
              Okay, so now we have two commands, one that writes some
            </span>
            
            <span id="chunk-481" class="transcript-chunks" onclick="console.log('00:31:35,088'); seek(1895.0)">
              JSON definition of an object and
            </span>
            
            <span id="chunk-482" class="transcript-chunks" onclick="console.log('00:31:39,040'); seek(1899.0)">
              one that reads the definition in our lingua
            </span>
            
            <span id="chunk-483" class="transcript-chunks" onclick="console.log('00:31:42,154'); seek(1902.0)">
              franca to store them. It's Json. So now what
            </span>
            
            <span id="chunk-484" class="transcript-chunks" onclick="console.log('00:31:46,452'); seek(1906.0)">
              I'm going to do is now refactor that FSM create
            </span>
            
            <span id="chunk-485" class="transcript-chunks" onclick="console.log('00:31:49,860'); seek(1909.0)">
              so we don't hard code the JSON because we really want to have the flexibility
            </span>
            
            <span id="chunk-486" class="transcript-chunks" onclick="console.log('00:31:53,514'); seek(1913.0)">
              to have multiple state machine
            </span>
            
            <span id="chunk-487" class="transcript-chunks" onclick="console.log('00:31:56,922'); seek(1916.0)">
              definitions there. So the first thing I'm going to do is
            </span>
            
            <span id="chunk-488" class="transcript-chunks" onclick="console.log('00:32:01,384'); seek(1921.0)">
              rather than just reading a key, we're going to
            </span>
            
            <span id="chunk-489" class="transcript-chunks" onclick="console.log('00:32:04,504'); seek(1924.0)">
              take the JSON. So I rename the first argument being read to FSM,
            </span>
            
            <span id="chunk-490" class="transcript-chunks" onclick="console.log('00:32:08,322'); seek(1928.0)">
              underscore JSON. And then
            </span>
            
            <span id="chunk-491" class="transcript-chunks" onclick="console.log('00:32:13,100'); seek(1933.0)">
              I added this block in here where I'm taking that
            </span>
            
            <span id="chunk-492" class="transcript-chunks" onclick="console.log('00:32:17,212'); seek(1937.0)">
              JSoN, that raw JSon that is being passed from the command.
            </span>
            
            <span id="chunk-493" class="transcript-chunks" onclick="console.log('00:32:20,886'); seek(1940.0)">
              And we're going to use these third JSON library to
            </span>
            
            <span id="chunk-494" class="transcript-chunks" onclick="console.log('00:32:24,752'); seek(1944.0)">
              read it from a string, the two string of that FSN JSon which
            </span>
            
            <span id="chunk-495" class="transcript-chunks" onclick="console.log('00:32:28,912'); seek(1948.0)">
              is a Redis string, and that's going to give us our state machine object
            </span>
            
            <span id="chunk-496" class="transcript-chunks" onclick="console.log('00:32:32,724'); seek(1952.0)">
              back, rehydrated. And once
            </span>
            
            <span id="chunk-497" class="transcript-chunks" onclick="console.log('00:32:36,676'); seek(1956.0)">
              again, now these key to write this to Redis
            </span>
            
            <span id="chunk-498" class="transcript-chunks" onclick="console.log('00:32:40,570'); seek(1960.0)">
              is going to be the name property in the JSON. So what I'm doing in
            </span>
            
            <span id="chunk-499" class="transcript-chunks" onclick="console.log('00:32:43,928'); seek(1963.0)">
              here is I'm taking the FSM instance
            </span>
            
            <span id="chunk-500" class="transcript-chunks" onclick="console.log('00:32:47,342'); seek(1967.0)">
              that we just created from the JSON and grabbing the name to
            </span>
            
            <span id="chunk-501" class="transcript-chunks" onclick="console.log('00:32:51,352'); seek(1971.0)">
              basically create our Redis key.
            </span>
            
            <span id="chunk-502" class="transcript-chunks" onclick="console.log('00:32:55,290'); seek(1975.0)">
              Okay, so now we can test our refactor version of
            </span>
            
            <span id="chunk-503" class="transcript-chunks" onclick="console.log('00:32:59,612'); seek(1979.0)">
              the FSM create method. So once again, I'm going
            </span>
            
            <span id="chunk-504" class="transcript-chunks" onclick="console.log('00:33:03,372'); seek(1983.0)">
              to compile our library and I'm going
            </span>
            
            <span id="chunk-505" class="transcript-chunks" onclick="console.log('00:33:07,212'); seek(1987.0)">
              to launch the Reddit server and
            </span>
            
            <span id="chunk-506" class="transcript-chunks" onclick="console.log('00:33:12,990'); seek(1992.0)">
              also run the CLI.
            </span>
            
            <span id="chunk-507" class="transcript-chunks" onclick="console.log('00:33:17,790'); seek(1997.0)">
              And now our FSM create method.
            </span>
            
            <span id="chunk-508" class="transcript-chunks" onclick="console.log('00:33:21,418'); seek(2001.0)">
              Obviously it's a much more beefy method
            </span>
            
            <span id="chunk-509" class="transcript-chunks" onclick="console.log('00:33:26,154'); seek(2006.0)">
              because now it takes the JSON payload and obviously
            </span>
            
            <span id="chunk-510" class="transcript-chunks" onclick="console.log('00:33:30,404'); seek(2010.0)">
              I have it ready here to copy and paste. Notice that the JSON
            </span>
            
            <span id="chunk-511" class="transcript-chunks" onclick="console.log('00:33:34,158'); seek(2014.0)">
              has to be scaped properly. So all the internal quotes
            </span>
            
            <span id="chunk-512" class="transcript-chunks" onclick="console.log('00:33:38,526'); seek(2018.0)">
              have to be scaped with the backslash.
            </span>
            
            <span id="chunk-513" class="transcript-chunks" onclick="console.log('00:33:41,830'); seek(2021.0)">
              And when you have large payloads to
            </span>
            
            <span id="chunk-514" class="transcript-chunks" onclick="console.log('00:33:45,432'); seek(2025.0)">
              load in the CLI, rather than pasting them into the Cli, you can
            </span>
            
            <span id="chunk-515" class="transcript-chunks" onclick="console.log('00:33:48,988'); seek(2028.0)">
              actually pull these from an external file. But since this is a quick
            </span>
            
            <span id="chunk-516" class="transcript-chunks" onclick="console.log('00:33:52,588'); seek(2032.0)">
              and dirty example, I'm just pasting it on the Cli. And if
            </span>
            
            <span id="chunk-517" class="transcript-chunks" onclick="console.log('00:33:56,028'); seek(2036.0)">
              you have it in a file, you don't have to do all this escaping maneuvering
            </span>
            
            <span id="chunk-518" class="transcript-chunks" onclick="console.log('00:34:00,102'); seek(2040.0)">
              over here. So I'm going to run my FSM create now with
            </span>
            
            <span id="chunk-519" class="transcript-chunks" onclick="console.log('00:34:03,552'); seek(2043.0)">
              the JSon being passed from the CLi.
            </span>
            
            <span id="chunk-520" class="transcript-chunks" onclick="console.log('00:34:07,206'); seek(2047.0)">
              And again we can check once again
            </span>
            
            <span id="chunk-521" class="transcript-chunks" onclick="console.log('00:34:10,852'); seek(2050.0)">
              that we have our key being created and that
            </span>
            
            <span id="chunk-522" class="transcript-chunks" onclick="console.log('00:34:14,868'); seek(2054.0)">
              we can read it. So now we have a full run trip
            </span>
            
            <span id="chunk-523" class="transcript-chunks" onclick="console.log('00:34:18,634'); seek(2058.0)">
              with a custom definition of our state machine.
            </span>
            
            <span id="chunk-524" class="transcript-chunks" onclick="console.log('00:34:24,550'); seek(2064.0)">
              Okay, so now we're going to implement the actual functionality of our state
            </span>
            
            <span id="chunk-525" class="transcript-chunks" onclick="console.log('00:34:28,552'); seek(2068.0)">
              machine. And one of the first things that we want to do is
            </span>
            
            <span id="chunk-526" class="transcript-chunks" onclick="console.log('00:34:32,600'); seek(2072.0)">
              when a new hash matching the
            </span>
            
            <span id="chunk-527" class="transcript-chunks" onclick="console.log('00:34:36,652'); seek(2076.0)">
              given prefix, it's added to Redis,
            </span>
            
            <span id="chunk-528" class="transcript-chunks" onclick="console.log('00:34:40,114'); seek(2080.0)">
              we want to intercept that and set the initial state field
            </span>
            
            <span id="chunk-529" class="transcript-chunks" onclick="console.log('00:34:45,130'); seek(2085.0)">
              given a state machine that matches the prefix of the hash.
            </span>
            
            <span id="chunk-530" class="transcript-chunks" onclick="console.log('00:34:48,662'); seek(2088.0)">
              So to do that, first I'm going to add
            </span>
            
            <span id="chunk-531" class="transcript-chunks" onclick="console.log('00:34:52,510'); seek(2092.0)">
              a function called on event. And this on event function
            </span>
            
            <span id="chunk-532" class="transcript-chunks" onclick="console.log('00:34:57,248'); seek(2097.0)">
              takes a context again, but this time it takes
            </span>
            
            <span id="chunk-533" class="transcript-chunks" onclick="console.log('00:35:01,312'); seek(2101.0)">
              an event type, which is a notify event and
            </span>
            
            <span id="chunk-534" class="transcript-chunks" onclick="console.log('00:35:05,476'); seek(2105.0)">
              the actual event as a string and the key as
            </span>
            
            <span id="chunk-535" class="transcript-chunks" onclick="console.log('00:35:08,772'); seek(2108.0)">
              a string and inside of it. For now we're just going to have
            </span>
            
            <span id="chunk-536" class="transcript-chunks" onclick="console.log('00:35:12,456'); seek(2112.0)">
              a message that basically prints what the event was
            </span>
            
            <span id="chunk-537" class="transcript-chunks" onclick="console.log('00:35:16,056'); seek(2116.0)">
              in the key and
            </span>
            
            <span id="chunk-538" class="transcript-chunks" onclick="console.log('00:35:19,912'); seek(2119.0)">
              the event. So the event type, the key and the actual
            </span>
            
            <span id="chunk-539" class="transcript-chunks" onclick="console.log('00:35:23,496'); seek(2123.0)">
              event, and we're going to log that to the context with the
            </span>
            
            <span id="chunk-540" class="transcript-chunks" onclick="console.log('00:35:26,844'); seek(2126.0)">
              log notice login message. So once
            </span>
            
            <span id="chunk-541" class="transcript-chunks" onclick="console.log('00:35:30,236'); seek(2130.0)">
              we have that in place, we have to register that event. So down in our
            </span>
            
            <span id="chunk-542" class="transcript-chunks" onclick="console.log('00:35:33,852'); seek(2133.0)">
              redis module registration block,
            </span>
            
            <span id="chunk-543" class="transcript-chunks" onclick="console.log('00:35:38,590'); seek(2138.0)">
              we add an event handlers vector
            </span>
            
            <span id="chunk-544" class="transcript-chunks" onclick="console.log('00:35:42,758'); seek(2142.0)">
              that has inside an event
            </span>
            
            <span id="chunk-545" class="transcript-chunks" onclick="console.log('00:35:46,576'); seek(2146.0)">
              handler of type hash. And we're pointing
            </span>
            
            <span id="chunk-546" class="transcript-chunks" onclick="console.log('00:35:49,962'); seek(2149.0)">
              that to our on event function. So when a hash
            </span>
            
            <span id="chunk-547" class="transcript-chunks" onclick="console.log('00:35:53,962'); seek(2153.0)">
              event is detected, we're going to get notified and
            </span>
            
            <span id="chunk-548" class="transcript-chunks" onclick="console.log('00:35:57,716'); seek(2157.0)">
              our on event function is going to be invoked.
            </span>
            
            <span id="chunk-549" class="transcript-chunks" onclick="console.log('00:36:01,930'); seek(2161.0)">
              Right. So with that in place, we can now
            </span>
            
            <span id="chunk-550" class="transcript-chunks" onclick="console.log('00:36:05,976'); seek(2165.0)">
              test the event functionality.
            </span>
            
            <span id="chunk-551" class="transcript-chunks" onclick="console.log('00:36:12,710'); seek(2172.0)">
              All right, so now let's compile our library
            </span>
            
            <span id="chunk-552" class="transcript-chunks" onclick="console.log('00:36:16,466'); seek(2176.0)">
              again and
            </span>
            
            <span id="chunk-553" class="transcript-chunks" onclick="console.log('00:36:20,172'); seek(2180.0)">
              let's launch it.
            </span>
            
            <span id="chunk-554" class="transcript-chunks" onclick="console.log('00:36:24,090'); seek(2184.0)">
              And let's launch the CLI.
            </span>
            
            <span id="chunk-555" class="transcript-chunks" onclick="console.log('00:36:26,930'); seek(2186.0)">
              Let's arrow so we can get to that FSM create. So we'll create
            </span>
            
            <span id="chunk-556" class="transcript-chunks" onclick="console.log('00:36:30,928'); seek(2190.0)">
              our job
            </span>
            
            <span id="chunk-557" class="transcript-chunks" onclick="console.log('00:36:34,480'); seek(2194.0)">
              FSM finite state machine.
            </span>
            
            <span id="chunk-558" class="transcript-chunks" onclick="console.log('00:36:38,590'); seek(2198.0)">
              Let's make sure that the key is there again.
            </span>
            
            <span id="chunk-559" class="transcript-chunks" onclick="console.log('00:36:41,892'); seek(2201.0)">
              Let's make sure that we can read it back.
            </span>
            
            <span id="chunk-560" class="transcript-chunks" onclick="console.log('00:36:45,170'); seek(2205.0)">
              So it's job FSM. All right,
            </span>
            
            <span id="chunk-561" class="transcript-chunks" onclick="console.log('00:36:48,724'); seek(2208.0)">
              so now what we're going to do is let's do an HM set.
            </span>
            
            <span id="chunk-562" class="transcript-chunks" onclick="console.log('00:36:53,224'); seek(2213.0)">
              So we're going to create a key. Sorry. We're going to create a
            </span>
            
            <span id="chunk-563" class="transcript-chunks" onclick="console.log('00:36:56,648'); seek(2216.0)">
              hash and we're going to use the prefix that
            </span>
            
            <span id="chunk-564" class="transcript-chunks" onclick="console.log('00:37:00,712'); seek(2220.0)">
              we're listening for in our state
            </span>
            
            <span id="chunk-565" class="transcript-chunks" onclick="console.log('00:37:06,892'); seek(2226.0)">
              machine. It doesn't really matter right now, but it will
            </span>
            
            <span id="chunk-566" class="transcript-chunks" onclick="console.log('00:37:10,156'); seek(2230.0)">
              once we actually look for that prefix. But for now,
            </span>
            
            <span id="chunk-567" class="transcript-chunks" onclick="console.log('00:37:13,740'); seek(2233.0)">
              any hash event should be detected by our event
            </span>
            
            <span id="chunk-568" class="transcript-chunks" onclick="console.log('00:37:18,240'); seek(2238.0)">
              handler. So in here, I'm going to create this hash called job
            </span>
            
            <span id="chunk-569" class="transcript-chunks" onclick="console.log('00:37:22,910'); seek(2242.0)">
              one. And let's give it a feel here,
            </span>
            
            <span id="chunk-570" class="transcript-chunks" onclick="console.log('00:37:26,192'); seek(2246.0)">
              maybe employee. And this is going to be Brian.
            </span>
            
            <span id="chunk-571" class="transcript-chunks" onclick="console.log('00:37:30,198'); seek(2250.0)">
              Okay, so now pay attention to the
            </span>
            
            <span id="chunk-572" class="transcript-chunks" onclick="console.log('00:37:33,652'); seek(2253.0)">
              redis server tab. So I'm going to press return in
            </span>
            
            <span id="chunk-573" class="transcript-chunks" onclick="console.log('00:37:37,188'); seek(2257.0)">
              here and notice that this is spinning because now we just receive
            </span>
            
            <span id="chunk-574" class="transcript-chunks" onclick="console.log('00:37:40,826'); seek(2260.0)">
              our event. So in here we have received event hash
            </span>
            
            <span id="chunk-575" class="transcript-chunks" onclick="console.log('00:37:45,358'); seek(2265.0)">
              on key job one via the event H
            </span>
            
            <span id="chunk-576" class="transcript-chunks" onclick="console.log('00:37:48,952'); seek(2268.0)">
              set. So our event was an h set event.
            </span>
            
            <span id="chunk-577" class="transcript-chunks" onclick="console.log('00:37:52,360'); seek(2272.0)">
              So that was the command that basically was triggered by the hmset.
            </span>
            
            <span id="chunk-578" class="transcript-chunks" onclick="console.log('00:37:56,046'); seek(2276.0)">
              So each one of the writes to the hash.
            </span>
            
            <span id="chunk-579" class="transcript-chunks" onclick="console.log('00:38:00,050'); seek(2280.0)">
              It's an H set event. And in here
            </span>
            
            <span id="chunk-580" class="transcript-chunks" onclick="console.log('00:38:03,580'); seek(2283.0)">
              I get these key of the
            </span>
            
            <span id="chunk-581" class="transcript-chunks" onclick="console.log('00:38:07,532'); seek(2287.0)">
              hash that was created and these event type was a hash.
            </span>
            
            <span id="chunk-582" class="transcript-chunks" onclick="console.log('00:38:11,638'); seek(2291.0)">
              All right,
            </span>
            
            <span id="chunk-583" class="transcript-chunks" onclick="console.log('00:38:15,230'); seek(2295.0)">
              so now we got a big refactor in our hands. We need to implement
            </span>
            
            <span id="chunk-584" class="transcript-chunks" onclick="console.log('00:38:19,158'); seek(2299.0)">
              the on event function. So when a
            </span>
            
            <span id="chunk-585" class="transcript-chunks" onclick="console.log('00:38:23,188'); seek(2303.0)">
              hash event arrives for a hash that has
            </span>
            
            <span id="chunk-586" class="transcript-chunks" onclick="console.log('00:38:26,692'); seek(2306.0)">
              a key with a prefix matching any of the prefixes
            </span>
            
            <span id="chunk-587" class="transcript-chunks" onclick="console.log('00:38:30,762'); seek(2310.0)">
              defined on any of the FSMs that we have stored
            </span>
            
            <span id="chunk-588" class="transcript-chunks" onclick="console.log('00:38:34,174'); seek(2314.0)">
              in the system, we want to then check
            </span>
            
            <span id="chunk-589" class="transcript-chunks" onclick="console.log('00:38:37,672'); seek(2317.0)">
              that hash. And if these state field it's
            </span>
            
            <span id="chunk-590" class="transcript-chunks" onclick="console.log('00:38:41,342'); seek(2321.0)">
              empty on that hash, we're going to grab the initial state from the state
            </span>
            
            <span id="chunk-591" class="transcript-chunks" onclick="console.log('00:38:44,936'); seek(2324.0)">
              machine that matches that prefix for that hash and we're going to set it
            </span>
            
            <span id="chunk-592" class="transcript-chunks" onclick="console.log('00:38:49,068'); seek(2329.0)">
              up on the hash. So to do that, first we're going to start
            </span>
            
            <span id="chunk-593" class="transcript-chunks" onclick="console.log('00:38:53,100'); seek(2333.0)">
              by grabbing the prefix for the
            </span>
            
            <span id="chunk-594" class="transcript-chunks" onclick="console.log('00:38:56,924'); seek(2336.0)">
              hash for which we have received an event.
            </span>
            
            <span id="chunk-595" class="transcript-chunks" onclick="console.log('00:39:01,088'); seek(2341.0)">
              So I'm going to split the keys by
            </span>
            
            <span id="chunk-596" class="transcript-chunks" onclick="console.log('00:39:05,072'); seek(2345.0)">
              the column and then I'm going to grab the prefix as the
            </span>
            
            <span id="chunk-597" class="transcript-chunks" onclick="console.log('00:39:08,816'); seek(2348.0)">
              first segment of that list of key parts,
            </span>
            
            <span id="chunk-598" class="transcript-chunks" onclick="console.log('00:39:13,570'); seek(2353.0)">
              and I'm going to reappend the column in
            </span>
            
            <span id="chunk-599" class="transcript-chunks" onclick="console.log('00:39:17,348'); seek(2357.0)">
              there to build my key prefix. So then
            </span>
            
            <span id="chunk-600" class="transcript-chunks" onclick="console.log('00:39:22,950'); seek(2362.0)">
              if we go back to the FSM create,
            </span>
            
            <span id="chunk-601" class="transcript-chunks" onclick="console.log('00:39:31,110'); seek(2371.0)">
              we need to basically have a way for,
            </span>
            
            <span id="chunk-602" class="transcript-chunks" onclick="console.log('00:39:36,730'); seek(2376.0)">
              given a hash prefix, be able to find
            </span>
            
            <span id="chunk-603" class="transcript-chunks" onclick="console.log('00:39:40,732'); seek(2380.0)">
              the FSM that matches that prefix.
            </span>
            
            <span id="chunk-604" class="transcript-chunks" onclick="console.log('00:39:44,306'); seek(2384.0)">
              So there's many ways we can actually store that data. So we basically need
            </span>
            
            <span id="chunk-605" class="transcript-chunks" onclick="console.log('00:39:47,648'); seek(2387.0)">
              a dictionary or a hash or a map between prefixes
            </span>
            
            <span id="chunk-606" class="transcript-chunks" onclick="console.log('00:39:52,246'); seek(2392.0)">
              and finite state machines. And the
            </span>
            
            <span id="chunk-607" class="transcript-chunks" onclick="console.log('00:39:55,888'); seek(2395.0)">
              way that I decided to implement it in this demo is to
            </span>
            
            <span id="chunk-608" class="transcript-chunks" onclick="console.log('00:39:59,568'); seek(2399.0)">
              actually use Redis itself. So I'm going to use a Redis hash to store
            </span>
            
            <span id="chunk-609" class="transcript-chunks" onclick="console.log('00:40:03,236'); seek(2403.0)">
              a mapping of prefixes to the keys
            </span>
            
            <span id="chunk-610" class="transcript-chunks" onclick="console.log('00:40:06,442'); seek(2406.0)">
              of our fsms. So we're
            </span>
            
            <span id="chunk-611" class="transcript-chunks" onclick="console.log('00:40:10,714'); seek(2410.0)">
              going to start here by refactoring this. So we were returning
            </span>
            
            <span id="chunk-612" class="transcript-chunks" onclick="console.log('00:40:14,250'); seek(2414.0)">
              just a result of setting the value of the FSM
            </span>
            
            <span id="chunk-613" class="transcript-chunks" onclick="console.log('00:40:18,142'); seek(2418.0)">
              when we wrote it to the database. Now we're just going to put that in
            </span>
            
            <span id="chunk-614" class="transcript-chunks" onclick="console.log('00:40:21,224'); seek(2421.0)">
              an individual line with one of these guards. And in here's where I'm basically
            </span>
            
            <span id="chunk-615" class="transcript-chunks" onclick="console.log('00:40:25,228'); seek(2425.0)">
              writing my state machine, my serialized state machine to the system.
            </span>
            
            <span id="chunk-616" class="transcript-chunks" onclick="console.log('00:40:29,548'); seek(2429.0)">
              And then in between that and the return,
            </span>
            
            <span id="chunk-617" class="transcript-chunks" onclick="console.log('00:40:34,890'); seek(2434.0)">
              first I'm going to create a constant that basically
            </span>
            
            <span id="chunk-618" class="transcript-chunks" onclick="console.log('00:40:39,168'); seek(2439.0)">
              tells me the name of the hash where I'm going to keep my mappings,
            </span>
            
            <span id="chunk-619" class="transcript-chunks" onclick="console.log('00:40:42,534'); seek(2442.0)">
              my mappings between, again, prefixes to
            </span>
            
            <span id="chunk-620" class="transcript-chunks" onclick="console.log('00:40:46,430'); seek(2446.0)">
              FSM keys. So now I have that
            </span>
            
            <span id="chunk-621" class="transcript-chunks" onclick="console.log('00:40:51,170'); seek(2451.0)">
              hash name that we're going to use. And down below here,
            </span>
            
            <span id="chunk-622" class="transcript-chunks" onclick="console.log('00:40:54,916'); seek(2454.0)">
              notice that I'm using the
            </span>
            
            <span id="chunk-623" class="transcript-chunks" onclick="console.log('00:40:59,028'); seek(2459.0)">
              context to call h set. So this
            </span>
            
            <span id="chunk-624" class="transcript-chunks" onclick="console.log('00:41:02,516'); seek(2462.0)">
              h set, it's just a command, a redis command. And the
            </span>
            
            <span id="chunk-625" class="transcript-chunks" onclick="console.log('00:41:06,776'); seek(2466.0)">
              redis context gives us access to those commands.
            </span>
            
            <span id="chunk-626" class="transcript-chunks" onclick="console.log('00:41:10,430'); seek(2470.0)">
              So I'm going to call the h set command,
            </span>
            
            <span id="chunk-627" class="transcript-chunks" onclick="console.log('00:41:13,838'); seek(2473.0)">
              and I'm going to write to this redis fsm hash key that we created
            </span>
            
            <span id="chunk-628" class="transcript-chunks" onclick="console.log('00:41:17,522'); seek(2477.0)">
              here. And I'm going to write the prefix that
            </span>
            
            <span id="chunk-629" class="transcript-chunks" onclick="console.log('00:41:22,108'); seek(2482.0)">
              is defined in the findingstate machine JSon. And I'm going to
            </span>
            
            <span id="chunk-630" class="transcript-chunks" onclick="console.log('00:41:25,916'); seek(2485.0)">
              write also the key of my finite state machine
            </span>
            
            <span id="chunk-631" class="transcript-chunks" onclick="console.log('00:41:29,702'); seek(2489.0)">
              as the value in there. So now with that in place,
            </span>
            
            <span id="chunk-632" class="transcript-chunks" onclick="console.log('00:41:35,870'); seek(2495.0)">
              I can now make some modifications. So now we
            </span>
            
            <span id="chunk-633" class="transcript-chunks" onclick="console.log('00:41:39,808'); seek(2499.0)">
              have a set that has those values. So let's go back to our
            </span>
            
            <span id="chunk-634" class="transcript-chunks" onclick="console.log('00:41:43,332'); seek(2503.0)">
              on event and in here. Notice that now I can
            </span>
            
            <span id="chunk-635" class="transcript-chunks" onclick="console.log('00:41:47,588'); seek(2507.0)">
              find the correct finite state machine for the key prefix.
            </span>
            
            <span id="chunk-636" class="transcript-chunks" onclick="console.log('00:41:51,738'); seek(2511.0)">
              So what I'm doing in here is again, I'm using a guard again,
            </span>
            
            <span id="chunk-637" class="transcript-chunks" onclick="console.log('00:41:55,544'); seek(2515.0)">
              and I'm looking for my fsm
            </span>
            
            <span id="chunk-638" class="transcript-chunks" onclick="console.log('00:41:59,006'); seek(2519.0)">
              key by calling h get. So we did an h set
            </span>
            
            <span id="chunk-639" class="transcript-chunks" onclick="console.log('00:42:02,696'); seek(2522.0)">
              to save the mapping upon creation of the state machine.
            </span>
            
            <span id="chunk-640" class="transcript-chunks" onclick="console.log('00:42:06,190'); seek(2526.0)">
              And now when we get an event for a hash, we're going to use Hkit
            </span>
            
            <span id="chunk-641" class="transcript-chunks" onclick="console.log('00:42:09,570'); seek(2529.0)">
              to look into that map to see if our event prefix,
            </span>
            
            <span id="chunk-642" class="transcript-chunks" onclick="console.log('00:42:13,554'); seek(2533.0)">
              our hash prefix, matches any of the prefixes of
            </span>
            
            <span id="chunk-643" class="transcript-chunks" onclick="console.log('00:42:17,408'); seek(2537.0)">
              our state machines. I'm also assuming that the prefixes
            </span>
            
            <span id="chunk-644" class="transcript-chunks" onclick="console.log('00:42:21,462'); seek(2541.0)">
              are unique per state machine. So now with that
            </span>
            
            <span id="chunk-645" class="transcript-chunks" onclick="console.log('00:42:25,152'); seek(2545.0)">
              in place,
            </span>
            
            <span id="chunk-646" class="transcript-chunks" onclick="console.log('00:42:29,330'); seek(2549.0)">
              I can now create a key name,
            </span>
            
            <span id="chunk-647" class="transcript-chunks" onclick="console.log('00:42:33,668'); seek(2553.0)">
              which is going to be, I'm using the context and my
            </span>
            
            <span id="chunk-648" class="transcript-chunks" onclick="console.log('00:42:37,412'); seek(2557.0)">
              findingstate machine key and I am
            </span>
            
            <span id="chunk-649" class="transcript-chunks" onclick="console.log('00:42:40,836'); seek(2560.0)">
              basically opening that key. So I'm reading the FSm
            </span>
            
            <span id="chunk-650" class="transcript-chunks" onclick="console.log('00:42:44,366'); seek(2564.0)">
              back and then from the FSM here,
            </span>
            
            <span id="chunk-651" class="transcript-chunks" onclick="console.log('00:42:49,560'); seek(2569.0)">
              which is basically my instance of definite state machine, which is going to be the
            </span>
            
            <span id="chunk-652" class="transcript-chunks" onclick="console.log('00:42:53,272'); seek(2573.0)">
              struct that we defined before. So it's
            </span>
            
            <span id="chunk-653" class="transcript-chunks" onclick="console.log('00:42:57,058'); seek(2577.0)">
              going to be one of these. So that
            </span>
            
            <span id="chunk-654" class="transcript-chunks" onclick="console.log('00:43:01,612'); seek(2581.0)">
              state machine object, now it's loaded here at
            </span>
            
            <span id="chunk-655" class="transcript-chunks" onclick="console.log('00:43:04,908'); seek(2584.0)">
              the end of the current implementation of our own event.
            </span>
            
            <span id="chunk-656" class="transcript-chunks" onclick="console.log('00:43:08,912'); seek(2588.0)">
              So once I have the state machine object,
            </span>
            
            <span id="chunk-657" class="transcript-chunks" onclick="console.log('00:43:14,430'); seek(2594.0)">
              I can grab the initial state, but I'm only going to grab the initial
            </span>
            
            <span id="chunk-658" class="transcript-chunks" onclick="console.log('00:43:17,782'); seek(2597.0)">
              state if a call to try to
            </span>
            
            <span id="chunk-659" class="transcript-chunks" onclick="console.log('00:43:21,572'); seek(2601.0)">
              retrieve the FSm field from the
            </span>
            
            <span id="chunk-660" class="transcript-chunks" onclick="console.log('00:43:25,268'); seek(2605.0)">
              hash comes back no. So that means if the hash
            </span>
            
            <span id="chunk-661" class="transcript-chunks" onclick="console.log('00:43:28,634'); seek(2608.0)">
              doesn't have the state field set, I'm going to
            </span>
            
            <span id="chunk-662" class="transcript-chunks" onclick="console.log('00:43:31,956'); seek(2611.0)">
              initialize it to the initial value that is on
            </span>
            
            <span id="chunk-663" class="transcript-chunks" onclick="console.log('00:43:36,456'); seek(2616.0)">
              the state machine. So notice in
            </span>
            
            <span id="chunk-664" class="transcript-chunks" onclick="console.log('00:43:39,992'); seek(2619.0)">
              here one
            </span>
            
            <span id="chunk-665" class="transcript-chunks" onclick="console.log('00:43:44,808'); seek(2624.0)">
              of the things I need to do is I need to have a way to
            </span>
            
            <span id="chunk-666" class="transcript-chunks" onclick="console.log('00:43:47,036'); seek(2627.0)">
              retrieve that initial state. So how do I retrieve that initial state?
            </span>
            
            <span id="chunk-667" class="transcript-chunks" onclick="console.log('00:43:50,332'); seek(2630.0)">
              That's going to be, if you remember our JSon object or
            </span>
            
            <span id="chunk-668" class="transcript-chunks" onclick="console.log('00:43:54,588'); seek(2634.0)">
              the definition. So let's go back here to our
            </span>
            
            <span id="chunk-669" class="transcript-chunks" onclick="console.log('00:43:58,652'); seek(2638.0)">
              state machine. This set of states, the first implements
            </span>
            
            <span id="chunk-670" class="transcript-chunks" onclick="console.log('00:44:02,630'); seek(2642.0)">
              of this vector is going to be our initial state.
            </span>
            
            <span id="chunk-671" class="transcript-chunks" onclick="console.log('00:44:05,360'); seek(2645.0)">
              So now let's add some logic to our state machine.
            </span>
            
            <span id="chunk-672" class="transcript-chunks" onclick="console.log('00:44:09,014'); seek(2649.0)">
              So I'm going to add an input block for our state machine in these,
            </span>
            
            <span id="chunk-673" class="transcript-chunks" onclick="console.log('00:44:12,692'); seek(2652.0)">
              and we're going to create an initial state
            </span>
            
            <span id="chunk-674" class="transcript-chunks" onclick="console.log('00:44:16,116'); seek(2656.0)">
              field. So our initial state, this being a method,
            </span>
            
            <span id="chunk-675" class="transcript-chunks" onclick="console.log('00:44:19,482'); seek(2659.0)">
              takes a pointer to self and these we're going
            </span>
            
            <span id="chunk-676" class="transcript-chunks" onclick="console.log('00:44:22,984'); seek(2662.0)">
              to return an optional string. So that means if there
            </span>
            
            <span id="chunk-677" class="transcript-chunks" onclick="console.log('00:44:26,472'); seek(2666.0)">
              are any states in here, we're going to return the first one
            </span>
            
            <span id="chunk-678" class="transcript-chunks" onclick="console.log('00:44:30,584'); seek(2670.0)">
              or none. And with that in place,
            </span>
            
            <span id="chunk-679" class="transcript-chunks" onclick="console.log('00:44:36,570'); seek(2676.0)">
              we can now go back to our on event
            </span>
            
            <span id="chunk-680" class="transcript-chunks" onclick="console.log('00:44:40,572'); seek(2680.0)">
              implementation. So back here
            </span>
            
            <span id="chunk-681" class="transcript-chunks" onclick="console.log('00:44:44,220'); seek(2684.0)">
              on the on event implementation. Now we can call that new method that we
            </span>
            
            <span id="chunk-682" class="transcript-chunks" onclick="console.log('00:44:48,128'); seek(2688.0)">
              created on the state machine strut.
            </span>
            
            <span id="chunk-683" class="transcript-chunks" onclick="console.log('00:44:51,958'); seek(2691.0)">
              So we're going to basically use a guard again,
            </span>
            
            <span id="chunk-684" class="transcript-chunks" onclick="console.log('00:44:55,056'); seek(2695.0)">
              and I'm going to attempt to grab the initial state by calling
            </span>
            
            <span id="chunk-685" class="transcript-chunks" onclick="console.log('00:44:59,040'); seek(2699.0)">
              the initial state on the FSM object that we retrieved up
            </span>
            
            <span id="chunk-686" class="transcript-chunks" onclick="console.log('00:45:03,572'); seek(2703.0)">
              here. So once I have that, now I can call
            </span>
            
            <span id="chunk-687" class="transcript-chunks" onclick="console.log('00:45:06,772'); seek(2706.0)">
              an h set. So I did an h get to find the
            </span>
            
            <span id="chunk-688" class="transcript-chunks" onclick="console.log('00:45:10,548'); seek(2710.0)">
              correct mapping
            </span>
            
            <span id="chunk-689" class="transcript-chunks" onclick="console.log('00:45:14,190'); seek(2714.0)">
              of prefix to state machine. Then I instantiated that
            </span>
            
            <span id="chunk-690" class="transcript-chunks" onclick="console.log('00:45:17,768'); seek(2717.0)">
              state machine. If these field also
            </span>
            
            <span id="chunk-691" class="transcript-chunks" onclick="console.log('00:45:21,304'); seek(2721.0)">
              was empty, I use another h, get to check if the state was set on
            </span>
            
            <span id="chunk-692" class="transcript-chunks" onclick="console.log('00:45:25,448'); seek(2725.0)">
              the hash and if it wasn't set, now I can grab the initial state
            </span>
            
            <span id="chunk-693" class="transcript-chunks" onclick="console.log('00:45:29,212'); seek(2729.0)">
              from the state machine and do another h set on the
            </span>
            
            <span id="chunk-694" class="transcript-chunks" onclick="console.log('00:45:32,572'); seek(2732.0)">
              hash on the incoming hash on the
            </span>
            
            <span id="chunk-695" class="transcript-chunks" onclick="console.log('00:45:36,092'); seek(2736.0)">
              field that was defined on the state machine as being these initial
            </span>
            
            <span id="chunk-696" class="transcript-chunks" onclick="console.log('00:45:39,702'); seek(2739.0)">
              state and grabbing the initial state value from the state machine.
            </span>
            
            <span id="chunk-697" class="transcript-chunks" onclick="console.log('00:45:43,622'); seek(2743.0)">
              So now with that in place, we should have a fully
            </span>
            
            <span id="chunk-698" class="transcript-chunks" onclick="console.log('00:45:48,678'); seek(2748.0)">
              functioning step of the state machine that
            </span>
            
            <span id="chunk-699" class="transcript-chunks" onclick="console.log('00:45:52,196'); seek(2752.0)">
              sets up the initial state on any matching hash.
            </span>
            
            <span id="chunk-700" class="transcript-chunks" onclick="console.log('00:45:59,570'); seek(2759.0)">
              Okay, so let's build the application again
            </span>
            
            <span id="chunk-701" class="transcript-chunks" onclick="console.log('00:46:04,310'); seek(2764.0)">
              and let's launch it so we
            </span>
            
            <span id="chunk-702" class="transcript-chunks" onclick="console.log('00:46:07,688'); seek(2767.0)">
              can test our event handling code.
            </span>
            
            <span id="chunk-703" class="transcript-chunks" onclick="console.log('00:46:14,630'); seek(2774.0)">
              So back on the CLI,
            </span>
            
            <span id="chunk-704" class="transcript-chunks" onclick="console.log('00:46:17,450'); seek(2777.0)">
              let's reload our final
            </span>
            
            <span id="chunk-705" class="transcript-chunks" onclick="console.log('00:46:22,204'); seek(2782.0)">
              state machine, finite state machine JSON,
            </span>
            
            <span id="chunk-706" class="transcript-chunks" onclick="console.log('00:46:28,030'); seek(2788.0)">
              and let's do all these usual
            </span>
            
            <span id="chunk-707" class="transcript-chunks" onclick="console.log('00:46:31,830'); seek(2791.0)">
              checking. So let's actually inspect the
            </span>
            
            <span id="chunk-708" class="transcript-chunks" onclick="console.log('00:46:37,040'); seek(2797.0)">
              hash of mappings. So we'll do an h getall for
            </span>
            
            <span id="chunk-709" class="transcript-chunks" onclick="console.log('00:46:41,776'); seek(2801.0)">
              redis FSm hash.
            </span>
            
            <span id="chunk-710" class="transcript-chunks" onclick="console.log('00:46:48,930'); seek(2808.0)">
              And you can see that we have the job prefix that we
            </span>
            
            <span id="chunk-711" class="transcript-chunks" onclick="console.log('00:46:54,230'); seek(2814.0)">
              set on our JSON specification,
            </span>
            
            <span id="chunk-712" class="transcript-chunks" onclick="console.log('00:46:57,598'); seek(2817.0)">
              and it maps to the key for
            </span>
            
            <span id="chunk-713" class="transcript-chunks" onclick="console.log('00:47:01,208'); seek(2821.0)">
              the FSM that we have in the system.
            </span>
            
            <span id="chunk-714" class="transcript-chunks" onclick="console.log('00:47:05,192'); seek(2825.0)">
              So now let's do
            </span>
            
            <span id="chunk-715" class="transcript-chunks" onclick="console.log('00:47:09,768'); seek(2829.0)">
              an hm set for
            </span>
            
            <span id="chunk-716" class="transcript-chunks" onclick="console.log('00:47:14,300'); seek(2834.0)">
              a key matching our prefix. So again
            </span>
            
            <span id="chunk-717" class="transcript-chunks" onclick="console.log('00:47:17,392'); seek(2837.0)">
              let's do job one and
            </span>
            
            <span id="chunk-718" class="transcript-chunks" onclick="console.log('00:47:21,056'); seek(2841.0)">
              we're going to say again, employee Brian.
            </span>
            
            <span id="chunk-719" class="transcript-chunks" onclick="console.log('00:47:26,750'); seek(2846.0)">
              And as you can see, the redis
            </span>
            
            <span id="chunk-720" class="transcript-chunks" onclick="console.log('00:47:30,032'); seek(2850.0)">
              server detected the event. Notice that we have two events,
            </span>
            
            <span id="chunk-721" class="transcript-chunks" onclick="console.log('00:47:34,138'); seek(2854.0)">
              one on the redis hash, but that one doesn't match our prefix,
            </span>
            
            <span id="chunk-722" class="transcript-chunks" onclick="console.log('00:47:38,530'); seek(2858.0)">
              these redis hash that keeps the mapping of prefixes to
            </span>
            
            <span id="chunk-723" class="transcript-chunks" onclick="console.log('00:47:42,036'); seek(2862.0)">
              fsms. And then for the actual data one, the job
            </span>
            
            <span id="chunk-724" class="transcript-chunks" onclick="console.log('00:47:46,184'); seek(2866.0)">
              one. So now let's inspect the
            </span>
            
            <span id="chunk-725" class="transcript-chunks" onclick="console.log('00:47:49,832'); seek(2869.0)">
              values. So we'll do an h get all for
            </span>
            
            <span id="chunk-726" class="transcript-chunks" onclick="console.log('00:47:54,680'); seek(2874.0)">
              our job one.
            </span>
            
            <span id="chunk-727" class="transcript-chunks" onclick="console.log('00:47:58,330'); seek(2878.0)">
              And as you can see now we have the initial
            </span>
            
            <span id="chunk-728" class="transcript-chunks" onclick="console.log('00:48:01,458'); seek(2881.0)">
              fields that we set. Employee Brian, employee Brian.
            </span>
            
            <span id="chunk-729" class="transcript-chunks" onclick="console.log('00:48:04,946'); seek(2884.0)">
              But we also have the state set to sleeping.
            </span>
            
            <span id="chunk-730" class="transcript-chunks" onclick="console.log('00:48:08,566'); seek(2888.0)">
              And if you remember in our FSM
            </span>
            
            <span id="chunk-731" class="transcript-chunks" onclick="console.log('00:48:12,502'); seek(2892.0)">
              definition, our first state is sleeping, which is
            </span>
            
            <span id="chunk-732" class="transcript-chunks" onclick="console.log('00:48:16,448'); seek(2896.0)">
              our initial state. So our state machine
            </span>
            
            <span id="chunk-733" class="transcript-chunks" onclick="console.log('00:48:20,290'); seek(2900.0)">
              initial state setting on events works.
            </span>
            
            <span id="chunk-734" class="transcript-chunks" onclick="console.log('00:48:25,410'); seek(2905.0)">
              Now we can move on to implements the FSM allowed command.
            </span>
            
            <span id="chunk-735" class="transcript-chunks" onclick="console.log('00:48:30,530'); seek(2910.0)">
              Okay, so now we're going to implements the method that allows
            </span>
            
            <span id="chunk-736" class="transcript-chunks" onclick="console.log('00:48:34,158'); seek(2914.0)">
              us to check whether an event can be
            </span>
            
            <span id="chunk-737" class="transcript-chunks" onclick="console.log('00:48:37,432'); seek(2917.0)">
              applied to an object to transition to
            </span>
            
            <span id="chunk-738" class="transcript-chunks" onclick="console.log('00:48:40,792'); seek(2920.0)">
              a different state. And to do that,
            </span>
            
            <span id="chunk-739" class="transcript-chunks" onclick="console.log('00:48:44,648'); seek(2924.0)">
              first we're going to create a skeleton for the FSM allowed
            </span>
            
            <span id="chunk-740" class="transcript-chunks" onclick="console.log('00:48:48,242'); seek(2928.0)">
              method function, sorry. And has the same signature as
            </span>
            
            <span id="chunk-741" class="transcript-chunks" onclick="console.log('00:48:52,428'); seek(2932.0)">
              the methods before.
            </span>
            
            <span id="chunk-742" class="transcript-chunks" onclick="console.log('00:48:58,590'); seek(2938.0)">
              And we are also going to
            </span>
            
            <span id="chunk-743" class="transcript-chunks" onclick="console.log('00:49:02,080'); seek(2942.0)">
              register that command in our Redis module
            </span>
            
            <span id="chunk-744" class="transcript-chunks" onclick="console.log('00:49:05,942'); seek(2945.0)">
              command declaration. Module declaration. So I have
            </span>
            
            <span id="chunk-745" class="transcript-chunks" onclick="console.log('00:49:09,408'); seek(2949.0)">
              my FSM allowed. It's going to be backed by that FSM allowed
            </span>
            
            <span id="chunk-746" class="transcript-chunks" onclick="console.log('00:49:13,386'); seek(2953.0)">
              function that we created above. And again it's going to be a read only
            </span>
            
            <span id="chunk-747" class="transcript-chunks" onclick="console.log('00:49:17,650'); seek(2957.0)">
              these first key parameter.
            </span>
            
            <span id="chunk-748" class="transcript-chunks" onclick="console.log('00:49:20,586'); seek(2960.0)">
              It's a parameter in position one. But this one takes two keys.
            </span>
            
            <span id="chunk-749" class="transcript-chunks" onclick="console.log('00:49:24,442'); seek(2964.0)">
              So the first key would be the key of the FSM
            </span>
            
            <span id="chunk-750" class="transcript-chunks" onclick="console.log('00:49:28,686'); seek(2968.0)">
              of the final state machine, and then the second key would be
            </span>
            
            <span id="chunk-751" class="transcript-chunks" onclick="console.log('00:49:32,216'); seek(2972.0)">
              a target hash for which we are checking whether an event can be
            </span>
            
            <span id="chunk-752" class="transcript-chunks" onclick="console.log('00:49:35,784'); seek(2975.0)">
              applied to.
            </span>
            
            <span id="chunk-753" class="transcript-chunks" onclick="console.log('00:49:39,380'); seek(2979.0)">
              All right, so now we're
            </span>
            
            <span id="chunk-754" class="transcript-chunks" onclick="console.log('00:49:43,628'); seek(2983.0)">
              going to add a method to our final state machine struct.
            </span>
            
            <span id="chunk-755" class="transcript-chunks" onclick="console.log('00:49:48,140'); seek(2988.0)">
              So let's go find the final state machine, the finite state machine.
            </span>
            
            <span id="chunk-756" class="transcript-chunks" onclick="console.log('00:49:54,920'); seek(2994.0)">
              Here in our impulse block, we're going
            </span>
            
            <span id="chunk-757" class="transcript-chunks" onclick="console.log('00:49:58,362'); seek(2998.0)">
              to add a method called allowed.
            </span>
            
            <span id="chunk-758" class="transcript-chunks" onclick="console.log('00:50:02,548'); seek(3002.0)">
              And this one is going to return an event.
            </span>
            
            <span id="chunk-759" class="transcript-chunks" onclick="console.log('00:50:05,934'); seek(3005.0)">
              And this event is going to be one of our event substructs.
            </span>
            
            <span id="chunk-760" class="transcript-chunks" onclick="console.log('00:50:11,556'); seek(3011.0)">
              This one right here. The event that basically
            </span>
            
            <span id="chunk-761" class="transcript-chunks" onclick="console.log('00:50:15,330'); seek(3015.0)">
              denotes an event that can be applied
            </span>
            
            <span id="chunk-762" class="transcript-chunks" onclick="console.log('00:50:18,840'); seek(3018.0)">
              to the state machine, which will basically transition
            </span>
            
            <span id="chunk-763" class="transcript-chunks" onclick="console.log('00:50:24,400'); seek(3024.0)">
              from a state in the from vector
            </span>
            
            <span id="chunk-764" class="transcript-chunks" onclick="console.log('00:50:28,508'); seek(3028.0)">
              to the final state denoted by the two field.
            </span>
            
            <span id="chunk-765" class="transcript-chunks" onclick="console.log('00:50:32,740'); seek(3032.0)">
              All right, so in our function right
            </span>
            
            <span id="chunk-766" class="transcript-chunks" onclick="console.log('00:50:37,078'); seek(3037.0)">
              now, we're returning none. So the first thing we're going to do is
            </span>
            
            <span id="chunk-767" class="transcript-chunks" onclick="console.log('00:50:40,986'); seek(3040.0)">
              load the hash,
            </span>
            
            <span id="chunk-768" class="transcript-chunks" onclick="console.log('00:50:44,280'); seek(3044.0)">
              the hash that basically we're checking against in
            </span>
            
            <span id="chunk-769" class="transcript-chunks" onclick="console.log('00:50:48,010'); seek(3048.0)">
              that hash. We're only interested in the state field.
            </span>
            
            <span id="chunk-770" class="transcript-chunks" onclick="console.log('00:50:51,966'); seek(3051.0)">
              So we're using the
            </span>
            
            <span id="chunk-771" class="transcript-chunks" onclick="console.log('00:50:57,598'); seek(3057.0)">
              finite state machine field, which you remember it's in
            </span>
            
            <span id="chunk-772" class="transcript-chunks" onclick="console.log('00:51:01,054'); seek(3061.0)">
              our declaration right here to basically look for
            </span>
            
            <span id="chunk-773" class="transcript-chunks" onclick="console.log('00:51:04,866'); seek(3064.0)">
              that specific state in that target hash.
            </span>
            
            <span id="chunk-774" class="transcript-chunks" onclick="console.log('00:51:09,040'); seek(3069.0)">
              And if we find that
            </span>
            
            <span id="chunk-775" class="transcript-chunks" onclick="console.log('00:51:12,882'); seek(3072.0)">
              state, that's going to be in response. So we're
            </span>
            
            <span id="chunk-776" class="transcript-chunks" onclick="console.log('00:51:16,648'); seek(3076.0)">
              going to grab the value of that, which is going to be a redis value
            </span>
            
            <span id="chunk-777" class="transcript-chunks" onclick="console.log('00:51:20,950'); seek(3080.0)">
              simple string, and we're going to put that value in the current state.
            </span>
            
            <span id="chunk-778" class="transcript-chunks" onclick="console.log('00:51:25,380'); seek(3085.0)">
              And assuming that we can get that value
            </span>
            
            <span id="chunk-779" class="transcript-chunks" onclick="console.log('00:51:29,018'); seek(3089.0)">
              out, then we're going to
            </span>
            
            <span id="chunk-780" class="transcript-chunks" onclick="console.log('00:51:32,840'); seek(3092.0)">
              find the event object, the event struct
            </span>
            
            <span id="chunk-781" class="transcript-chunks" onclick="console.log('00:51:37,056'); seek(3097.0)">
              that it's inside of our final state machine by iterating
            </span>
            
            <span id="chunk-782" class="transcript-chunks" onclick="console.log('00:51:41,440'); seek(3101.0)">
              over the events and going to find the event with the name
            </span>
            
            <span id="chunk-783" class="transcript-chunks" onclick="console.log('00:51:45,262'); seek(3105.0)">
              that matches the FSM event value that's being
            </span>
            
            <span id="chunk-784" class="transcript-chunks" onclick="console.log('00:51:49,486'); seek(3109.0)">
              passed to us. So this is the event that we're checking whether
            </span>
            
            <span id="chunk-785" class="transcript-chunks" onclick="console.log('00:51:53,118'); seek(3113.0)">
              that hash can transition to, right. So if
            </span>
            
            <span id="chunk-786" class="transcript-chunks" onclick="console.log('00:51:56,418'); seek(3116.0)">
              we find that event, it's going to be in our event object.
            </span>
            
            <span id="chunk-787" class="transcript-chunks" onclick="console.log('00:52:02,320'); seek(3122.0)">
              And then if the current state of the
            </span>
            
            <span id="chunk-788" class="transcript-chunks" onclick="console.log('00:52:05,714'); seek(3125.0)">
              from field. So if the current state
            </span>
            
            <span id="chunk-789" class="transcript-chunks" onclick="console.log('00:52:09,478'); seek(3129.0)">
              of the hash, it's one of the values in
            </span>
            
            <span id="chunk-790" class="transcript-chunks" onclick="console.log('00:52:15,318'); seek(3135.0)">
              the event from vector,
            </span>
            
            <span id="chunk-791" class="transcript-chunks" onclick="console.log('00:52:18,896'); seek(3138.0)">
              then we know that we can transition to the
            </span>
            
            <span id="chunk-792" class="transcript-chunks" onclick="console.log('00:52:22,666'); seek(3142.0)">
              final state denoted by that event.
            </span>
            
            <span id="chunk-793" class="transcript-chunks" onclick="console.log('00:52:26,920'); seek(3146.0)">
              So if that's the case,
            </span>
            
            <span id="chunk-794" class="transcript-chunks" onclick="console.log('00:52:34,300'); seek(3154.0)">
              we can basically return that
            </span>
            
            <span id="chunk-795" class="transcript-chunks" onclick="console.log('00:52:37,902'); seek(3157.0)">
              event. Otherwise we return none. And now if we
            </span>
            
            <span id="chunk-796" class="transcript-chunks" onclick="console.log('00:52:41,342'); seek(3161.0)">
              go back to the FSM allowed method.
            </span>
            
            <span id="chunk-797" class="transcript-chunks" onclick="console.log('00:52:50,080'); seek(3170.0)">
              Here we go.
            </span>
            
            <span id="chunk-798" class="transcript-chunks" onclick="console.log('00:52:52,480'); seek(3172.0)">
              Now we can refactor this to
            </span>
            
            <span id="chunk-799" class="transcript-chunks" onclick="console.log('00:52:56,374'); seek(3176.0)">
              extract the keys.
            </span>
            
            <span id="chunk-800" class="transcript-chunks" onclick="console.log('00:53:00,012'); seek(3180.0)">
              So I'm going to extract the final state machine key as the first key.
            </span>
            
            <span id="chunk-801" class="transcript-chunks" onclick="console.log('00:53:03,910'); seek(3183.0)">
              Then the next key would be the hash key.
            </span>
            
            <span id="chunk-802" class="transcript-chunks" onclick="console.log('00:53:07,366'); seek(3187.0)">
              We're also loading our redis key.
            </span>
            
            <span id="chunk-803" class="transcript-chunks" onclick="console.log('00:53:10,778'); seek(3190.0)">
              So we can read the final state machine value
            </span>
            
            <span id="chunk-804" class="transcript-chunks" onclick="console.log('00:53:17,320'); seek(3197.0)">
              and these event would
            </span>
            
            <span id="chunk-805" class="transcript-chunks" onclick="console.log('00:53:20,442'); seek(3200.0)">
              be the next argument. So remember there's only two keys.
            </span>
            
            <span id="chunk-806" class="transcript-chunks" onclick="console.log('00:53:23,936'); seek(3203.0)">
              So there's the final state machine key, the hash key,
            </span>
            
            <span id="chunk-807" class="transcript-chunks" onclick="console.log('00:53:27,726'); seek(3207.0)">
              and then the target event. So that's why we only have two
            </span>
            
            <span id="chunk-808" class="transcript-chunks" onclick="console.log('00:53:31,502'); seek(3211.0)">
              keys denoted in our declaration
            </span>
            
            <span id="chunk-809" class="transcript-chunks" onclick="console.log('00:53:35,444'); seek(3215.0)">
              down here. So that two means that there's two keys, even though we have three
            </span>
            
            <span id="chunk-810" class="transcript-chunks" onclick="console.log('00:53:38,802'); seek(3218.0)">
              parameters. The third parameter, it's the event that we're checking against.
            </span>
            
            <span id="chunk-811" class="transcript-chunks" onclick="console.log('00:53:43,840'); seek(3223.0)">
              All right, so back to the FSM allowed.
            </span>
            
            <span id="chunk-812" class="transcript-chunks" onclick="console.log('00:53:46,980'); seek(3226.0)">
              Let's finish that implements. So in here I'm going to have that guard again
            </span>
            
            <span id="chunk-813" class="transcript-chunks" onclick="console.log('00:53:51,078'); seek(3231.0)">
              where I extract the final state machine object by
            </span>
            
            <span id="chunk-814" class="transcript-chunks" onclick="console.log('00:53:54,822'); seek(3234.0)">
              reimbing it from redis,
            </span>
            
            <span id="chunk-815" class="transcript-chunks" onclick="console.log('00:53:59,380'); seek(3239.0)">
              giving its key. And then now
            </span>
            
            <span id="chunk-816" class="transcript-chunks" onclick="console.log('00:54:02,906'); seek(3242.0)">
              that I have the final state machine, I can call the final state machine allowed
            </span>
            
            <span id="chunk-817" class="transcript-chunks" onclick="console.log('00:54:06,768'); seek(3246.0)">
              method that we just implemented above, passing the context,
            </span>
            
            <span id="chunk-818" class="transcript-chunks" onclick="console.log('00:54:09,824'); seek(3249.0)">
              since we're going to use that to basically read things
            </span>
            
            <span id="chunk-819" class="transcript-chunks" onclick="console.log('00:54:14,590'); seek(3254.0)">
              from redis, the hash key and the event. And then
            </span>
            
            <span id="chunk-820" class="transcript-chunks" onclick="console.log('00:54:19,260'); seek(3259.0)">
              if I get an event back, that means that we're good.
            </span>
            
            <span id="chunk-821" class="transcript-chunks" onclick="console.log('00:54:23,006'); seek(3263.0)">
              So I don't need the event object in this specific method,
            </span>
            
            <span id="chunk-822" class="transcript-chunks" onclick="console.log('00:54:26,120'); seek(3266.0)">
              but then I'm going to use it to determine whether to return true or false
            </span>
            
            <span id="chunk-823" class="transcript-chunks" onclick="console.log('00:54:29,512'); seek(3269.0)">
              right here.
            </span>
            
            <span id="chunk-824" class="transcript-chunks" onclick="console.log('00:54:33,280'); seek(3273.0)">
              So now let's recompile
            </span>
            
            <span id="chunk-825" class="transcript-chunks" onclick="console.log('00:54:36,668'); seek(3276.0)">
              the code and
            </span>
            
            <span id="chunk-826" class="transcript-chunks" onclick="console.log('00:54:41,936'); seek(3281.0)">
              let's restart our server, loading our module and
            </span>
            
            <span id="chunk-827" class="transcript-chunks" onclick="console.log('00:54:47,168'); seek(3287.0)">
              then back on the CLI.
            </span>
            
            <span id="chunk-828" class="transcript-chunks" onclick="console.log('00:54:50,690'); seek(3290.0)">
              Let's up arrow here to recreate what we've done
            </span>
            
            <span id="chunk-829" class="transcript-chunks" onclick="console.log('00:54:53,892'); seek(3293.0)">
              before. We're going to load the FSM
            </span>
            
            <span id="chunk-830" class="transcript-chunks" onclick="console.log('00:55:01,670'); seek(3301.0)">
              and let's set a hash
            </span>
            
            <span id="chunk-831" class="transcript-chunks" onclick="console.log('00:55:05,806'); seek(3305.0)">
              again. Let's use these job one with employee Brian.
            </span>
            
            <span id="chunk-832" class="transcript-chunks" onclick="console.log('00:55:12,790'); seek(3312.0)">
              Again, let's double check that our
            </span>
            
            <span id="chunk-833" class="transcript-chunks" onclick="console.log('00:55:16,636'); seek(3316.0)">
              initial state has been set on the hash.
            </span>
            
            <span id="chunk-834" class="transcript-chunks" onclick="console.log('00:55:19,874'); seek(3319.0)">
              You can see that the state is sleeping. So now I'm
            </span>
            
            <span id="chunk-835" class="transcript-chunks" onclick="console.log('00:55:23,234'); seek(3323.0)">
              going to do an FSM and this is going
            </span>
            
            <span id="chunk-836" class="transcript-chunks" onclick="console.log('00:55:26,604'); seek(3326.0)">
              to be allowed. Notice that the CLI autocompletes that.
            </span>
            
            <span id="chunk-837" class="transcript-chunks" onclick="console.log('00:55:30,608'); seek(3330.0)">
              And these first key
            </span>
            
            <span id="chunk-838" class="transcript-chunks" onclick="console.log('00:55:34,336'); seek(3334.0)">
              we're going to pass here. It's our job,
            </span>
            
            <span id="chunk-839" class="transcript-chunks" onclick="console.log('00:55:37,584'); seek(3337.0)">
              FSM. And then the second
            </span>
            
            <span id="chunk-840" class="transcript-chunks" onclick="console.log('00:55:41,460'); seek(3341.0)">
              one is going to be the hash,
            </span>
            
            <span id="chunk-841" class="transcript-chunks" onclick="console.log('00:55:44,586'); seek(3344.0)">
              which is job one.
            </span>
            
            <span id="chunk-842" class="transcript-chunks" onclick="console.log('00:55:47,570'); seek(3347.0)">
              And then let's test
            </span>
            
            <span id="chunk-843" class="transcript-chunks" onclick="console.log('00:55:52,020'); seek(3352.0)">
              one of the events. So one of the events that we have
            </span>
            
            <span id="chunk-844" class="transcript-chunks" onclick="console.log('00:55:56,232'); seek(3356.0)">
              in our final state machine,
            </span>
            
            <span id="chunk-845" class="transcript-chunks" onclick="console.log('00:55:59,454'); seek(3359.0)">
              it's sleep. So sleep can transition from
            </span>
            
            <span id="chunk-846" class="transcript-chunks" onclick="console.log('00:56:03,880'); seek(3363.0)">
              running or cleaning. So let's try that one.
            </span>
            
            <span id="chunk-847" class="transcript-chunks" onclick="console.log('00:56:08,490'); seek(3368.0)">
              Since we are not on running or cleaning, we're in sleeping,
            </span>
            
            <span id="chunk-848" class="transcript-chunks" onclick="console.log('00:56:11,890'); seek(3371.0)">
              we return false, because we cannot transition
            </span>
            
            <span id="chunk-849" class="transcript-chunks" onclick="console.log('00:56:16,670'); seek(3376.0)">
              using sleep. So the sleep event is not allowed
            </span>
            
            <span id="chunk-850" class="transcript-chunks" onclick="console.log('00:56:20,150'); seek(3380.0)">
              in this specific case.
            </span>
            
            <span id="chunk-851" class="transcript-chunks" onclick="console.log('00:56:23,550'); seek(3383.0)">
              But running can.
            </span>
            
            <span id="chunk-852" class="transcript-chunks" onclick="console.log('00:56:29,330'); seek(3389.0)">
              The event run can transition from
            </span>
            
            <span id="chunk-853" class="transcript-chunks" onclick="console.log('00:56:32,436'); seek(3392.0)">
              sleeping to running. So let's see if run
            </span>
            
            <span id="chunk-854" class="transcript-chunks" onclick="console.log('00:56:36,516'); seek(3396.0)">
              it's allowed. And as you can see, run it is allowed.
            </span>
            
            <span id="chunk-855" class="transcript-chunks" onclick="console.log('00:56:40,954'); seek(3400.0)">
              All right, so now we have a way to check whether an event can be
            </span>
            
            <span id="chunk-856" class="transcript-chunks" onclick="console.log('00:56:44,504'); seek(3404.0)">
              applied to a given hash.
            </span>
            
            <span id="chunk-857" class="transcript-chunks" onclick="console.log('00:56:50,870'); seek(3410.0)">
              Finally, we can implements the FSM trigger command.
            </span>
            
            <span id="chunk-858" class="transcript-chunks" onclick="console.log('00:56:56,170'); seek(3416.0)">
              All right, so now we actually are only missing
            </span>
            
            <span id="chunk-859" class="transcript-chunks" onclick="console.log('00:57:00,050'); seek(3420.0)">
              the command that would allow us to actually transition
            </span>
            
            <span id="chunk-860" class="transcript-chunks" onclick="console.log('00:57:04,410'); seek(3424.0)">
              a hash from one event
            </span>
            
            <span id="chunk-861" class="transcript-chunks" onclick="console.log('00:57:07,596'); seek(3427.0)">
              to the other. So we have one to ask whether a transition or
            </span>
            
            <span id="chunk-862" class="transcript-chunks" onclick="console.log('00:57:11,152'); seek(3431.0)">
              an event can be applied to a hash.
            </span>
            
            <span id="chunk-863" class="transcript-chunks" onclick="console.log('00:57:14,774'); seek(3434.0)">
              And now we're going to have one that actually triggers that event.
            </span>
            
            <span id="chunk-864" class="transcript-chunks" onclick="console.log('00:57:18,336'); seek(3438.0)">
              So to do that we're going to create a skeleton method
            </span>
            
            <span id="chunk-865" class="transcript-chunks" onclick="console.log('00:57:22,930'); seek(3442.0)">
              for our new command. And this is going to be FSM trigger.
            </span>
            
            <span id="chunk-866" class="transcript-chunks" onclick="console.log('00:57:27,570'); seek(3447.0)">
              We're grabbing basically the same arguments that we were grabbing
            </span>
            
            <span id="chunk-867" class="transcript-chunks" onclick="console.log('00:57:31,546'); seek(3451.0)">
              with FSM allowed. So this whole block here,
            </span>
            
            <span id="chunk-868" class="transcript-chunks" onclick="console.log('00:57:34,792'); seek(3454.0)">
              it's identical. We again are grabbing the state machine
            </span>
            
            <span id="chunk-869" class="transcript-chunks" onclick="console.log('00:57:38,510'); seek(3458.0)">
              and this one is again going to return a boolean.
            </span>
            
            <span id="chunk-870" class="transcript-chunks" onclick="console.log('00:57:41,886'); seek(3461.0)">
              So to actually do this, we now
            </span>
            
            <span id="chunk-871" class="transcript-chunks" onclick="console.log('00:57:45,980'); seek(3465.0)">
              need to, as we did before, implements a
            </span>
            
            <span id="chunk-872" class="transcript-chunks" onclick="console.log('00:57:50,124'); seek(3470.0)">
              method in our final state machine,
            </span>
            
            <span id="chunk-873" class="transcript-chunks" onclick="console.log('00:57:53,730'); seek(3473.0)">
              finite state machine struct.
            </span>
            
            <span id="chunk-874" class="transcript-chunks" onclick="console.log('00:57:58,630'); seek(3478.0)">
              So let's find our implementation up
            </span>
            
            <span id="chunk-875" class="transcript-chunks" onclick="console.log('00:58:03,264'); seek(3483.0)">
              here. Okay, so we have there the allowed method
            </span>
            
            <span id="chunk-876" class="transcript-chunks" onclick="console.log('00:58:07,398'); seek(3487.0)">
              that we implemented earlier, and now we're
            </span>
            
            <span id="chunk-877" class="transcript-chunks" onclick="console.log('00:58:11,498'); seek(3491.0)">
              going to create a trigger method. And the trigger method, the implementation,
            </span>
            
            <span id="chunk-878" class="transcript-chunks" onclick="console.log('00:58:15,530'); seek(3495.0)">
              it's very similar and it actually reuses the
            </span>
            
            <span id="chunk-879" class="transcript-chunks" onclick="console.log('00:58:19,012'); seek(3499.0)">
              allowed method. So notice in here that again
            </span>
            
            <span id="chunk-880" class="transcript-chunks" onclick="console.log('00:58:22,376'); seek(3502.0)">
              I am grabbing the key of the hash
            </span>
            
            <span id="chunk-881" class="transcript-chunks" onclick="console.log('00:58:26,030'); seek(3506.0)">
              that I'm interested in applying an event against,
            </span>
            
            <span id="chunk-882" class="transcript-chunks" onclick="console.log('00:58:29,688'); seek(3509.0)">
              and then I am going to grab the event.
            </span>
            
            <span id="chunk-883" class="transcript-chunks" onclick="console.log('00:58:32,552'); seek(3512.0)">
              Only remember that we said allow to return the
            </span>
            
            <span id="chunk-884" class="transcript-chunks" onclick="console.log('00:58:37,404'); seek(3517.0)">
              event that you need to use for that specific current
            </span>
            
            <span id="chunk-885" class="transcript-chunks" onclick="console.log('00:58:42,410'); seek(3522.0)">
              event. And I use
            </span>
            
            <span id="chunk-886" class="transcript-chunks" onclick="console.log('00:58:45,708'); seek(3525.0)">
              the allowed method above to grab that event,
            </span>
            
            <span id="chunk-887" class="transcript-chunks" onclick="console.log('00:58:48,928'); seek(3528.0)">
              passing the context, the key of the
            </span>
            
            <span id="chunk-888" class="transcript-chunks" onclick="console.log('00:58:53,200'); seek(3533.0)">
              final state machine, of the hash and
            </span>
            
            <span id="chunk-889" class="transcript-chunks" onclick="console.log('00:58:56,912'); seek(3536.0)">
              the event. And then I'm going
            </span>
            
            <span id="chunk-890" class="transcript-chunks" onclick="console.log('00:59:00,132'); seek(3540.0)">
              to now call h set on the target hash,
            </span>
            
            <span id="chunk-891" class="transcript-chunks" onclick="console.log('00:59:04,458'); seek(3544.0)">
              and I'm going to set the event field
            </span>
            
            <span id="chunk-892" class="transcript-chunks" onclick="console.log('00:59:08,180'); seek(3548.0)">
              or the state field to the event that they're interested
            </span>
            
            <span id="chunk-893" class="transcript-chunks" onclick="console.log('00:59:11,460'); seek(3551.0)">
              in. And again, I have this guard right here that
            </span>
            
            <span id="chunk-894" class="transcript-chunks" onclick="console.log('00:59:15,000'); seek(3555.0)">
              basically it's asking whether the event is allowed by using
            </span>
            
            <span id="chunk-895" class="transcript-chunks" onclick="console.log('00:59:18,456'); seek(3558.0)">
              the allowed method. And if it's so I then change
            </span>
            
            <span id="chunk-896" class="transcript-chunks" onclick="console.log('00:59:21,864'); seek(3561.0)">
              the value of that field on the hash.
            </span>
            
            <span id="chunk-897" class="transcript-chunks" onclick="console.log('00:59:24,962'); seek(3564.0)">
              Then I basically just return to
            </span>
            
            <span id="chunk-898" class="transcript-chunks" onclick="console.log('00:59:29,452'); seek(3569.0)">
              the caller if I get an okay response.
            </span>
            
            <span id="chunk-899" class="transcript-chunks" onclick="console.log('00:59:33,474'); seek(3573.0)">
              So now once we have that
            </span>
            
            <span id="chunk-900" class="transcript-chunks" onclick="console.log('00:59:37,312'); seek(3577.0)">
              trigger implemented in there in the final
            </span>
            
            <span id="chunk-901" class="transcript-chunks" onclick="console.log('00:59:41,216'); seek(3581.0)">
              state machine, we can go back to our
            </span>
            
            <span id="chunk-902" class="transcript-chunks" onclick="console.log('00:59:44,496'); seek(3584.0)">
              FSM trigger skeleton and finish the implementation
            </span>
            
            <span id="chunk-903" class="transcript-chunks" onclick="console.log('00:59:48,806'); seek(3588.0)">
              in here by simply having an allowed variable
            </span>
            
            <span id="chunk-904" class="transcript-chunks" onclick="console.log('00:59:52,490'); seek(3592.0)">
              that calls the trigger method
            </span>
            
            <span id="chunk-905" class="transcript-chunks" onclick="console.log('00:59:57,130'); seek(3597.0)">
              in the finite state machine struct.
            </span>
            
            <span id="chunk-906" class="transcript-chunks" onclick="console.log('01:00:01,418'); seek(3601.0)">
              And I use that to return that boolean
            </span>
            
            <span id="chunk-907" class="transcript-chunks" onclick="console.log('01:00:06,030'); seek(3606.0)">
              as an integer in my redis value response
            </span>
            
            <span id="chunk-908" class="transcript-chunks" onclick="console.log('01:00:10,790'); seek(3610.0)">
              redis result. So with that in place,
            </span>
            
            <span id="chunk-909" class="transcript-chunks" onclick="console.log('01:00:14,264'); seek(3614.0)">
              then all we have left to do is
            </span>
            
            <span id="chunk-910" class="transcript-chunks" onclick="console.log('01:00:18,524'); seek(3618.0)">
              register our method. So now I'm registering
            </span>
            
            <span id="chunk-911" class="transcript-chunks" onclick="console.log('01:00:22,178'); seek(3622.0)">
              the trigger method with the redis module
            </span>
            
            <span id="chunk-912" class="transcript-chunks" onclick="console.log('01:00:26,290'); seek(3626.0)">
              macro commands list. And again, this one,
            </span>
            
            <span id="chunk-913" class="transcript-chunks" onclick="console.log('01:00:29,968'); seek(3629.0)">
              it's just like FSM created. It's a write method
            </span>
            
            <span id="chunk-914" class="transcript-chunks" onclick="console.log('01:00:34,230'); seek(3634.0)">
              and it takes the first key, it's the
            </span>
            
            <span id="chunk-915" class="transcript-chunks" onclick="console.log('01:00:37,648'); seek(3637.0)">
              key in position one, position zero, remember, is just the
            </span>
            
            <span id="chunk-916" class="transcript-chunks" onclick="console.log('01:00:41,508'); seek(3641.0)">
              command itself. And it has two keys,
            </span>
            
            <span id="chunk-917" class="transcript-chunks" onclick="console.log('01:00:44,842'); seek(3644.0)">
              the final state machine and the hash.
            </span>
            
            <span id="chunk-918" class="transcript-chunks" onclick="console.log('01:00:48,130'); seek(3648.0)">
              So now with that in place, we can
            </span>
            
            <span id="chunk-919" class="transcript-chunks" onclick="console.log('01:00:53,590'); seek(3653.0)">
              test again.
            </span>
            
            <span id="chunk-920" class="transcript-chunks" onclick="console.log('01:00:57,270'); seek(3657.0)">
              So, okay, now we have completed the basic implementation
            </span>
            
            <span id="chunk-921" class="transcript-chunks" onclick="console.log('01:01:01,038'); seek(3661.0)">
              of our toit state machine. So let's go ahead and compile the
            </span>
            
            <span id="chunk-922" class="transcript-chunks" onclick="console.log('01:01:04,972'); seek(3664.0)">
              code again. And I'm going to
            </span>
            
            <span id="chunk-923" class="transcript-chunks" onclick="console.log('01:01:08,684'); seek(3668.0)">
              launch the redis server.
            </span>
            
            <span id="chunk-924" class="transcript-chunks" onclick="console.log('01:01:11,770'); seek(3671.0)">
              And then once again, let's get to the CLI
            </span>
            
            <span id="chunk-925" class="transcript-chunks" onclick="console.log('01:01:17,150'); seek(3677.0)">
              and arrow to find our FSM create.
            </span>
            
            <span id="chunk-926" class="transcript-chunks" onclick="console.log('01:01:20,880'); seek(3680.0)">
              Let's just test all of our methods. So when we run FSM create,
            </span>
            
            <span id="chunk-927" class="transcript-chunks" onclick="console.log('01:01:26,430'); seek(3686.0)">
              remember that that creates the job
            </span>
            
            <span id="chunk-928" class="transcript-chunks" onclick="console.log('01:01:30,084'); seek(3690.0)">
              FSM custom
            </span>
            
            <span id="chunk-929" class="transcript-chunks" onclick="console.log('01:01:33,620'); seek(3693.0)">
              data type, which is a finite state machine data type. So when
            </span>
            
            <span id="chunk-930" class="transcript-chunks" onclick="console.log('01:01:37,092'); seek(3697.0)">
              we check the type of it, we get redis fsm,
            </span>
            
            <span id="chunk-931" class="transcript-chunks" onclick="console.log('01:01:41,590'); seek(3701.0)">
              these redis fsm hash.
            </span>
            
            <span id="chunk-932" class="transcript-chunks" onclick="console.log('01:01:45,190'); seek(3705.0)">
              Once again, it's a native redis hash
            </span>
            
            <span id="chunk-933" class="transcript-chunks" onclick="console.log('01:01:49,486'); seek(3709.0)">
              where we are keeping our mappings of mappings
            </span>
            
            <span id="chunk-934" class="transcript-chunks" onclick="console.log('01:01:57,210'); seek(3717.0)">
              of prefixes or hash prefixes to
            </span>
            
            <span id="chunk-935" class="transcript-chunks" onclick="console.log('01:02:01,564'); seek(3721.0)">
              finite state machine keys.
            </span>
            
            <span id="chunk-936" class="transcript-chunks" onclick="console.log('01:02:04,890'); seek(3724.0)">
              So again, we have for the sample that we've been using,
            </span>
            
            <span id="chunk-937" class="transcript-chunks" onclick="console.log('01:02:08,928'); seek(3728.0)">
              it's job for the prefix, and that maps to
            </span>
            
            <span id="chunk-938" class="transcript-chunks" onclick="console.log('01:02:12,912'); seek(3732.0)">
              the job fsm key. All right,
            </span>
            
            <span id="chunk-939" class="transcript-chunks" onclick="console.log('01:02:15,728'); seek(3735.0)">
              remember that we also implements the
            </span>
            
            <span id="chunk-940" class="transcript-chunks" onclick="console.log('01:02:19,264'); seek(3739.0)">
              info so we can pass the
            </span>
            
            <span id="chunk-941" class="transcript-chunks" onclick="console.log('01:02:22,820'); seek(3742.0)">
              name of a state machine and that will basically grab
            </span>
            
            <span id="chunk-942" class="transcript-chunks" onclick="console.log('01:02:26,474'); seek(3746.0)">
              that native data type that's stored in redis and use cert
            </span>
            
            <span id="chunk-943" class="transcript-chunks" onclick="console.log('01:02:31,780'); seek(3751.0)">
              JSON to convert that to a readable chunk
            </span>
            
            <span id="chunk-944" class="transcript-chunks" onclick="console.log('01:02:35,582'); seek(3755.0)">
              of JSON. And if
            </span>
            
            <span id="chunk-945" class="transcript-chunks" onclick="console.log('01:02:39,944'); seek(3759.0)">
              we create, let's create
            </span>
            
            <span id="chunk-946" class="transcript-chunks" onclick="console.log('01:02:44,090'); seek(3764.0)">
              a hash.
            </span>
            
            <span id="chunk-947" class="transcript-chunks" onclick="console.log('01:02:47,450'); seek(3767.0)">
              Here we go. We create a hash. And now we do
            </span>
            
            <span id="chunk-948" class="transcript-chunks" onclick="console.log('01:02:51,452'); seek(3771.0)">
              an h get all on that hash.
            </span>
            
            <span id="chunk-949" class="transcript-chunks" onclick="console.log('01:02:55,370'); seek(3775.0)">
              We should have our state
            </span>
            
            <span id="chunk-950" class="transcript-chunks" onclick="console.log('01:03:00,688'); seek(3780.0)">
              set to the correct value, which is the initial state of
            </span>
            
            <span id="chunk-951" class="transcript-chunks" onclick="console.log('01:03:04,224'); seek(3784.0)">
              the state machine sleeping. And then remember
            </span>
            
            <span id="chunk-952" class="transcript-chunks" onclick="console.log('01:03:07,920'); seek(3787.0)">
              that we can ask the state machine
            </span>
            
            <span id="chunk-953" class="transcript-chunks" onclick="console.log('01:03:13,010'); seek(3793.0)">
              whether we can transition to the different using
            </span>
            
            <span id="chunk-954" class="transcript-chunks" onclick="console.log('01:03:17,380'); seek(3797.0)">
              different events. So we can ask whether we can run
            </span>
            
            <span id="chunk-955" class="transcript-chunks" onclick="console.log('01:03:21,188'); seek(3801.0)">
              from sleeping. And it says yes.
            </span>
            
            <span id="chunk-956" class="transcript-chunks" onclick="console.log('01:03:24,470'); seek(3804.0)">
              And what was the other one?
            </span>
            
            <span id="chunk-957" class="transcript-chunks" onclick="console.log('01:03:28,390'); seek(3808.0)">
              The other one was sleep, and that's a no.
            </span>
            
            <span id="chunk-958" class="transcript-chunks" onclick="console.log('01:03:32,630'); seek(3812.0)">
              So since we know that we are allowed to
            </span>
            
            <span id="chunk-959" class="transcript-chunks" onclick="console.log('01:03:36,780'); seek(3816.0)">
              run, I'm going to trigger the
            </span>
            
            <span id="chunk-960" class="transcript-chunks" onclick="console.log('01:03:44,170'); seek(3824.0)">
              run event on our target
            </span>
            
            <span id="chunk-961" class="transcript-chunks" onclick="console.log('01:03:48,342'); seek(3828.0)">
              hash. And that responded with a true.
            </span>
            
            <span id="chunk-962" class="transcript-chunks" onclick="console.log('01:03:52,544'); seek(3832.0)">
              So now if we do an h, get all,
            </span>
            
            <span id="chunk-963" class="transcript-chunks" onclick="console.log('01:03:55,376'); seek(3835.0)">
              remember we were in these state sleeping, and now we are in the
            </span>
            
            <span id="chunk-964" class="transcript-chunks" onclick="console.log('01:03:59,248'); seek(3839.0)">
              state running. So there we go. A simple toy
            </span>
            
            <span id="chunk-965" class="transcript-chunks" onclick="console.log('01:04:03,622'); seek(3843.0)">
              state machine implemented as a Redis module.
            </span>
            
            <span id="chunk-966" class="transcript-chunks" onclick="console.log('01:04:08,930'); seek(3848.0)">
              And of course, all the source code for today's demo can be found under my
            </span>
            
            <span id="chunk-967" class="transcript-chunks" onclick="console.log('01:04:12,628'); seek(3852.0)">
              GitHub repositories.
            </span>
            
            <span id="chunk-968" class="transcript-chunks" onclick="console.log('01:04:16,130'); seek(3856.0)">
              To learn more, visit us at Redis developer, which is
            </span>
            
            <span id="chunk-969" class="transcript-chunks" onclick="console.log('01:04:20,052'); seek(3860.0)">
              located at developer redis.com. These we have tons
            </span>
            
            <span id="chunk-970" class="transcript-chunks" onclick="console.log('01:04:23,194'); seek(3863.0)">
              of examples for pretty much every programming language for
            </span>
            
            <span id="chunk-971" class="transcript-chunks" onclick="console.log('01:04:26,716'); seek(3866.0)">
              interesting things you can do with Redis. And also, if you want
            </span>
            
            <span id="chunk-972" class="transcript-chunks" onclick="console.log('01:04:30,364'); seek(3870.0)">
              to learn more about Redis, come to Redis University, where there's a variety
            </span>
            
            <span id="chunk-973" class="transcript-chunks" onclick="console.log('01:04:34,082'); seek(3874.0)">
              of courses that can help you become a Redis expert in no time.
            </span>
            
            </div>
          </div>
          
          

          

          <div class="col-12 mb-2 text-center">
            <div class="text-center mb-5">
              <a href="https://www.conf42.com/rustlang2022" class="btn btn-sm btn-danger shadow lift" style="background-color: #C79716;">
                <i class="fe fe-grid me-2"></i>
                See all 8 talks at this event!
              </a>
            </div>
          </div>
        </div> <!-- / .row -->
      </div> <!-- / .container -->
    </section>

    <!-- PHOTO -->
    <section class="pt-8 pb-6">
      <div class="container">

        <div class="row align-items-center">
          <div class="col-12 col-md-6 col-lg-7">

            <div class="mb-8 mb-md-0">

              <!-- Image -->
              <img src="https://conf42.github.io/static/headshots/rust_brian_sam-bodden.png" alt="..." class="screenshot img-fluid mw-md-110 float-end me-md-6 mb-6 mb-md-0">

            </div>

          </div>
          <div class="col-12 col-md-6 col-lg-5">

            <!-- List -->
            <div class="d-flex">

              <!-- Body -->
              <div class="ms-5">

                <!-- Author 1 -->
                <h2 class="me-2">
                  Brian Sam-Bodden
                </h2>
                <h3 class="me-2">
                  <span class="text-muted">
                    Developer Advocate @ Redis
                  </span>
                </h3>

                <p class="text-uppercase text-muted me-2 mb-3">
                  
                  <a href="https://www.linkedin.com/in/sambodden/" target="_blank" class="mr-3">
                    <img src="./assets/img/icons/social/linkedin.svg" class="list-social-icon" alt="Brian Sam-Bodden's LinkedIn account" />
                  </a>
                  
                  
                  <a href="https://twitter.com/@bsbodden" target="_blank">
                    <img src="./assets/img/icons/social/twitter.svg" class="list-social-icon" alt="Brian Sam-Bodden's twitter account" />
                  </a>
                  
                </p>
                

                <br />

                <a
                  href="https://twitter.com/share?ref_src=twsrc%5Etfw"
                  class="twitter-share-button"

                  data-text="Check out this talk by @bsbodden"
                  data-url="https://www.conf42.com/rustlang2022"
                  data-via="conf42com"
                  data-related=""
                  data-show-count="false"
                >
                  Tweet
                </a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

                <br />

                <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
                <script type="IN/Share" data-url="https://www.conf42.com/rustlang2022"></script>
              </div>

            </div>
          </div>
        </div> <!-- / .row -->
      </div> <!-- / .container -->
    </section>






    <!-- WELCOME -->
    <section class="pt-8 pt-md-11 pb-10 pb-md-15 bg-info" id="register">

      <!-- Shape -->
      <div class="shape shape-blur-3 text-white">
        <svg viewBox="0 0 1738 487" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h1420.92s713.43 457.505 0 485.868C707.502 514.231 0 0 0 0z" fill="url(#paint0_linear)"/><defs><linearGradient id="paint0_linear" x1="0" y1="0" x2="1049.98" y2="912.68" gradientUnits="userSpaceOnUse"><stop stop-color="currentColor" stop-opacity=".075"/><stop offset="1" stop-color="currentColor" stop-opacity="0"/></linearGradient></defs></svg>      </div>

      <!-- Content -->
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 col-md-10 col-lg-8 text-center">

            <!-- Heading -->
            <h1 class="display-2 text-white">
              Join the community!
            </h1>

            <!-- Text -->
            <p class="lead text-white text-opacity-80 mb-6 mb-md-8">
              Learn for free, join the best tech learning community 
              for a <a class="text-white" href="https://www.reddit.com/r/sanfrancisco/comments/1bz90f6/why_are_coffee_shops_in_sf_so_expensive/" target="_blank">price of a cappucino</a>.
            </p>

            <!-- Form -->
            <form class="d-flex align-items-center justify-content-center mb-7 mb-md-9">

              <!-- Label -->
              <span class="text-white text-opacity-80">
                Annual
              </span>

              <!-- Switch -->
              <div class="form-check form-check-dark form-switch mx-3">
                <input class="form-check-input" type="checkbox" id="billingSwitch" data-toggle="price" data-target=".price">
              </div>

              <!-- Label -->
              <span class="text-white text-opacity-80">
                Monthly
              </span>

            </form>

          </div>
        </div> <!-- / .row -->
      </div> <!-- / .container -->

    </section>

    <!-- SHAPE -->
    <div class="position-relative">
      <div class="shape shape-bottom shape-fluid-x text-light">
        <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 48h2880V0h-720C1442.5 52 720 0 720 0H0v48z" fill="currentColor"/></svg>      </div>
    </div>

    <!-- PRICING -->
    <section class="mt-n8 mt-md-n15">
      <div class="container">
        <div class="row gx-4">
          <div class="col-12 col-md-6">

            <!-- Card -->
            <div class="card shadow-lg mb-6 mb-md-1">
              <div class="card-body">

                <!-- Preheading -->
                <div class="text-center mb-3">
                  <span class="badge rounded-pill bg-primary-soft">
                    <span class="h6 text-uppercase">Newsletter</span>
                  </span>
                </div>

                <!-- Price -->
                <div class="d-flex justify-content-center">
                  <span class="h2 mb-0 mt-2">$</span>
                  <span class="price display-2 mb-0" data-annual="0" data-monthly="0">0</span>
                  <span class="h2 align-self-end mb-1">/mo</span>
                </div>

                <!-- Text -->
                <p class="text-center text-muted mb-5">
                </p>

              
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Event notifications
                  </p>
                </div>
              
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Keynotes
                  </p>
                </div>
              
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    <b>Delayed access</b> to all content
                  </p>
                </div>
              
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Weekly newsletter
                  </p>
                </div>
              
              
              </div>
            </div>

            <!-- Card -->
            <div class="card shadow-lg mb-6 border border-success">
              <div class="card-body">

                <script>
    function gtag_report_conversion(url) {
      var callback = function () {
        if (typeof(url) != 'undefined') {
          window.location = url;
        }
      };
      gtag('event', 'conversion', {
          'send_to': 'AW-882275635/jLVTCPbt1N8CELPq2aQD',
          'event_callback': callback
      });
      return false;
    }
</script>

<!-- Form -->
<link rel="stylesheet" href="https://emailoctopus.com/bundles/emailoctopuslist/css/1.6/form.css">
<p class="emailoctopus-success-message text-success"></p>
<p class="emailoctopus-error-message text-danger"></p>
<form
    action="https://emailoctopus.com/lists/a3ba0cb5-7524-11eb-a3d0-06b4694bee2a/members/embedded/1.3/add"
    method="post"
    data-message-success="Thanks! Check your email for further directions!"
    data-message-missing-email-address="Your email address is required."
    data-message-invalid-email-address="Your email address looks incorrect, please try again."
    data-message-bot-submission-error="This doesn't look like a human submission."
    data-message-consent-required="Please check the checkbox to indicate your consent."
    data-message-invalid-parameters-error="This form has missing or invalid fields."
    data-message-unknown-error="Sorry, an unknown error has occurred. Please try again later."
    class="emailoctopus-form"
    data-sitekey="6LdYsmsUAAAAAPXVTt-ovRsPIJ_IVhvYBBhGvRV6"
>
<div class="form-floating emailoctopus-form-row">
    <input type="email" class="form-control form-control-flush" name="field_0" id="field_0" placeholder="Email" required>
    <label for="field_0">Email address</label>
</div>
<div class="form-floating emailoctopus-form-row">
    <input type="text" class="form-control form-control-flush" name="field_1" id="field_1" placeholder="First Name" required>
    <label for="field_1">First Name</label>
</div>
<div class="form-floating emailoctopus-form-row">
    <input type="text" class="form-control form-control-flush" name="field_2" id="field_2" placeholder="Last Name" required>
    <label for="field_2">Last Name</label>
</div>
<div class="form-floating emailoctopus-form-row">
    <input type="text" class="form-control form-control-flush" name="field_4" id="field_4" placeholder="Company" required>
    <label for="field_4">Company</label>
</div>
<div class="form-floating emailoctopus-form-row">
    <input type="text" class="form-control form-control-flush" name="field_5" id="field_5" placeholder="Job Title" required>
    <label for="field_5">Job Title</label>
</div>
<div class="form-floating emailoctopus-form-row">
    <input type="text" class="form-control form-control-flush" name="field_3" id="field_3" placeholder="Phone">
    <label for="field_3">Phone Number</label>
</div>
<div class="form-floating emailoctopus-form-row">
    <select type="text" class="form-control form-control-flush" name="field_7" id="country-source" required
    oninput="updateCountry()"
    >
    <!-- Country names and Country Name -->
    <option value="">Please select your country</option>
    <option value="Afghanistan">Afghanistan</option>
    <option value="Aland Islands">Aland Islands</option>
    <option value="Albania">Albania</option>
    <option value="Algeria">Algeria</option>
    <option value="American Samoa">American Samoa</option>
    <option value="Andorra">Andorra</option>
    <option value="Angola">Angola</option>
    <option value="Anguilla">Anguilla</option>
    <option value="Antarctica">Antarctica</option>
    <option value="Antigua and Barbuda">Antigua and Barbuda</option>
    <option value="Argentina">Argentina</option>
    <option value="Armenia">Armenia</option>
    <option value="Aruba">Aruba</option>
    <option value="Australia">Australia</option>
    <option value="Austria">Austria</option>
    <option value="Azerbaijan">Azerbaijan</option>
    <option value="Bahamas">Bahamas</option>
    <option value="Bahrain">Bahrain</option>
    <option value="Bangladesh">Bangladesh</option>
    <option value="Barbados">Barbados</option>
    <option value="Belarus">Belarus</option>
    <option value="Belgium">Belgium</option>
    <option value="Belize">Belize</option>
    <option value="Benin">Benin</option>
    <option value="Bermuda">Bermuda</option>
    <option value="Bhutan">Bhutan</option>
    <option value="Bolivia">Bolivia</option>
    <option value="Bonaire, Sint Eustatius and Saba">Bonaire, Sint Eustatius and Saba</option>
    <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
    <option value="Botswana">Botswana</option>
    <option value="Bouvet Island">Bouvet Island</option>
    <option value="Brazil">Brazil</option>
    <option value="British Indian Ocean Territory">British Indian Ocean Territory</option>
    <option value="Brunei Darussalam">Brunei Darussalam</option>
    <option value="Bulgaria">Bulgaria</option>
    <option value="Burkina Faso">Burkina Faso</option>
    <option value="Burundi">Burundi</option>
    <option value="Cambodia">Cambodia</option>
    <option value="Cameroon">Cameroon</option>
    <option value="Canada">Canada</option>
    <option value="Cape Verde">Cape Verde</option>
    <option value="Cayman Islands">Cayman Islands</option>
    <option value="Central African Republic">Central African Republic</option>
    <option value="Chad">Chad</option>
    <option value="Chile">Chile</option>
    <option value="China">China</option>
    <option value="Christmas Island">Christmas Island</option>
    <option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option>
    <option value="Colombia">Colombia</option>
    <option value="Comoros">Comoros</option>
    <option value="Congo">Congo</option>
    <option value="Congo, Democratic Republic of the Congo">Congo, Democratic Republic of the Congo</option>
    <option value="Cook Islands">Cook Islands</option>
    <option value="Costa Rica">Costa Rica</option>
    <option value="Cote D'Ivoire">Cote D'Ivoire</option>
    <option value="Croatia">Croatia</option>
    <option value="Cuba">Cuba</option>
    <option value="Curacao">Curacao</option>
    <option value="Cyprus">Cyprus</option>
    <option value="Czech Republic">Czech Republic</option>
    <option value="Denmark">Denmark</option>
    <option value="Djibouti">Djibouti</option>
    <option value="Dominica">Dominica</option>
    <option value="Dominican Republic">Dominican Republic</option>
    <option value="Ecuador">Ecuador</option>
    <option value="Egypt">Egypt</option>
    <option value="El Salvador">El Salvador</option>
    <option value="Equatorial Guinea">Equatorial Guinea</option>
    <option value="Eritrea">Eritrea</option>
    <option value="Estonia">Estonia</option>
    <option value="Ethiopia">Ethiopia</option>
    <option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option>
    <option value="Faroe Islands">Faroe Islands</option>
    <option value="Fiji">Fiji</option>
    <option value="Finland">Finland</option>
    <option value="France">France</option>
    <option value="French Guiana">French Guiana</option>
    <option value="French Polynesia">French Polynesia</option>
    <option value="French Southern Territories">French Southern Territories</option>
    <option value="Gabon">Gabon</option>
    <option value="Gambia">Gambia</option>
    <option value="Georgia">Georgia</option>
    <option value="Germany">Germany</option>
    <option value="Ghana">Ghana</option>
    <option value="Gibraltar">Gibraltar</option>
    <option value="Greece">Greece</option>
    <option value="Greenland">Greenland</option>
    <option value="Grenada">Grenada</option>
    <option value="Guadeloupe">Guadeloupe</option>
    <option value="Guam">Guam</option>
    <option value="Guatemala">Guatemala</option>
    <option value="Guernsey">Guernsey</option>
    <option value="Guinea">Guinea</option>
    <option value="Guinea-Bissau">Guinea-Bissau</option>
    <option value="Guyana">Guyana</option>
    <option value="Haiti">Haiti</option>
    <option value="Heard Island and Mcdonald Islands">Heard Island and Mcdonald Islands</option>
    <option value="Holy See (Vatican City State)">Holy See (Vatican City State)</option>
    <option value="Honduras">Honduras</option>
    <option value="Hong Kong">Hong Kong</option>
    <option value="Hungary">Hungary</option>
    <option value="Iceland">Iceland</option>
    <option value="India">India</option>
    <option value="Indonesia">Indonesia</option>
    <option value="Iran, Islamic Republic of">Iran, Islamic Republic of</option>
    <option value="Iraq">Iraq</option>
    <option value="Ireland">Ireland</option>
    <option value="Isle of Man">Isle of Man</option>
    <option value="Israel">Israel</option>
    <option value="Italy">Italy</option>
    <option value="Jamaica">Jamaica</option>
    <option value="Japan">Japan</option>
    <option value="Jersey">Jersey</option>
    <option value="Jordan">Jordan</option>
    <option value="Kazakhstan">Kazakhstan</option>
    <option value="Kenya">Kenya</option>
    <option value="Kiribati">Kiribati</option>
    <option value="Korea, Democratic People's Republic of">Korea, Democratic People's Republic of</option>
    <option value="Korea, Republic of">Korea, Republic of</option>
    <option value="Kosovo">Kosovo</option>
    <option value="Kuwait">Kuwait</option>
    <option value="Kyrgyzstan">Kyrgyzstan</option>
    <option value="Lao People's Democratic Republic">Lao People's Democratic Republic</option>
    <option value="Latvia">Latvia</option>
    <option value="Lebanon">Lebanon</option>
    <option value="Lesotho">Lesotho</option>
    <option value="Liberia">Liberia</option>
    <option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option>
    <option value="Liechtenstein">Liechtenstein</option>
    <option value="Lithuania">Lithuania</option>
    <option value="Luxembourg">Luxembourg</option>
    <option value="Macao">Macao</option>
    <option value="Macedonia, the Former Yugoslav Republic of">Macedonia, the Former Yugoslav Republic of</option>
    <option value="Madagascar">Madagascar</option>
    <option value="Malawi">Malawi</option>
    <option value="Malaysia">Malaysia</option>
    <option value="Maldives">Maldives</option>
    <option value="Mali">Mali</option>
    <option value="Malta">Malta</option>
    <option value="Marshall Islands">Marshall Islands</option>
    <option value="Martinique">Martinique</option>
    <option value="Mauritania">Mauritania</option>
    <option value="Mauritius">Mauritius</option>
    <option value="Mayotte">Mayotte</option>
    <option value="Mexico">Mexico</option>
    <option value="Micronesia, Federated States of">Micronesia, Federated States of</option>
    <option value="Moldova, Republic of">Moldova, Republic of</option>
    <option value="Monaco">Monaco</option>
    <option value="Mongolia">Mongolia</option>
    <option value="Montenegro">Montenegro</option>
    <option value="Montserrat">Montserrat</option>
    <option value="Morocco">Morocco</option>
    <option value="Mozambique">Mozambique</option>
    <option value="Myanmar">Myanmar</option>
    <option value="Namibia">Namibia</option>
    <option value="Nauru">Nauru</option>
    <option value="Nepal">Nepal</option>
    <option value="Netherlands">Netherlands</option>
    <option value="Netherlands Antilles">Netherlands Antilles</option>
    <option value="New Caledonia">New Caledonia</option>
    <option value="New Zealand">New Zealand</option>
    <option value="Nicaragua">Nicaragua</option>
    <option value="Niger">Niger</option>
    <option value="Nigeria">Nigeria</option>
    <option value="Niue">Niue</option>
    <option value="Norfolk Island">Norfolk Island</option>
    <option value="Northern Mariana Islands">Northern Mariana Islands</option>
    <option value="Norway">Norway</option>
    <option value="Oman">Oman</option>
    <option value="Pakistan">Pakistan</option>
    <option value="Palau">Palau</option>
    <option value="Palestinian Territory, Occupied">Palestinian Territory, Occupied</option>
    <option value="Panama">Panama</option>
    <option value="Papua New Guinea">Papua New Guinea</option>
    <option value="Paraguay">Paraguay</option>
    <option value="Peru">Peru</option>
    <option value="Philippines">Philippines</option>
    <option value="Pitcairn">Pitcairn</option>
    <option value="Poland">Poland</option>
    <option value="Portugal">Portugal</option>
    <option value="Puerto Rico">Puerto Rico</option>
    <option value="Qatar">Qatar</option>
    <option value="Reunion">Reunion</option>
    <option value="Romania">Romania</option>
    <option value="Russian Federation">Russian Federation</option>
    <option value="Rwanda">Rwanda</option>
    <option value="Saint Barthelemy">Saint Barthelemy</option>
    <option value="Saint Helena">Saint Helena</option>
    <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
    <option value="Saint Lucia">Saint Lucia</option>
    <option value="Saint Martin">Saint Martin</option>
    <option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option>
    <option value="Saint Vincent and the Grenadines">Saint Vincent and the Grenadines</option>
    <option value="Samoa">Samoa</option>
    <option value="San Marino">San Marino</option>
    <option value="Sao Tome and Principe">Sao Tome and Principe</option>
    <option value="Saudi Arabia">Saudi Arabia</option>
    <option value="Senegal">Senegal</option>
    <option value="Serbia">Serbia</option>
    <option value="Serbia and Montenegro">Serbia and Montenegro</option>
    <option value="Seychelles">Seychelles</option>
    <option value="Sierra Leone">Sierra Leone</option>
    <option value="Singapore">Singapore</option>
    <option value="Sint Maarten">Sint Maarten</option>
    <option value="Slovakia">Slovakia</option>
    <option value="Slovenia">Slovenia</option>
    <option value="Solomon Islands">Solomon Islands</option>
    <option value="Somalia">Somalia</option>
    <option value="South Africa">South Africa</option>
    <option value="South Georgia and the South Sandwich Islands">South Georgia and the South Sandwich Islands</option>
    <option value="South Sudan">South Sudan</option>
    <option value="Spain">Spain</option>
    <option value="Sri Lanka">Sri Lanka</option>
    <option value="Sudan">Sudan</option>
    <option value="Suriname">Suriname</option>
    <option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option>
    <option value="Swaziland">Swaziland</option>
    <option value="Sweden">Sweden</option>
    <option value="Switzerland">Switzerland</option>
    <option value="Syrian Arab Republic">Syrian Arab Republic</option>
    <option value="Taiwan, Province of China">Taiwan, Province of China</option>
    <option value="Tajikistan">Tajikistan</option>
    <option value="Tanzania, United Republic of">Tanzania, United Republic of</option>
    <option value="Thailand">Thailand</option>
    <option value="Timor-Leste">Timor-Leste</option>
    <option value="Togo">Togo</option>
    <option value="Tokelau">Tokelau</option>
    <option value="Tonga">Tonga</option>
    <option value="Trinidad and Tobago">Trinidad and Tobago</option>
    <option value="Tunisia">Tunisia</option>
    <option value="Turkey">Turkey</option>
    <option value="Turkmenistan">Turkmenistan</option>
    <option value="Turks and Caicos Islands">Turks and Caicos Islands</option>
    <option value="Tuvalu">Tuvalu</option>
    <option value="Uganda">Uganda</option>
    <option value="Ukraine">Ukraine</option>
    <option value="United Arab Emirates">United Arab Emirates</option>
    <option value="United Kingdom">United Kingdom</option>
    <option value="United States">United States</option>
    <option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option>
    <option value="Uruguay">Uruguay</option>
    <option value="Uzbekistan">Uzbekistan</option>
    <option value="Vanuatu">Vanuatu</option>
    <option value="Venezuela">Venezuela</option>
    <option value="Viet Nam">Viet Nam</option>
    <option value="Virgin Islands, British">Virgin Islands, British</option>
    <option value="Virgin Islands, U.s.">Virgin Islands, U.s.</option>
    <option value="Wallis and Futuna">Wallis and Futuna</option>
    <option value="Western Sahara">Western Sahara</option>
    <option value="Yemen">Yemen</option>
    <option value="Zambia">Zambia</option>
    <option value="Zimbabwe">Zimbabwe</option>
    </select>
    <label for="field_7">Country</label>
</div>
<input id="country-destination" name="field_7" type="hidden">
<input id="tz-country" name="field_8" type="hidden">

<input
    name="field_6"
    type="hidden"
    value="Rustlang"
>

<div class="emailoctopus-form-row-consent">
    <input
    type="checkbox"
    id="consent"
    name="consent"
    >
    <label for="consent">
    I consent to the following terms:
    </label>
    <a href="https://www.conf42.com/terms-and-conditions.pdf" target="_blank">
    Terms and Conditions
    </a>
    &amp;
    <a href="./code-of-conduct" target="_blank">
    Code of Conduct
    </a>
</div>
<div
    aria-hidden="true"
    class="emailoctopus-form-row-hp"
>
    <input
    type="text"
    name="hpc4b27b6e-eb38-11e9-be00-06b4694bee2a"
    tabindex="-1"
    autocomplete="nope"
    >
</div>
<div class="mt-6 emailoctopus-form-row-subscribe">
    <input
    type="hidden"
    name="successRedirectUrl"
    >
    <button class="btn w-100 btn-success lift" type="submit" onclick="gtag_report_conversion(); rdt('track', 'SignUp');">
    Subscribe to free newsletter <i class="fe fe-arrow-right ms-3"></i>
    </button>
</div>
</form>

<!-- <script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.6/form-recaptcha.js"></script> -->
<script src="https://emailoctopus.com/bundles/emailoctopuslist/js/1.6/form-embed.js"></script>

              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">

            <!-- Card -->
            <div class="card shadow-lg mb-6 mb-md-0">
              <div class="card-body">

                <!-- Preheading -->
                <div class="text-center mb-3">
                  <span class="badge rounded-pill bg-primary-soft">
                    <span class="h6 text-uppercase">Community</span>
                  </span>
                </div>

                <!-- Price -->
                <div class="d-flex justify-content-center">
                  <span class="h2 mb-0 mt-2">$</span>
                  <span class="price display-2 mb-0" data-annual="8.34" data-monthly="10">8.34</span>
                  <span class="h2 align-self-end mb-1">/mo</span>
                </div>

                <!-- Text -->
                <p class="text-center text-muted mb-5">
                </p>

                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Access to <a href="https://conf42.circle.so/">Circle community platform</a>
                  </p>
                </div>

                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Keynotes
                  </p>
                </div>
                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    <b>Priority access</b> to all content
                  </p>
                </div>
                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Weekly newsletter
                  </p>
                </div>
                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    <a href="https://conf42.circle.so/c/live-events/" target="_blank"><b>Live events!</b></a>
                  </p>
                </div>
                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Courses, quizes & certificates
                  </p>
                </div>
                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Community chats
                  </p>
                </div>
                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    <a href="https://conf42.circle.so/c/live-events/" target="_blank">Community events weekly</a>
                  </p>
                </div>
                
                <div class="d-flex">
                  <div class="badge badge-rounded-circle bg-success-soft mt-1 me-4">
                    <i class="fe fe-check"></i>
                  </div>
                  <p>
                    Free trial
                  </p>
                </div>
                

                <!-- Button -->
                <a href="https://conf42.circle.so/checkout/subscribe" class="btn w-100 btn-primary">
                  Join the community <i class="fe fe-arrow-right ms-3"></i>
                </a>

              </div>
            </div>

          </div>
        </div> <!-- / .row -->
      </div> <!-- / .container -->
    </section>

    <!-- SHAPE -->
    <div class="position-relative">
      <div class="shape shape-bottom shape-fluid-x svg-shim text-dark">
        <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 48h2880V0h-720C1442.5 52 720 0 720 0H0v48z" fill="currentColor"/></svg>      </div>
    </div>

    <!-- FOOTER -->
    <footer class="py-8 py-md-11 bg-dark">
      <div class="container">
        <div class="row">

          <div class="col-12 col-md-4 col-lg-3">
            <!-- Brand -->
            <img src="./assets/conf42/conf42_logo_white_small.png" alt="..." class="footer-brand img-fluid mb-2">
    
            <!-- Text -->
            <p class="text-gray-700 mb-2">
              Online tech events
            </p>
    
            <!-- Social -->
            <ul class="list-unstyled list-inline list-social mb-5">
              <li class="list-inline-item list-social-item me-3">
                <a href="https://www.linkedin.com/company/49110720/" class="text-decoration-none">
                  <img src="./assets/img/icons/social/linkedin.svg" class="list-social-icon" alt="...">
                </a>
              </li>
              <li class="list-inline-item list-social-item me-3">
                <a href="https://twitter.com/conf42com" class="text-decoration-none">
                  <img src="./assets/img/icons/social/twitter.svg" class="list-social-icon" alt="...">
                </a>
              </li>
            </ul>

            <!-- QR Code -->
            <img src="./assets/conf42/CONF42.QR.png" style="width: 100px;" class="mb-5 img-fluid" />
          </div>


          <div class="col-12 col-md-4 col-lg-3">
          
            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Events 2025
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-6 mb-md-8 mb-lg-0">
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devops2025">
                  DevOps 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/python2025">
                  Python 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ce2025">
                  Chaos Engineering 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/cloud2025">
                  Cloud Native 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/llms2025">
                  Large Language Models (LLMs) 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/golang2025">
                  Golang 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/sre2025">
                  Site Reliability Engineering (SRE) 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ml2025">
                  Machine Learning 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/obs2025">
                  Observability 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/quantum2025">
                  Quantum Computing 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/rustlang2025">
                  Rustlang 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/platform2025">
                  Platform Engineering 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/mlops2025">
                  MLOps 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/im2025">
                  Incident Management 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/kubenative2025">
                  Kube Native 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/js2025">
                  JavaScript 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/prompt2025">
                  Prompt Engineering 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/robotics2025">
                  Robotics 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devsecops2025">
                  DevSecOps 2025
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/iot2025">
                  Internet of Things (IoT) 2025
                </a>
              </li>
            
            </ul>
          
            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Events 2024
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-6 mb-md-8 mb-lg-0">
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devops2024">
                  DevOps 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ce2024">
                  Chaos Engineering 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/python2024">
                  Python 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/cloud2024">
                  Cloud Native 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/llms2024">
                  Large Language Models (LLMs) 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/golang2024">
                  Golang 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/sre2024">
                  Site Reliability Engineering (SRE) 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ml2024">
                  Machine Learning 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/obs2024">
                  Observability 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/quantum2024">
                  Quantum Computing 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/rustlang2024">
                  Rustlang 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/platform2024">
                  Platform Engineering 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/kubenative2024">
                  Kube Native 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/im2024">
                  Incident Management 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/js2024">
                  JavaScript 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/prompt2024">
                  Prompt Engineering 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devsecops2024">
                  DevSecOps 2024
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/iot2024">
                  Internet of Things (IoT) 2024
                </a>
              </li>
            
            </ul>
          
            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Events 2023
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-6 mb-md-8 mb-lg-0">
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devops2023">
                  DevOps 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ce2023">
                  Chaos Engineering 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/python2023">
                  Python 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/cloud2023">
                  Cloud Native 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/golang2023">
                  Golang 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/sre2023">
                  Site Reliability Engineering 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ml2023">
                  Machine Learning 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/obs2023">
                  Observability 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/quantum2023">
                  Quantum Computing 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/rustlang2023">
                  Rustlang 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/platform2023">
                  Platform Engineering 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/kubenative2023">
                  Kube Native 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/im2023">
                  Incident Management 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/js2023">
                  JavaScript 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devsecops2023">
                  DevSecOps 2023
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/iot2023">
                  Internet of Things (IoT) 2023
                </a>
              </li>
            
            </ul>
          
            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Events 2022
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-6 mb-md-8 mb-lg-0">
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/python2022">
                  Python 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/mobile2022">
                  Mobile 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ce2022">
                  Chaos Engineering 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/golang2022">
                  Golang 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/cloud2022">
                  Cloud Native 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ml2022">
                  Machine Learning 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/sre2022">
                  Site Reliability Engineering 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/quantum2022">
                  Quantum Computing 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/rustlang2022">
                  Rustlang 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/im2022">
                  Incident Management 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/kubenative2022">
                  Kube Native 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/js2022">
                  JavaScript 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devsecops2022">
                  DevSecOps 2022
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/web2022">
                  Web 3.0 2022
                </a>
              </li>
            
            </ul>
          
            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Events 2021
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-6 mb-md-8 mb-lg-0">
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ce2021">
                  Chaos Engineering 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/enterprise2021">
                  Enterprise Software 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/cloud2021">
                  Cloud Native 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/python2021">
                  Python 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/golang2021">
                  Golang 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ml2021">
                  Machine Learning 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/sre2021">
                  Site Reliability Engineering 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/js2021">
                  JavaScript 2021
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/devsecops2021">
                  DevSecOps 2021
                </a>
              </li>
            
            </ul>
          
            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Events 2020
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-6 mb-md-8 mb-lg-0">
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/ce2020">
                  Chaos Engineering 2020
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/oss2020">
                  Open Source Showcase 2020
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/sre2020">
                  Site Reliability Engineering 2020
                </a>
              </li>
            
              <li class="mb-3">
                <a class="text-reset" href="https://www.conf42.com/js2020">
                  JavaScript 2020
                </a>
              </li>
            
            </ul>
          
          </div>

          
          <div class="col-12 col-md-4 offset-md-4 col-lg-3 offset-lg-0">

            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Community
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-0">
              <li class="mb-3">
                <a href="./support" class="text-reset">
                  Support us
                </a>
              </li>
              <li class="mb-3">
                <a href="./speakers" class="text-reset">
                  Speakers
                </a>
              </li>
              <li class="mb-3">
                <a href="./hall-of-fame" class="text-reset">
                  Hall of fame
                </a>
              </li>
              <li class="mb-3">
                <a href="https://discord.gg/DnyHgrC7jC" class="text-reset" target="_blank">
                  Discord
                </a>
              </li>
              <li class="mb-3">
                <a href="./about" class="text-reset">
                  About the team
                </a>
              </li>
            </ul>

            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Sponsors
            </h6>
            <!-- List -->
            <ul class="list-unstyled text-muted mb-0">
              <li class="mb-3">
                <a href="./sponsor" class="text-reset" target="_blank">
                  Sponsorship
                </a>
              </li>
              <li class="mb-3">
                <a href="mailto:mark@conf42.com?subject=We would like to sponsor" class="text-reset" target="_blank">
                  Request the Prospectus
                </a>
              </li>
              <li class="mb-3">
                <a href="https://drive.google.com/drive/folders/1tT2lspLQgj3sdfxG9FwDVkBUt-TYSPGe?usp=sharing" class="text-reset" target="_blank">
                  Media kit
                </a>
              </li>
            </ul>
    
          </div>


          <div class="col-12 col-md-4 col-lg-3">
    
            <!-- Heading -->
            <h6 class="fw-bold text-uppercase text-gray-700">
              Legal
            </h6>
    
            <!-- List -->
            <ul class="list-unstyled text-muted mb-0">
              <li class="mb-3">
                <a href="./code-of-conduct" class="text-reset">
                  Code of Conduct
                </a>
              </li>
              <li class="mb-3">
                <a href="https://www.conf42.com/terms-and-conditions.pdf" class="text-reset" target="_blank">
                  Terms and Conditions
                </a>
              </li>
              <li class="mb-3">
                <a href="https://www.conf42.com/privacy-policy.pdf" class="text-reset" target="_blank">
                  Privacy policy
                </a>
              </li>
            </ul>
          </div>


        </div> <!-- / .row -->
      </div> <!-- / .container -->
    </footer>

    <!-- JAVASCRIPT -->
    <!-- Map JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
    
    <!-- Vendor JS -->
    <script src="./assets/js/vendor.bundle.js"></script>
    
    <!-- Theme JS -->
    <script src="./assets/js/theme.bundle.js"></script>

    <!-- Various JS -->
    <script src="./assets/js/various.js"></script>

    <script src='https://cdn.jsdelivr.net/npm/@widgetbot/crate@3' async defer>
      new Crate({
          notifications: true,
          indicator: true,
          server: '814240231606714368', // Conf42.com
          channel: '814240231788249115' // #community
      })
    </script>
  </body>
</html>